/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./js/Control.js":
/*!***********************!*\
  !*** ./js/Control.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config.js */ \"./js/config.js\");\n/* harmony import */ var _SliderTool_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SliderTool.js */ \"./js/SliderTool.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ \"./js/utils.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\nvar Control = /*#__PURE__*/function () {\n  function Control(editor) {\n    _classCallCheck(this, Control);\n    this.editor = editor;\n    this.vueInstance = null;\n    this.init();\n  }\n  return _createClass(Control, [{\n    key: \"setCurrentElement\",\n    value: function setCurrentElement(selectElement) {\n      this.currentElement = selectElement;\n      if (this.vueInstance) {\n        this.vueInstance.currentElement = selectElement;\n      }\n      this.editor.elementManager.selectComponent(selectElement);\n    }\n  }, {\n    key: \"setSelectedComponent\",\n    value: function setSelectedComponent(selectedComponent) {\n      if (this.vueInstance) {\n        this.vueInstance.hasSelected = !!selectedComponent;\n      }\n    }\n  }, {\n    key: \"handleChangeTarget\",\n    value: function handleChangeTarget(val) {\n      if (this.vueInstance) {\n        this.vueInstance.handleChangeTarget(val);\n      }\n    }\n  }, {\n    key: \"updateAttribute\",\n    value: function updateAttribute() {\n      if (this.vueInstance) {\n        this.vueInstance.updateAttribute();\n      }\n    }\n  }, {\n    key: \"handleChangeShowText\",\n    value: function handleChangeShowText(isChangeText) {\n      if (this.vueInstance) {\n        this.vueInstance.handleChangeShowText(isChangeText);\n      }\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var that = this;\n      var app = Vue.createApp({\n        template: \"\\n                <div id=\\\"step\\\" class=\\\"step\\\">\\n                    <div class=\\\"step-left text-left\\\">\\n                        <i class=\\\"icon-close\\\" @click=\\\"handleClosePage()\\\"></i>\\n                        <span class=\\\"step-btn icon-back\\\"></span>\\n                        <span class=\\\"step-btn icon-next\\\"></span>\\n                        <i class=\\\"icon-delete\\\" v-if=\\\"hasSelected && !(currentElement?.name === 'box-container' && !currentElement?.userData?.canMoving)\\\" @click=\\\"handleDelete()\\\"></i>\\n                    </div>\\n                    <div class=\\\"step-right text-right\\\"><van-button type=\\\"primary\\\" @click=\\\"handleSave()\\\">Save</van-button></div>\\n                </div>\\n                <canvas id=\\\"editCanvas\\\"></canvas>\\n                <div id=\\\"control\\\" class=\\\"control\\\">\\n                    <div v-if=\\\"target === 'page'\\\" class=\\\"box-insert\\\" v-show=\\\"tempId <= 0\\\">\\n                        <div v-for=\\\"item in controls\\\" class=\\\"btn-insert\\\" @click.stop=\\\"handleCreateClick(item.name)\\\">\\n                            <span class=\\\"pic\\\" :style=\\\"{'background-image': 'url(./images/system/icon-'+ item.icon +'.png)' }\\\"></span>\\n                            <div class=\\\"txt\\\">{{item.name}}</div>\\n                        </div>\\n                    </div>\\n                    <!-- \\u56FE\\u7247\\u9009\\u62E9\\u5F39\\u7A97 -->\\n                    <van-popup\\n                      v-model:show=\\\"showImg\\\"\\n                      position=\\\"bottom\\\"\\n                      @close=\\\"handleChangeTarget('page')\\\"\\n                      round\\n                    >\\n                        <div class=\\\"select-box\\\">\\n                            <div class=\\\"select-item\\\" @click.stop=\\\"handleAddImage()\\\">\\n                                Photo album\\n                                <!--<input type=\\\"file\\\" accept=\\\"image/*\\\">-->\\n                            </div>\\n                            <div class=\\\"select-item\\\" @click.stop=\\\"handleAddImage()\\\">\\n                                Take Photo\\n                                <!--<input type=\\\"file\\\" accept=\\\"image/*\\\" capture=\\\"camera\\\">-->\\n                            </div>\\n                            <div class=\\\"select-item\\\" style=\\\"border-top: 8px solid #EAEEF4;\\\" @click.stop=\\\"handleClose();\\\">Cancel</div>\\n                        </div>\\n                    </van-popup>\\n                    <!-- Icon \\u9009\\u62E9 -->\\n                    <div v-if=\\\"['create-icon'].includes(target)\\\" class=\\\"box-element\\\">\\n                        <div class=\\\"element-type\\\">\\n                            <i class=\\\"icon-close\\\" @click.stop=\\\"handleClose()\\\"></i>\\n                            <van-tabs scrollspy animated>\\n                              <van-tab title=\\\"Icon\\\" />\\n                              <!--<van-tab title=\\\"Style\\\" />-->\\n                            </van-tabs>\\n                            <i class=\\\"icon-success\\\"></i>\\n                        </div>\\n                        <div class=\\\"search-box\\\">\\n                            <i class=\\\"icon-search\\\"></i>\\n                            <input type=\\\"text\\\" placeholder=\\\"Search\\\" v-model=\\\"searchIconVal\\\" @input=\\\"handleSearchIcon\\\" />\\n                        </div>\\n                        <div class=\\\"list-wrap\\\">\\n                            <div class=\\\"list-box\\\">\\n                                <div class=\\\"list-item\\\" v-for=\\\"(item, index) in iconList\\\" @click.stop=\\\"handleAddIcon(item)\\\">\\n                                    <div class=\\\"item-box\\\"><img :src=\\\"'./css/svg/' + item.url\\\" alt=\\\"\\\" width=\\\"24\\\"></div>\\n                                    <div class=\\\"item-txt\\\">{{ item.name }}</div>\\n                                </div>\\n                            </div>\\n                        </div>\\n                    </div>\\n                    <!-- \\u6A21\\u677F/\\u7EC4\\u4EF6\\u9009\\u62E9 -->\\n                    <div v-if=\\\"['create-parts'].includes(target)\\\" class=\\\"box-element\\\">\\n                        <div class=\\\"element-type\\\">\\n                            <i class=\\\"icon-close\\\" @click.stop=\\\"handleClose()\\\"></i>\\n                            <van-tabs scrollspy animated>\\n                              <van-tab title=\\\"Parts\\\" />\\n                            </van-tabs>\\n                            <i class=\\\"icon-success\\\" @click=\\\"handleAddPart(partList[curItemTabIndex]?.children[curItemSelectIndex])\\\"></i>\\n                        </div>\\n                        <div class=\\\"element-sub-type\\\">\\n                            <van-tabs v-model:active=\\\"curItemTabIndex\\\" scrollspy animated>\\n                              <van-tab v-for=\\\"(item, index) in partList\\\" :title=\\\"item.name\\\" />\\n                            </van-tabs>\\n                        </div>\\n                        <div class=\\\"list-wrap\\\">\\n                            <div class=\\\"list-box template\\\">\\n                                <div class=\\\"list-item\\\" v-for=\\\"(item, index) in (partList[curItemTabIndex]?.children || [])\\\" :class=\\\"{active: curItemSelectIndex === index}\\\" @click=\\\"curItemSelectIndex = index\\\">\\n                                    <div class=\\\"item-box\\\"><img :src=\\\"'./images/template/' + item.url\\\" alt=\\\"\\\" ></div>\\n                                </div>\\n                            </div>\\n                        </div>\\n                    </div>\\n                    <!-- \\u5143\\u7D20\\u9009\\u4E2D\\u53D8\\u66F4\\u5C5E\\u6027 -->\\n                    <div v-if=\\\"target === 'element'\\\" class=\\\"box-element\\\">\\n                        <!-- \\u6587\\u672C\\u53D8\\u66F4 -->\\n                        <div class=\\\"text-input\\\" v-if=\\\"isChangeText\\\">\\n                            <div class=\\\"search-box\\\">\\n                                <i class=\\\"icon-search\\\"></i>\\n                                <input type=\\\"text\\\" ref=\\\"text-input-ref\\\" placeholder=\\\"Please enter\\\" v-model=\\\"textVal\\\" />\\n                            </div>\\n                            <i class=\\\"icon-success\\\" @click=\\\"handleChangeAttr('text', textVal)\\\"></i>\\n                        </div>\\n                        <div v-else-if=\\\"isEditData\\\">\\n                            <div class=\\\"edit-top\\\">\\n                                <i class=\\\"left\\\" style=\\\"\\\"></i>\\n                                <div class=\\\"center\\\" style=\\\"\\\">Edit data</div>\\n                                <i class=\\\"right icon-close\\\" @click.stop=\\\"handleChangeEdit(false)\\\"></i>\\n                            </div>\\n                            <div class=\\\"edit-box\\\">\\n                                <div class=\\\"edit-box-title\\\">Data name</div>\\n                                <div class=\\\"edit-box-item\\\"><input type=\\\"text\\\" :value=\\\"editRowData.userName || editRowData.abbreviation\\\" disabled style=\\\"padding: 0 10px;width: 100%; height: 40px;border-radius: 12px; border: 1px solid #CACFD8;\\\"></div>\\n                                <div  class=\\\"edit-box-title\\\" style=\\\"margin-top: 10px;\\\">Unit</div>\\n                                <van-radio-group v-model=\\\"editRowData.curUnit\\\" shape=\\\"dot\\\" class=\\\"edit-box-item\\\" style=\\\"display: flex; flex-wrap: wrap; gap: 5px;\\\">\\n                                  <van-radio v-for=\\\"item in getUnitArray(editRowData.unit)\\\" :name=\\\"item\\\" style=\\\"width: calc(50% - 5px);\\\">{{item}}</van-radio>\\n                                </van-radio-group>\\n                            </div>\\n                            <div class=\\\"edit-btn\\\">\\n                                <van-button @click=\\\"handleChangeEdit(false)\\\">Cancel</van-button>\\n                                <van-button type=\\\"primary\\\" @click=\\\"handleSaveEdit()\\\">Save</van-button>\\n                            </div>\\n                        </div>\\n                        <template v-else>\\n                            <div class=\\\"element-type\\\">\\n                                <i class=\\\"icon-close\\\" @click.stop=\\\"handleClose()\\\"></i>\\n                                <van-tabs v-model:active=\\\"attributeTabIndex\\\" scrollspy animated @change=\\\"handleChangeTabs\\\">\\n                                  <van-tab v-for=\\\"tab in attributeTabs[currentElement?.name] || []\\\" :title=\\\"tab.name\\\" />\\n                                </van-tabs>\\n                                <i class=\\\"icon-success\\\" @click.stop=\\\"handleClose()\\\"></i>\\n                            </div>\\n                            <div class=\\\"element-sub-type\\\" v-if=\\\"\\n                                attributeTabs[currentElement?.name]?.[attributeTabIndex]?.children && \\n                                attributeTabs[currentElement?.name]?.[attributeTabIndex]?.children.length > 0 &&\\n                                attributeTabs[currentElement?.name]?.[attributeTabIndex]?.children[0].name &&\\n                                !(currentElement?.name === 'shape-container' && attributeTabIndex === 1)\\n                                \\\">\\n                                <van-tabs v-model:active=\\\"attributeSubTabIndex\\\" scrollspy animated @change=\\\"handleChangeSubTabs\\\" :class=\\\"currentElement?.name\\\">\\n                                    <template v-if=\\\"currentElement?.name === 'text-container'\\\">\\n                                        <van-tab v-for=\\\"sub in attributeTabs[currentElement?.name]?.[attributeTabIndex]?.children || []\\\" :title=\\\"sub.name\\\" />\\n                                    </template>\\n                                    <template v-else-if=\\\"currentElement?.name === 'shape-container'\\\">\\n                                        <van-tab v-for=\\\"(sub, subIdx) in attributeTabs[currentElement?.name]?.[attributeTabIndex]?.children || []\\\">\\n                                            <template #title><span class=\\\"shape-icon\\\" :class=\\\"'icon-' + sub.name + '-shape'\\\"></span></template>\\n                                        </van-tab>\\n                                    </template>\\n                                </van-tabs>\\n                            </div>\\n                            <van-form>\\n                                <van-cell-group>\\n                                    <!-- \\u3010\\u6E10\\u53D8\\u3011\\u7C7B\\u578B -->\\n                                    <van-field :label=\\\"attributeList.find(x => x.type === 'gradient-type')?.label\\\" v-if=\\\"attributeList.map(x => x.type).includes('gradient-type')\\\">\\n                                      <template #input>\\n                                        <van-radio-group v-model=\\\"form.gradientTypeVal\\\" shape=\\\"dot\\\" style=\\\"display: flex;gap: 3px;align-items: center;\\\" @change=\\\"handleChangeAttr('gradient-type', form.gradientTypeVal)\\\">\\n                                          <van-radio name=\\\"Solid\\\">Solid</van-radio>\\n                                          <van-radio name=\\\"Linear\\\">Linear</van-radio>\\n                                          <van-radio name=\\\"Radial\\\">Radial</van-radio>\\n                                          <van-radio name=\\\"Conic\\\">Conic</van-radio>\\n                                        </van-radio-group>\\n                                      </template>\\n                                    </van-field>\\n                                    <!-- \\u3010\\u6E10\\u53D8\\u3011\\uFF08\\u5206\\u6BB5\\u5F0F\\uFF09\\u9009\\u62E9\\u5668 -->\\n                                    <van-field :label=\\\"attributeList.find(x => x.type === 'gradient-slider')?.label\\\" v-if=\\\"attributeList.map(x => x.type).includes('gradient-slider') && form.gradientTypeVal !== 'Solid'\\\">\\n                                      <template #input>\\n                                        <div class=\\\"gradient-slider\\\"></div>\\n                                      </template>\\n                                    </van-field>\\n                                    <!-- \\u989C\\u8272\\u9009\\u62E9\\u5668 -->\\n                                    <van-field :label=\\\"attributeList.find(x => x.type === 'color-picker')?.label\\\" v-if=\\\"attributeList.map(x => x.type).includes('color-picker')\\\">\\n                                      <template #input>\\n                                        <div class=\\\"color-picker\\\"></div>\\n                                      </template>\\n                                    </van-field>\\n                                    <!-- \\u3010\\u6E10\\u53D8\\u3011\\u900F\\u660E\\u5EA6 -->\\n                                    <van-field :label=\\\"attributeList.find(x => x.type === 'gradient-opacity')?.label\\\" v-if=\\\"attributeList.map(x => x.type).includes('gradient-opacity') && form.gradientTypeVal !== 'Solid'\\\">\\n                                      <template #input>\\n                                        <van-slider v-model=\\\"form.gradientOpacityVal\\\" bar-height=\\\"4px\\\" :min=\\\"0\\\" :max=\\\"100\\\" @change=\\\"handleChangeAttr('gradient-opacity', form.gradientOpacityVal)\\\" />\\n                                        <div class=\\\"item-right-input\\\">\\n                                            <input type=\\\"text\\\" v-model=\\\"form.gradientOpacityVal\\\" :min=\\\"0\\\" :max=\\\"100\\\" class=\\\"form-value-input\\\" @input=\\\"\\n                                                (e) => {\\n                                                    e.target.value = e.target.value.replace(/[^\\\\d]/g, '');\\n                                                    e.target.value = e.target.value === '' ? 0 : e.target.value;\\n                                                    e.target.value = Math.round(Number(e.target.value));\\n                                                    e.target.value = Math.max(0, Math.min(100, Math.round(Number(e.target.value))));\\n                                                    form.gradientOpacityVal = e.target.value;\\n                                                    handleChangeAttr('gradient-opacity', form.gradientOpacityVal)\\n                                                }\\n                                            \\\" />\\n                                        </div>\\n                                      </template>\\n                                    </van-field>\\n                                    <!-- \\u3010\\u6E10\\u53D8\\u3011\\u89D2\\u5EA6 -->\\n                                    <van-field :label=\\\"attributeList.find(x => x.type === 'gradient-angle')?.label\\\" v-if=\\\"attributeList.map(x => x.type).includes('gradient-angle') && ['Linear', 'Conic'].includes(form.gradientTypeVal)\\\">\\n                                      <template #input>\\n                                        <van-slider v-model=\\\"form.gradientAngleVal\\\" bar-height=\\\"4px\\\" :min=\\\"0\\\" :max=\\\"360\\\" @change=\\\"handleChangeAttr('gradient-angle', form.gradientAngleVal)\\\" />\\n                                        <div class=\\\"item-right-input\\\">\\n                                            <input type=\\\"text\\\" v-model=\\\"form.gradientAngleVal\\\" :min=\\\"0\\\" :max=\\\"360\\\" class=\\\"form-value-input\\\" @input=\\\"\\n                                                (e) => {\\n                                                    e.target.value = e.target.value.replace(/[^\\\\d]/g, '');\\n                                                    e.target.value = e.target.value === '' ? 0 : e.target.value;\\n                                                    e.target.value = Math.round(Number(e.target.value));\\n                                                    e.target.value = Math.max(0, Math.min(360, Math.round(Number(e.target.value))));\\n                                                    form.gradientAngleVal = e.target.value;\\n                                                    handleChangeAttr('gradient-angle', form.gradientAngleVal)\\n                                                }\\n                                            \\\" />\\n                                        </div>\\n                                      </template>\\n                                    </van-field>\\n                                    <!-- \\u900F\\u660E\\u5EA6(\\u901A\\u7528) -->\\n                                    <van-field :label=\\\"attributeList.find(x => x.type === 'opacity-slider')?.label\\\" v-if=\\\"attributeList.map(x => x.type).includes('opacity-slider')\\\">\\n                                      <template #input>\\n                                        <van-slider v-model=\\\"form.opacityVal\\\" bar-height=\\\"4px\\\" :min=\\\"0\\\" :max=\\\"100\\\" @change=\\\"handleChangeAttr('alpha', form.opacityVal)\\\" />\\n                                        <div class=\\\"item-right-input\\\">\\n                                            <input type=\\\"text\\\" v-model=\\\"form.opacityVal\\\" :min=\\\"0\\\" :max=\\\"100\\\" class=\\\"form-value-input\\\" @input=\\\"\\n                                                (e) => {\\n                                                    e.target.value = e.target.value.replace(/[^\\\\d]/g, '');\\n                                                    e.target.value = e.target.value === '' ? 0 : e.target.value;\\n                                                    e.target.value = Math.round(Number(e.target.value));\\n                                                    e.target.value = Math.max(0, Math.min(100, Math.round(Number(e.target.value))));\\n                                                    form.opacityVal = e.target.value;\\n                                                    handleChangeAttr('alpha', form.opacityVal)\\n                                                }\\n                                            \\\" />\\n                                        </div>\\n                                      </template>\\n                                    </van-field>\\n                                    <!-- \\u89D2\\u5EA6(\\u901A\\u7528) -->\\n                                    <van-field :label=\\\"attributeList.find(x => x.type === 'angle-slider')?.label\\\" v-if=\\\"attributeList.map(x => x.type).includes('angle-slider')\\\">\\n                                      <template #input>\\n                                        <van-slider v-model=\\\"form.angleVal\\\" bar-height=\\\"4px\\\" :min=\\\"0\\\" :max=\\\"360\\\" @change=\\\"handleChangeAttr('angle-slider', form.angleVal)\\\" />\\n                                        <div class=\\\"item-right-input\\\">\\n                                            <input type=\\\"number\\\" v-model=\\\"form.angleVal\\\" :min=\\\"0\\\" :max=\\\"360\\\" class=\\\"form-value-input\\\" @input=\\\"\\n                                                (e) => {\\n                                                    e.target.value = e.target.value.replace(/[^\\\\d]|-(?=-)/g, '');\\n                                                    e.target.value = e.target.value === '' ? 0 : e.target.value;\\n                                                    e.target.value = Math.round(Number(e.target.value));\\n                                                    e.target.value = Math.max(0, Math.min(360, Math.round(Number(e.target.value))));\\n                                                    form.angleVal = e.target.value;\\n                                                    handleChangeAttr('angle-slider', form.angleVal)\\n                                                }\\n                                            \\\" />\\n                                        </div>\\n                                      </template>\\n                                    </van-field>\\n                                    <!-- \\u5706\\u89D2(\\u901A\\u7528) -->\\n                                    <van-field :label=\\\"attributeList.find(x => x.type === 'border-radius-slider')?.label\\\" v-if=\\\"attributeList.map(x => x.type).includes('border-radius-slider')\\\">\\n                                      <template #input>\\n                                        <van-slider v-model=\\\"form.borderRadiusVal\\\" bar-height=\\\"4px\\\" :max=\\\"100\\\" @change=\\\"handleChangeAttr('border-radius-slider', form.borderRadiusVal)\\\" />\\n                                        <div class=\\\"item-right-input\\\">\\n                                            <input type=\\\"text\\\" v-model=\\\"form.borderRadiusVal\\\" :min=\\\"0\\\" :max=\\\"100\\\" class=\\\"form-value-input\\\" @input=\\\"\\n                                                (e) => {\\n                                                    e.target.value = e.target.value.replace(/[^\\\\d]/g, '');\\n                                                    e.target.value = e.target.value === '' ? 0 : e.target.value;\\n                                                    e.target.value = Math.round(Number(e.target.value));\\n                                                    e.target.value = Math.max(0, Math.min(100, Math.round(Number(e.target.value))));\\n                                                    form.borderRadiusVal = e.target.value;\\n                                                    handleChangeAttr('border-radius-slider', form.borderRadiusVal)\\n                                                }\\n                                            \\\" />\\n                                        </div>\\n                                      </template>\\n                                    </van-field>\\n                                    <!-- \\u5B57\\u4F53\\u5927\\u5C0F -->\\n                                    <van-field :label=\\\"attributeList.find(x => x.type === 'size-slider')?.label\\\" v-if=\\\"attributeList.map(x => x.type).includes('size-slider')\\\">\\n                                      <template #input>\\n                                        <van-slider v-model=\\\"form.fontSizeVal\\\" bar-height=\\\"4px\\\" :min=\\\"1\\\" :max=\\\"80\\\" @change=\\\"handleChangeAttr('size-slider', form.fontSizeVal)\\\" />\\n                                        <div class=\\\"item-right-input\\\">\\n                                            <input type=\\\"number\\\" v-model=\\\"form.fontSizeVal\\\" :min=\\\"1\\\" :max=\\\"80\\\" class=\\\"form-value-input\\\" @input=\\\"\\n                                                (e) => {\\n                                                    e.target.value = e.target.value.replace(/[^\\\\d]/g, '');\\n                                                    e.target.value = e.target.value === '' ? 0 : e.target.value;\\n                                                    e.target.value = Math.round(Number(e.target.value));\\n                                                    e.target.value = Math.max(1, Math.min(80, Math.round(Number(e.target.value))));\\n                                                    form.fontSizeVal = e.target.value;\\n                                                    handleChangeAttr('size-slider', form.fontSizeVal)\\n                                                }\\n                                            \\\" />\\n                                        </div>\\n                                      </template>\\n                                    </van-field>\\n                                    <!-- \\u5BF9\\u9F50\\u65B9\\u5F0F -->\\n                                    <van-field :label=\\\"attributeList.find(x => x.type === 'align-selector')?.label\\\" v-if=\\\"attributeList.map(x => x.type).includes('align-selector')\\\">\\n                                      <template #input>\\n                                        <div class=\\\"item-align-select\\\">\\n                                            <i class=\\\"icon-align-left\\\" :class=\\\"{'active': textAlign === 0}\\\" @click=\\\"handleChangeAttr('text-align', 0)\\\"></i>\\n                                            <i class=\\\"icon-align-center\\\"  :class=\\\"{'active': textAlign === 0.5}\\\" @click=\\\"handleChangeAttr('text-align', 0.5)\\\"></i>\\n                                            <i class=\\\"icon-align-right\\\"  :class=\\\"{'active': textAlign === 1}\\\" @click=\\\"handleChangeAttr('text-align', 1)\\\"></i>\\n                                        </div>\\n                                      </template>\\n                                    </van-field>\\n                                    <!-- \\u5B57\\u6BCD\\u95F4\\u8DDD -->\\n                                    <van-field :label=\\\"attributeList.find(x => x.type === 'letter-spacing-slider')?.label\\\" v-if=\\\"attributeList.map(x => x.type).includes('letter-spacing-slider')\\\">\\n                                      <template #input>\\n                                        <van-slider v-model=\\\"form.letterSpacingVal\\\" bar-height=\\\"4px\\\" :min=\\\"0\\\" :max=\\\"10\\\"  @change=\\\"handleChangeAttr('letter-spacing-slider', form.letterSpacingVal)\\\" />\\n                                        <div class=\\\"item-right-input\\\">\\n                                            <input type=\\\"number\\\" v-model=\\\"form.letterSpacingVal\\\" :min=\\\"0\\\" :max=\\\"10\\\" class=\\\"form-value-input\\\" @input=\\\"\\n                                                (e) => {\\n                                                    e.target.value = e.target.value.replace(/[^\\\\d]/g, '');\\n                                                    e.target.value = e.target.value === '' ? 0 : e.target.value;\\n                                                    e.target.value = Math.round(Number(e.target.value));\\n                                                    e.target.value = Math.max(0, Math.min(10, Math.round(Number(e.target.value))));\\n                                                    form.letterSpacingVal = e.target.value;\\n                                                    handleChangeAttr('letter-spacing-slider', form.letterSpacingVal)\\n                                                }\\n                                            \\\" />\\n                                        </div>\\n                                      </template>\\n                                    </van-field>\\n                                    <!-- \\u884C\\u9AD8 -->\\n                                    <van-field :label=\\\"attributeList.find(x => x.type === 'line-height-slider')?.label\\\" v-if=\\\"attributeList.map(x => x.type).includes('line-height-slider')\\\">\\n                                      <template #input>\\n                                        <van-slider v-model=\\\"form.lineHeightVal\\\" bar-height=\\\"4px\\\" :min=\\\"0\\\" :max=\\\"100\\\" @change=\\\"handleChangeAttr('line-height-slider', form.lineHeightVal)\\\" />\\n                                        <div class=\\\"item-right-input\\\">\\n                                            <input type=\\\"number\\\" v-model=\\\"form.lineHeightVal\\\" :min=\\\"0\\\" :max=\\\"100\\\" class=\\\"form-value-input\\\" @input=\\\"\\n                                                (e) => {\\n                                                    e.target.value = e.target.value.replace(/[^\\\\d]/g, '');\\n                                                    e.target.value = e.target.value === '' ? 0 : e.target.value;\\n                                                    e.target.value = Math.round(Number(e.target.value));\\n                                                    e.target.value = Math.max(0, Math.min(100, Math.round(Number(e.target.value))));\\n                                                    form.lineHeightVal = e.target.value;\\n                                                    handleChangeAttr('line-height-slider', form.lineHeightVal)\\n                                                }\\n                                            \\\" />\\n                                        </div>\\n                                      </template>\\n                                    </van-field>\\n                                    <!-- \\u5BBD\\u9AD8\\u8BBE\\u7F6E -->\\n                                    <van-grid v-if=\\\"attributeList.map(x => x.type).includes('bounds-setting')\\\" class=\\\"base-grid title\\\" :column-num=\\\"2\\\" :border=\\\"false\\\" style=\\\"margin-top: 10px; padding-top: 10px;\\\" :center=\\\"false\\\">\\n                                        <van-grid-item>Width and Height</van-grid-item>\\n                                        <van-grid-item>\\n                                            <span v-if=\\\"linkScale\\\" class=\\\"btn-toggle-link\\\" @click=\\\"handleChangeLinkScale(false)\\\">Constrain Proportions <i class=\\\"icon-link\\\" style=\\\"color: #006BF7;\\\"></i></span>\\n                                            <span v-else class=\\\"btn-toggle-link\\\" @click=\\\"handleChangeLinkScale(true)\\\">Non-Uniform Scale <i class=\\\"icon-unlink\\\"></i></span>\\n                                        </van-grid-item>\\n                                    </van-grid>\\n                                    <van-grid v-if=\\\"attributeList.map(x => x.type).includes('bounds-setting')\\\" class=\\\"base-grid\\\" :column-num=\\\"2\\\" :border=\\\"false\\\" style=\\\"margin-bottom: 10px;padding-bottom: 10px;\\\">\\n                                      <van-grid-item>\\n                                        <div class=\\\"grid-wrap\\\">\\n                                            W\\n                                            <div class=\\\"van-stepper step-width\\\">\\n                                                <button type=\\\"button\\\" class=\\\"van-stepper__minus van-haptics-feedback\\\" @click=\\\"handleChangeAttr('bounds-width', Number(form.widthVal) - 5)\\\"></button>\\n                                                <input type=\\\"number\\\" class=\\\"van-stepper__input\\\" @input=\\\"(e) => {e.target.value = e.target.value.replace(/[^\\\\d]/g, ''); handleChangeAttr('bounds-width', e.target.value)}\\\" :value=\\\"form.widthVal\\\" min=\\\"1\\\" step=\\\"1\\\" />\\n                                                <button type=\\\"button\\\" class=\\\"van-stepper__plus van-haptics-feedback\\\" @click=\\\"handleChangeAttr('bounds-width', Number(form.widthVal) + 5)\\\"></button>\\n                                            </div>\\n                                        </div>\\n                                      </van-grid-item>\\n                                      <van-grid-item>\\n                                        <div class=\\\"grid-wrap\\\">\\n                                            H\\n                                            <div class=\\\"van-stepper step-height\\\">\\n                                                <button type=\\\"button\\\" class=\\\"van-stepper__minus van-haptics-feedback\\\" @click=\\\"handleChangeAttr('bounds-height', Number(form.heightVal) - 5)\\\"></button>\\n                                                <input type=\\\"number\\\" class=\\\"van-stepper__input\\\" @input=\\\"(e) => {e.target.value = e.target.value.replace(/[^\\\\d]/g, ''); handleChangeAttr('bounds-height', e.target.value)}\\\" :value=\\\"form.heightVal\\\" min=\\\"1\\\" step=\\\"1\\\" />\\n                                                <button type=\\\"button\\\" class=\\\"van-stepper__plus van-haptics-feedback\\\" @click=\\\"handleChangeAttr('bounds-height', Number(form.heightVal) + 5)\\\"></button>\\n                                            </div>\\n                                        </div>\\n                                      </van-grid-item>\\n                                    </van-grid>\\n                                    <!-- \\u9634\\u5F71\\u7EB5\\u6DF1 -->\\n                                    <van-field :label=\\\"attributeList.find(x => x.type === 'distance-slider')?.label\\\" v-if=\\\"attributeList.map(x => x.type).includes('distance-slider')\\\">\\n                                      <template #input>\\n                                        <van-slider v-model=\\\"form.shadowDistanceVal\\\" bar-height=\\\"4px\\\" :min=\\\"0\\\" :max=\\\"20\\\"  @change=\\\"handleChangeAttr('distance-slider', form.shadowDistanceVal)\\\" />\\n                                        <div class=\\\"item-right-input\\\">\\n                                            <input type=\\\"number\\\" v-model=\\\"form.shadowDistanceVal\\\" :min=\\\"0\\\" :max=\\\"20\\\" class=\\\"form-value-input\\\" @input=\\\"\\n                                                (e) => {\\n                                                    e.target.value = e.target.value.replace(/[^\\\\d]/g, '');\\n                                                    e.target.value = e.target.value === '' ? 0 : e.target.value;\\n                                                    e.target.value = Math.round(Number(e.target.value));\\n                                                    e.target.value = Math.max(0, Math.min(20, Math.round(Number(e.target.value))));\\n                                                    form.shadowDistanceVal = e.target.value;\\n                                                    handleChangeAttr('distance-slider', form.shadowDistanceVal)\\n                                                }\\n                                            \\\" />\\n                                        </div>\\n                                      </template>\\n                                    </van-field>\\n                                    <div v-if=\\\"attributeList.map(x => x.type).includes('data-setting')\\\" class=\\\"form-setting\\\">\\n                                        <div class=\\\"setting-select-box\\\">\\n                                            <div v-for=\\\"(item, index) in boxSettingList\\\" :key=\\\"index\\\" class=\\\"setting-select-item\\\" :class=\\\"{'active': boxSettingIndex === index}\\\" @click=\\\"handleChangeSettingIndex(index)\\\">\\n                                                <div class=\\\"select-item-wrap\\\">\\n                                                    <span v-for=\\\"it in item\\\" :style=\\\"{'color': it.target?.style?.fill}\\\">{{it.target?.text}}</span>\\n                                                </div>\\n                                            </div>\\n                                        </div>\\n                                        <div class=\\\"search-box\\\" style=\\\"margin: 0;\\\" v-if=\\\"boxSettingList.length > 0\\\">\\n                                            <i class=\\\"icon-search\\\"></i>\\n                                            <input type=\\\"text\\\" placeholder=\\\"Search\\\" v-model=\\\"searchSettingVal\\\" @input=\\\"handleSearchSetting\\\" />\\n                                        </div>\\n                                        <div class=\\\"setting-select-list\\\" v-if=\\\"boxSettingList.length > 0\\\">\\n                                            <template v-if=\\\"boxSettingData.length > 0\\\">\\n                                                <div v-for=\\\"(item, index) in boxSettingData\\\" :key=\\\"index\\\" class=\\\"setting-list-item\\\" :data-key=\\\"item.name\\\" :class=\\\"{'active': boxSettingList[boxSettingIndex]?.[0]?.groupDataKey === item.name}\\\" @click=\\\"handleSelectSetting(item, index)\\\">\\n                                                    <div class=\\\"item-left\\\">{{item.name}}</div>\\n                                                    <div class=\\\"item-right\\\">{{item.value}} {{item.unit}} <i class=\\\"icon-edit\\\" @click.stop=\\\"handleChangeEdit(true, item)\\\"></i></div>\\n                                                </div>\\n                                            </template>\\n                                            <template v-else>\\n                                                <div class=\\\"setting-list-empty\\\">No data</div>\\n                                            </template>\\n                                        </div>\\n                                    </div>\\n                                </van-cell-group>\\n                            </van-form>\\n                        </template>\\n                    </div>\\n                </div>\\n            \",\n        data: function data() {\n          return {\n            tempId: 0,\n            types: ['box-container', 'text-container', 'image-container', 'icon-container', 'shape-container'],\n            hasSelected: false,\n            target: 'page',\n            controls: _config_js__WEBPACK_IMPORTED_MODULE_0__.controls,\n            currentElement: null,\n            sliderTool: null,\n            attributeList: [],\n            attributeTabIndex: 0,\n            attributeSubTabIndex: 0,\n            attributeTabs: _config_js__WEBPACK_IMPORTED_MODULE_0__.tabs,\n            boxSettingList: [],\n            boxSettingData: [],\n            boxSettingLock: [],\n            boxSettingIndex: 0,\n            searchSettingVal: '',\n            iconList: JSON.parse(JSON.stringify(_config_js__WEBPACK_IMPORTED_MODULE_0__.svgs)),\n            partList: JSON.parse(JSON.stringify(_config_js__WEBPACK_IMPORTED_MODULE_0__.parts)),\n            showImg: false,\n            linkScale: true,\n            links: {\n              shapeLinkScale: true,\n              iconLinkScale: true\n            },\n            curItemTabIndex: 0,\n            curItemSelectIndex: 0,\n            colors: _config_js__WEBPACK_IMPORTED_MODULE_0__.defaultPickColors,\n            searchIconVal: '',\n            textVal: '',\n            isChangeText: false,\n            isEditData: false,\n            editRowData: {},\n            textAlign: 0.5,\n            form: {\n              opacityVal: 100,\n              angleVal: 0,\n              borderRadiusVal: 0,\n              fontSizeVal: 14,\n              letterSpacingVal: 0,\n              lineHeightVal: 14,\n              widthVal: 0,\n              heightVal: 0,\n              gradientVal: 50,\n              gradientOpacityVal: 100,\n              gradientAngleVal: 0,\n              gradientTypeVal: 'Solid',\n              shadowDistanceVal: 0,\n              shadowOffsetXVal: 0,\n              shadowOffsetYVal: 0\n            }\n          };\n        },\n        watch: {\n          currentElement: {\n            handler: function handler(newV, oldV) {\n              var _this = this;\n              this.attributeList = [];\n              this.attributeTabIndex = 0;\n              this.attributeSubTabIndex = 0;\n              this.boxSettingList = [];\n              this.isEditData = false;\n              this.target = newV ? 'element' : 'page';\n              // 先销毁实例化\n              _this.destroyJscolorInstance();\n              if (_this.sliderTool) {\n                _this.sliderTool.destroy();\n                _this.sliderTool = null;\n              }\n              if (newV) {\n                _this.$nextTick(function () {\n                  var _this$attributeTabs$n;\n                  _this.setSubTabIndex();\n                  _this.attributeList = ((_this$attributeTabs$n = _this.attributeTabs[newV.name]) === null || _this$attributeTabs$n === void 0 || (_this$attributeTabs$n = _this$attributeTabs$n[_this.attributeTabIndex]) === null || _this$attributeTabs$n === void 0 || (_this$attributeTabs$n = _this$attributeTabs$n.children) === null || _this$attributeTabs$n === void 0 || (_this$attributeTabs$n = _this$attributeTabs$n[_this.attributeSubTabIndex]) === null || _this$attributeTabs$n === void 0 ? void 0 : _this$attributeTabs$n.children) || [];\n                  if (newV.name === 'box-container') {\n                    var texts = newV.children.filter(function (x) {\n                      return ['text-container'].includes(x.name);\n                    }).map(function (x) {\n                      var _x$userData;\n                      return {\n                        target: x.children.find(function (y) {\n                          return y.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[x.name];\n                        }),\n                        container: x,\n                        groupDataKey: (_x$userData = x.userData) === null || _x$userData === void 0 ? void 0 : _x$userData.groupDataKey\n                      };\n                    }).filter(function (x) {\n                      return x.groupDataKey;\n                    });\n                    var groupMap = {};\n                    texts.forEach(function (item) {\n                      var key = item.groupDataKey;\n                      if (!groupMap[key]) {\n                        groupMap[key] = [];\n                      }\n                      groupMap[key].push(item);\n                    });\n                    _this.boxSettingList = Object.values(groupMap);\n                    _this.boxSettingData = JSON.parse(JSON.stringify(_this.boxSettingLock));\n                    _this.boxSettingIndex = 0;\n                    _this.searchSettingVal = '';\n                    _this.handleScrollToEl();\n                  }\n                  var selectedElement = _this.currentElement;\n                  if (selectedElement) {\n                    that.editor.stageManager.resetStage();\n                    that.editor.stageManager.focusElement(selectedElement);\n                  }\n                  _this.handleInit();\n                });\n              } else {\n                if (that.editor.canvas) {\n                  that.editor.handleResize(false);\n                }\n              }\n            },\n            deep: false,\n            immediate: true\n          }\n        },\n        methods: {\n          getUnitArray: _config_js__WEBPACK_IMPORTED_MODULE_0__.getUnitArray,\n          // 切换主功能项\n          handleChangeTabs: function handleChangeTabs(e) {\n            var _this$attributeTabs$t;\n            this.attributeList = [];\n            this.attributeSubTabIndex = 0;\n            this.setSubTabIndex();\n            this.attributeList = ((_this$attributeTabs$t = this.attributeTabs[this.currentElement.name]) === null || _this$attributeTabs$t === void 0 || (_this$attributeTabs$t = _this$attributeTabs$t[this.attributeTabIndex]) === null || _this$attributeTabs$t === void 0 || (_this$attributeTabs$t = _this$attributeTabs$t.children) === null || _this$attributeTabs$t === void 0 || (_this$attributeTabs$t = _this$attributeTabs$t[this.attributeSubTabIndex]) === null || _this$attributeTabs$t === void 0 ? void 0 : _this$attributeTabs$t.children) || [];\n            this.handleInit();\n          },\n          // 切换次功能项\n          handleChangeSubTabs: function handleChangeSubTabs(e) {\n            var _this$attributeTabs$t2;\n            if (this.currentElement.name === 'shape-container') {\n              switch (e) {\n                case 0:\n                  that.currentElement.changeShapeType('rect');\n                  break;\n                case 1:\n                  that.currentElement.changeShapeType('circle');\n                  break;\n                case 2:\n                  that.currentElement.changeShapeType('triangle');\n                  break;\n              }\n              that.editor.render();\n            }\n            this.attributeList = [];\n            this.attributeSubTabIndex = e;\n            this.attributeList = (_this$attributeTabs$t2 = this.attributeTabs[this.currentElement.name]) === null || _this$attributeTabs$t2 === void 0 || (_this$attributeTabs$t2 = _this$attributeTabs$t2[this.attributeTabIndex]) === null || _this$attributeTabs$t2 === void 0 || (_this$attributeTabs$t2 = _this$attributeTabs$t2.children) === null || _this$attributeTabs$t2 === void 0 ? void 0 : _this$attributeTabs$t2[this.attributeSubTabIndex].children;\n            this.handleInit();\n          },\n          // 设置次功能项的当前选中项（主要是为了图形组件默认选中当前是矩形/圆形/三角形）\n          setSubTabIndex: function setSubTabIndex() {\n            if (!this.currentElement) return;\n            if (this.currentElement.name === 'shape-container') {\n              if (this.currentElement.children[0].userData.shapeType === 'rect') {\n                this.attributeSubTabIndex = 0;\n              } else if (this.currentElement.children[0].userData.shapeType === 'circle') {\n                this.attributeSubTabIndex = 1;\n              } else if (this.currentElement.children[0].userData.shapeType === 'triangle') {\n                this.attributeSubTabIndex = 2;\n              }\n            }\n          },\n          handleDelete: function handleDelete() {\n            that.editor.elementManager.deleteSelectedComponent();\n            that.setCurrentElement(null);\n          },\n          handleChangeTarget: function handleChangeTarget(val) {\n            this.target = val;\n            this.showImg = val === 'create-image';\n            if (this.target === 'create-parts') {\n              this.curItemTabIndex = 0;\n              this.curItemSelectIndex = 0;\n            }\n            that.editor.handleResize(false);\n          },\n          // 初始化属性\n          handleInit: function handleInit() {\n            var _this2 = this;\n            if (!this.currentElement) return;\n            // 注意要加延迟\n            this.$nextTick(function () {\n              // 如果当前设置中有透明度组件，则初始化透明度数值\n              if (_this2.attributeList.filter(function (x) {\n                return x.type === 'opacity-slider';\n              }).length > 0) {\n                var _this2$currentElement;\n                if (((_this2$currentElement = _this2.currentElement) === null || _this2$currentElement === void 0 ? void 0 : _this2$currentElement.name) === 'text-container' && _this2.attributeSubTabIndex === 3) {\n                  var _this2$currentElement2;\n                  _this2.form.opacityVal = ((_this2$currentElement2 = _this2.currentElement) === null || _this2$currentElement2 === void 0 || (_this2$currentElement2 = _this2$currentElement2.userData) === null || _this2$currentElement2 === void 0 || (_this2$currentElement2 = _this2$currentElement2.shadow) === null || _this2$currentElement2 === void 0 ? void 0 : _this2$currentElement2.alpha) * 100;\n                } else {\n                  var _this2$currentElement3, _this2$currentElement4;\n                  _this2.form.opacityVal = ((_this2$currentElement3 = _this2.currentElement) === null || _this2$currentElement3 === void 0 || (_this2$currentElement3 = _this2$currentElement3.userData) === null || _this2$currentElement3 === void 0 ? void 0 : _this2$currentElement3.bgAlpha) * 100 || ((_this2$currentElement4 = _this2.currentElement.children.find(function (x) {\n                    return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                  })) === null || _this2$currentElement4 === void 0 ? void 0 : _this2$currentElement4.alpha) * 100 || 0;\n                }\n              }\n              // 如果当前设置中有宽高设置组件，则初始化宽高设置\n              if (_this2.attributeList.filter(function (x) {\n                return x.type === 'bounds-setting';\n              }).length > 0) {\n                _this2.form.widthVal = Math.round(_this2.currentElement.width);\n                _this2.form.heightVal = Math.round(_this2.currentElement.height);\n                document.querySelector('.step-width .van-stepper__input').value = _this2.form.widthVal;\n                document.querySelector('.step-height .van-stepper__input').value = _this2.form.heightVal;\n                if (_this2.currentElement.name === 'shape-container') {\n                  _this2.linkScale = _this2.links.shapeLinkScale;\n                } else if (_this2.currentElement.name === 'icon-container') {\n                  _this2.linkScale = _this2.links.iconLinkScale;\n                }\n              }\n              // 如果当前设置中有图形类型切换，则初始化图形类型\n              if (_this2.attributeList.filter(function (x) {\n                return x.type === 'gradient-type';\n              }).length > 0) {\n                var _this2$currentElement5;\n                _this2.form.gradientTypeVal = ((_this2$currentElement5 = _this2.currentElement.children.find(function (x) {\n                  return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                })) === null || _this2$currentElement5 === void 0 ? void 0 : _this2$currentElement5.userData.colorType) || 'Solid';\n              }\n              // 如果当前有圆角设置，则初始化圆角设置相关\n              if (_this2.attributeList.filter(function (x) {\n                return x.type === 'border-radius-slider';\n              }).length > 0) {\n                var _this2$currentElement6, _this2$currentElement7, _this2$currentElement8, _this2$currentElement9, _this2$currentElement0, _this2$currentElement1;\n                // 区分背景圆角和通用圆角\n                _this2.form.borderRadiusVal = (((_this2$currentElement6 = _this2.currentElement) === null || _this2$currentElement6 === void 0 || (_this2$currentElement6 = _this2$currentElement6.userData) === null || _this2$currentElement6 === void 0 ? void 0 : _this2$currentElement6.bgRadius) || ((_this2$currentElement7 = _this2.currentElement) === null || _this2$currentElement7 === void 0 || (_this2$currentElement7 = _this2$currentElement7.userData) === null || _this2$currentElement7 === void 0 ? void 0 : _this2$currentElement7.bgRadius) === 0) && ((_this2$currentElement8 = _this2.currentElement) === null || _this2$currentElement8 === void 0 || (_this2$currentElement8 = _this2$currentElement8.userData) === null || _this2$currentElement8 === void 0 ? void 0 : _this2$currentElement8.bgRadius) || (((_this2$currentElement9 = _this2.currentElement.children.find(function (x) {\n                  return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                })) === null || _this2$currentElement9 === void 0 || (_this2$currentElement9 = _this2$currentElement9.userData) === null || _this2$currentElement9 === void 0 ? void 0 : _this2$currentElement9.radius) || ((_this2$currentElement0 = _this2.currentElement.children.find(function (x) {\n                  return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                })) === null || _this2$currentElement0 === void 0 || (_this2$currentElement0 = _this2$currentElement0.userData) === null || _this2$currentElement0 === void 0 ? void 0 : _this2$currentElement0.radius) === 0) && ((_this2$currentElement1 = _this2.currentElement.children.find(function (x) {\n                  return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                })) === null || _this2$currentElement1 === void 0 ? void 0 : _this2$currentElement1.userData.radius) || 0;\n              }\n              // 如果当前有字体大小设置，则初始化字体大小\n              if (_this2.attributeList.filter(function (x) {\n                return x.type === 'size-slider';\n              }).length > 0) {\n                var _this2$currentElement10;\n                _this2.form.fontSizeVal = (_this2$currentElement10 = _this2.currentElement.children.find(function (x) {\n                  return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                })) === null || _this2$currentElement10 === void 0 ? void 0 : _this2$currentElement10.style.fontSize;\n              }\n              // 如果当前有角度设置，则初始化角度（需要乘以100）\n              if (_this2.attributeList.filter(function (x) {\n                return x.type === 'angle-slider';\n              }).length > 0) {\n                var _this2$currentElement11;\n                if (((_this2$currentElement11 = _this2.currentElement) === null || _this2$currentElement11 === void 0 ? void 0 : _this2$currentElement11.name) === 'text-container' && _this2.attributeSubTabIndex === 3) {\n                  _this2.form.angleVal = _this2.currentElement.userData.shadow.angle;\n                } else {\n                  _this2.form.angleVal = Math.round(_this2.currentElement.rotation * 180 / Math.PI);\n                }\n              }\n              // 渐变角度\n              if (_this2.attributeList.filter(function (x) {\n                return x.type === 'gradient-angle';\n              }).length > 0) {\n                var userData = _this2.currentElement.children.find(function (x) {\n                  return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                }).userData;\n                if (userData.colorType === 'Linear') {\n                  _this2.form.gradientAngleVal = _this2.getAngleFromGradient((userData === null || userData === void 0 ? void 0 : userData.gradient) || 0);\n                } else if (userData.colorType === 'Conic') {\n                  var _userData$gradient;\n                  _this2.form.gradientAngleVal = _this2.getConicAngleFromGradient((userData === null || userData === void 0 || (_userData$gradient = userData.gradient) === null || _userData$gradient === void 0 || (_userData$gradient = _userData$gradient.gradientParams) === null || _userData$gradient === void 0 ? void 0 : _userData$gradient.startAngle) || 0);\n                }\n              }\n              // 对齐方式\n              if (_this2.attributeList.filter(function (x) {\n                return x.type === 'align-selector';\n              }).length > 0) {\n                var _this2$currentElement12;\n                _this2.textAlign = ((_this2$currentElement12 = _this2.currentElement.userData) === null || _this2$currentElement12 === void 0 ? void 0 : _this2$currentElement12.alignX) || 0.5;\n              }\n              // 文字间距\n              if (_this2.attributeList.filter(function (x) {\n                return x.type === 'letter-spacing-slider';\n              }).length > 0) {\n                var _this2$currentElement13;\n                _this2.form.letterSpacingVal = Math.floor((_this2$currentElement13 = _this2.currentElement.children.find(function (x) {\n                  return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                })) === null || _this2$currentElement13 === void 0 ? void 0 : _this2$currentElement13.style.letterSpacing);\n              }\n              // 行高\n              if (_this2.attributeList.filter(function (x) {\n                return x.type === 'line-height-slider';\n              }).length > 0) {\n                var _this2$currentElement14;\n                _this2.form.lineHeightVal = Math.floor((_this2$currentElement14 = _this2.currentElement.children.find(function (x) {\n                  return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                })) === null || _this2$currentElement14 === void 0 ? void 0 : _this2$currentElement14.style.lineHeight);\n              }\n              // 阴影纵深\n              if (_this2.attributeList.filter(function (x) {\n                return x.type === 'distance-slider';\n              }).length > 0) {\n                _this2.form.shadowDistanceVal = _this2.currentElement.userData.shadow.blur;\n              }\n              _this2.sliderTool = null;\n              // 如果有渐变（分段式）选择器组件则初始化\n              if (document.querySelector('.gradient-slider')) {\n                document.querySelector('.gradient-slider').innerHTML = \"\\n                                <div class=\\\"container\\\">\\n                                    <div id=\\\"slider\\\"></div>\\n                                    <div class=\\\"btn-group\\\">\\n                                        <button class=\\\"btn\\\" id=\\\"del\\\">-</button>\\n                                        <button class=\\\"btn\\\" id=\\\"add\\\">+</button>\\n                                    </div>\\n                                </div>\\n                            \";\n                // 初始化渐变插件并绑定变更事件\n                _this2.sliderTool = new _SliderTool_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('slider', [], {\n                  onUpdate: function onUpdate(points) {\n                    (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.debounce)(function () {\n                      var _this2$currentElement15;\n                      if (!document.querySelector('.gradient-slider')) return;\n                      var userData = (_this2$currentElement15 = _this2.currentElement.children.find(function (x) {\n                        return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                      })) === null || _this2$currentElement15 === void 0 ? void 0 : _this2$currentElement15.userData;\n                      var colorType = userData.colorType;\n                      var colorStops = points.map(function (x) {\n                        return {\n                          position: x.value,\n                          color: x.color\n                        };\n                      });\n                      var gradientParams = {};\n                      if (colorType === 'Linear') {\n                        var _userData$gradient2, _userData$gradient3;\n                        gradientParams = userData !== null && userData !== void 0 && (_userData$gradient2 = userData.gradient) !== null && _userData$gradient2 !== void 0 && _userData$gradient2.gradientParams ? userData === null || userData === void 0 || (_userData$gradient3 = userData.gradient) === null || _userData$gradient3 === void 0 ? void 0 : _userData$gradient3.gradientParams : {\n                          x0: 0,\n                          y0: 0,\n                          x1: _this2.currentElement.getBounds().width,\n                          y1: 0\n                        };\n                        _this2.currentElement.setGradient(true, colorStops, gradientParams);\n                      } else if (colorType === 'Radial') {\n                        var _userData$gradient4, _userData$gradient5;\n                        gradientParams = userData !== null && userData !== void 0 && (_userData$gradient4 = userData.gradient) !== null && _userData$gradient4 !== void 0 && _userData$gradient4.gradientParams ? userData === null || userData === void 0 || (_userData$gradient5 = userData.gradient) === null || _userData$gradient5 === void 0 ? void 0 : _userData$gradient5.gradientParams : {\n                          x0: _this2.currentElement.getBounds().width / 2,\n                          y0: _this2.currentElement.getBounds().height / 2,\n                          r0: 0,\n                          x1: _this2.currentElement.getBounds().width / 2,\n                          y1: _this2.currentElement.getBounds().height / 2,\n                          r1: _this2.currentElement.getBounds().height / 2\n                        };\n                        _this2.currentElement.setGradient(false, colorStops, gradientParams);\n                      } else if (colorType === 'Conic') {\n                        var _userData$gradient6, _userData$gradient7, _userData$gradient8;\n                        _this2.currentElement.setConicGradient(colorStops, (userData === null || userData === void 0 || (_userData$gradient6 = userData.gradient) === null || _userData$gradient6 === void 0 || (_userData$gradient6 = _userData$gradient6.gradientParams) === null || _userData$gradient6 === void 0 ? void 0 : _userData$gradient6.centerX) || 0, (userData === null || userData === void 0 || (_userData$gradient7 = userData.gradient) === null || _userData$gradient7 === void 0 || (_userData$gradient7 = _userData$gradient7.gradientParams) === null || _userData$gradient7 === void 0 ? void 0 : _userData$gradient7.centerY) || 0, (userData === null || userData === void 0 || (_userData$gradient8 = userData.gradient) === null || _userData$gradient8 === void 0 || (_userData$gradient8 = _userData$gradient8.gradientParams) === null || _userData$gradient8 === void 0 ? void 0 : _userData$gradient8.startAngle) || 0);\n                      }\n                    }, 200);\n                  },\n                  onSelect: function onSelect(point) {\n                    var color = point.color.trim();\n                    if (!color.startsWith('#')) return;\n                    var hex = color.slice(1);\n                    var alpha = 100;\n                    if (hex.length === 8) {\n                      var alphaHex = hex.slice(6);\n                      var alphaDecimal = parseInt(alphaHex, 16);\n                      alpha = Math.round(alphaDecimal / 255 * 100);\n                    }\n                    _this2.form.gradientOpacityVal = alpha;\n                  }\n                });\n              }\n              // 如果有颜色选择器则初始化\n              if (document.querySelector('.color-picker')) {\n                window.update = null;\n                window.update = function (picker) {\n                  _this2.handleChangeAttr(_this2.sliderTool ? 'gradient-color' : 'color', picker.toString());\n                };\n                var defaultColorHtml = '';\n                _this2.colors.map(function (x) {\n                  defaultColorHtml += \"<span style=\\\"background: \".concat(x, \";\\\" data-color=\\\"\").concat(x, \"\\\" class=\\\"color-panel\\\"></span>\");\n                });\n                document.querySelector('.color-picker').innerHTML = \"\\n                                <button id=\\\"colorPicker\\\" data-jscolor=\\\"{previewElement:'#pr1', onInput:'update(this)', previewSize:24}\\\" style=\\\"background-image: conic-gradient(from 90deg, #fc292e, #fd3bf9, #3546fd, #47fcff, #45fc46, #fef846, #f87531);\\\"></button>\\n                                <input type=\\\"hidden\\\" id=\\\"pr1\\\"></input>\\n                                \".concat(defaultColorHtml, \"\\n                            \");\n                setTimeout(function () {\n                  document.querySelectorAll('.color-picker .color-panel').forEach(function (e) {\n                    e.addEventListener('click', function () {\n                      _this2.handleChangeAttr(_this2.sliderTool ? 'gradient-color' : 'color', e.getAttribute('data-color'));\n                    });\n                  });\n                  jscolor.install();\n                }, 50);\n\n                // 如果有渐变组件则给图形设置渐变\n                if (_this2.sliderTool && _this2.currentElement.children.find(function (x) {\n                  return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                }).userData.colorType !== 'Solid') {\n                  var colorStops = [];\n                  var gradientParams = {};\n                  var _userData = _this2.currentElement.children.find(function (x) {\n                    return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                  }).userData;\n                  var colorType = _userData.colorType;\n                  if (_userData.gradient) {\n                    colorStops = _userData.gradient.colorStops ? _userData.gradient.colorStops : _this2.sliderTool.getAllPoints().map(function (x) {\n                      return {\n                        position: x.value,\n                        color: x.color\n                      };\n                    });\n                    gradientParams = _userData.gradient.gradientParams;\n                    var points = colorStops.map(function (x) {\n                      return {\n                        color: x.color,\n                        value: x.position\n                      };\n                    });\n                    _this2.sliderTool.setAllPoints(points);\n                    if (colorType === 'Linear') {\n                      _this2.currentElement.setGradient(true, colorStops, gradientParams);\n                    } else if (colorType === 'Radial') {\n                      _this2.currentElement.setGradient(false, colorStops, gradientParams);\n                    } else if (colorType === 'Conic') {\n                      var _userData$gradient9, _userData$gradient0, _userData$gradient1;\n                      _this2.currentElement.setConicGradient(colorStops, (_userData === null || _userData === void 0 || (_userData$gradient9 = _userData.gradient) === null || _userData$gradient9 === void 0 || (_userData$gradient9 = _userData$gradient9.gradientParams) === null || _userData$gradient9 === void 0 ? void 0 : _userData$gradient9.centerX) || 0, (_userData === null || _userData === void 0 || (_userData$gradient0 = _userData.gradient) === null || _userData$gradient0 === void 0 || (_userData$gradient0 = _userData$gradient0.gradientParams) === null || _userData$gradient0 === void 0 ? void 0 : _userData$gradient0.centerY) || 0, (_userData === null || _userData === void 0 || (_userData$gradient1 = _userData.gradient) === null || _userData$gradient1 === void 0 || (_userData$gradient1 = _userData$gradient1.gradientParams) === null || _userData$gradient1 === void 0 ? void 0 : _userData$gradient1.startAngle) || 0);\n                    }\n                  } else {\n                    colorStops = _this2.sliderTool.getAllPoints().map(function (x) {\n                      return {\n                        position: x.value,\n                        color: x.color\n                      };\n                    });\n                    if (colorType === 'Linear') {\n                      gradientParams = {\n                        x0: 0,\n                        y0: 0,\n                        x1: _this2.currentElement.getBounds().width,\n                        y1: 0\n                      };\n                      _this2.currentElement.setGradient(true, colorStops, gradientParams);\n                    } else if (colorType === 'Radial') {\n                      gradientParams = {\n                        x0: _this2.currentElement.getBounds().width / 2,\n                        y0: _this2.currentElement.getBounds().height / 2,\n                        r0: 0,\n                        x1: _this2.currentElement.getBounds().width / 2,\n                        y1: _this2.currentElement.getBounds().height / 2,\n                        r1: _this2.currentElement.getBounds().height / 2\n                      };\n                      _this2.currentElement.setGradient(false, colorStops, gradientParams);\n                    } else if (colorType === 'Conic') {\n                      _this2.currentElement.setConicGradient(colorStops, 0, 0, 0);\n                    }\n                  }\n                  _this2.handleColorSelect(_this2.sliderTool.getSelectedPoint().color);\n                }\n                // 如果没有渐变组件则给图形设置纯色（图形/文字/图标取值都不一样）\n                else {\n                  var colorValue = null;\n                  if (_this2.currentElement.name === 'shape-container') {\n                    var _this2$currentElement16;\n                    var color = (_this2$currentElement16 = _this2.currentElement.children.find(function (x) {\n                      return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                    })) === null || _this2$currentElement16 === void 0 || (_this2$currentElement16 = _this2$currentElement16.fillStyle) === null || _this2$currentElement16 === void 0 ? void 0 : _this2$currentElement16.color;\n                    colorValue = color ? \"#\".concat(color.toString(16).padStart(6, \"0\")) : '#FFFFFF';\n                  } else if (_this2.currentElement.name === 'text-container') {\n                    if (_this2.attributeSubTabIndex === 3) {\n                      colorValue = _this2.currentElement.userData.shadow.color;\n                    } else {\n                      var _this2$currentElement17;\n                      colorValue = _this2.attributeSubTabIndex === 0 ? _this2.currentElement.children.find(function (x) {\n                        return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                      }).style.fill : ((_this2$currentElement17 = _this2.currentElement) === null || _this2$currentElement17 === void 0 ? void 0 : _this2$currentElement17.userData.bgColor) || 'transparent';\n                    }\n                  } else if (_this2.currentElement.name === 'icon-container') {\n                    var _this2$currentElement18;\n                    var _color = (_this2$currentElement18 = _this2.currentElement.children.find(function (x) {\n                      return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this2.currentElement.name];\n                    })) === null || _this2$currentElement18 === void 0 ? void 0 : _this2$currentElement18.tint;\n                    colorValue = _color ? \"#\".concat(_color.toString(16).padStart(6, \"0\")) : '#FFFFFF';\n                  }\n                  if (colorValue) {\n                    _this2.handleColorSelect(colorValue);\n                  }\n                  _this2.handleChangeAttr('color', colorValue);\n                }\n              }\n              that.editor.handleResize(false);\n            });\n          },\n          // 勾选颜色\n          handleColorSelect: function handleColorSelect(color) {\n            color = color.toUpperCase();\n            if (!document.querySelector('.color-picker')) return;\n            document.querySelectorAll('.color-picker span, .color-picker button').forEach(function (x) {\n              x.classList.remove('icon-success');\n            });\n            if (this.colors.includes(color)) {\n              document.querySelector(\".color-picker span[data-color=\\\"\".concat(color, \"\\\"]\")).classList.add('icon-success');\n            } else {\n              document.querySelector(\".color-picker button\").classList.add('icon-success');\n            }\n          },\n          // 创建图片元素\n          handleAddImage: function handleAddImage() {\n            var resImgElement = that.editor.elementFactory.addImage(\"/images/dashboard/test1.png\", that.editor.stageSize.width / 2, that.editor.stageSize.height / 2, 200, 200, 1, 0);\n            that.setCurrentElement(resImgElement);\n            this.handleClose();\n            that.editor.handleResize(false);\n          },\n          // 创建 Icon 元素\n          handleAddIcon: function handleAddIcon(item) {\n            var resIconElement = that.editor.elementFactory.addIcon(\"/css/svg/\".concat(item.url), that.editor.stageSize.width / 2, that.editor.stageSize.height / 2, 28, 28, \"#FFFFFF\");\n            that.setCurrentElement(resIconElement);\n            that.editor.handleResize(false);\n          },\n          // 创建 模板（复合组件） 元素\n          handleAddPart: function handleAddPart(it) {\n            var _this3 = this;\n            var item = it;\n            if (!item && !item.list) return false;\n            this.handleClose();\n            var loading = vant.showLoadingToast({\n              duration: 0,\n              mask: true,\n              forbidClick: true,\n              loadingType: 'circular',\n              position: 'middle',\n              className: 'data-loading'\n            });\n            var formData = new FormData();\n            formData.append('token', 'LOGIN:263cc240d97f0f4a5273848436ebe2f4');\n            formData.append('id', item.tempId);\n            axios.post(\"\".concat(_config_js__WEBPACK_IMPORTED_MODULE_0__.apiUrl, \"/userdashboard/info\"), formData).then(function (response) {\n              var _response$data;\n              var params = null;\n              if ((_response$data = response.data) !== null && _response$data !== void 0 && _response$data.data) {\n                var _response$data2;\n                params = (_response$data2 = response.data) === null || _response$data2 === void 0 || (_response$data2 = _response$data2.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.params;\n              }\n              if (params) {\n                var resData = JSON.parse(params);\n                item.list.map(function (x) {\n                  if (x.action === 'part') {\n                    x.data.texts.map(function (y) {\n                      if (x.sortId) {\n                        var _resData$find;\n                        var groupDataKey = (_resData$find = resData.find(function (k) {\n                          return k.partId === x.partId && k.sortId === x.sortId;\n                        })) === null || _resData$find === void 0 || (_resData$find = _resData$find.data.find(function (k) {\n                          return y.groupDataType === k.groupDataType && y.groupDataIndex === k.groupDataIndex;\n                        })) === null || _resData$find === void 0 ? void 0 : _resData$find.groupDataKey;\n                        if (groupDataKey) y.groupDataKey = groupDataKey;\n                      } else {\n                        var _resData$find2;\n                        var _groupDataKey = (_resData$find2 = resData.find(function (k) {\n                          return k.partId === x.partId;\n                        })) === null || _resData$find2 === void 0 || (_resData$find2 = _resData$find2.data.find(function (k) {\n                          return y.groupDataType === k.groupDataType && y.groupDataIndex === k.groupDataIndex;\n                        })) === null || _resData$find2 === void 0 ? void 0 : _resData$find2.groupDataKey;\n                        if (_groupDataKey) y.groupDataKey = _groupDataKey;\n                      }\n                    });\n                  }\n                });\n                _this3.updateData();\n              }\n              _this3.removeElementsByNames(that.editor.stage, _this3.types);\n              setTimeout(function () {\n                that.editor.stageManager.resetStage();\n                item.list.map(function (x) {\n                  switch (x.action) {\n                    case 'part':\n                      var resPartsElement = that.editor.elementFactory.addBox(x.data.texts, x.data.shapes, x.data.images, x.data.icons, that.editor.stageSize.width / 2 + x.data.offsetX, that.editor.stageSize.height / 2 + x.data.offsetY, 1, 0, {\n                        canMoving: item.canMoving,\n                        canEdit: item.canEdit,\n                        partId: x.partId,\n                        tempId: item.tempId,\n                        sortId: x.sortId\n                      });\n                      _this3.$nextTick(function () {\n                        that.editor.handleResize(false);\n                        that.editor.elementManager.updateElementHitArea(resPartsElement);\n                      });\n                      break;\n                  }\n                });\n              }, 0);\n            })[\"catch\"](function (error) {\n              console.error('fail：', error);\n              vant.showDialog({\n                title: 'Network request failed.',\n                message: 'Please try again later.',\n                'confirm-button-text': 'Cancel'\n              });\n            })[\"finally\"](function () {\n              loading.close();\n            });\n          },\n          // 修改元素属性（如透明度/颜色等）\n          handleChangeAttr: function handleChangeAttr(param, value) {\n            var _this4 = this;\n            if (!this.currentElement) return;\n            var element = this.currentElement;\n            // 获取内容元素（参考 icon-container 逻辑）\n            var contentElement = element.children.find(function (child) {\n              return child.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[element.name];\n            });\n            if (!contentElement) return;\n            // 修改元素透明度\n            if (param === 'alpha') {\n              var _this$currentElement;\n              if (((_this$currentElement = this.currentElement) === null || _this$currentElement === void 0 ? void 0 : _this$currentElement.name) === 'text-container' && this.attributeSubTabIndex === 3) {\n                this.currentElement.setShadow({\n                  alpha: value / 100\n                });\n              } else {\n                this.currentElement.setBackgroundAlpha ? this.currentElement.setBackgroundAlpha(value) : this.currentElement.children.find(function (x) {\n                  return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this4.currentElement.name];\n                }).alpha = Math.min(Math.max(value / 100, 0), 1);\n              }\n            }\n            // 修改元素宽度\n            else if (param === 'bounds-width') {\n              (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.debounce)(function () {\n                element.scale.set(1);\n                var targetWidth = Math.max(4, Math.round(Number(value) || 0));\n                var oldWidth = contentElement.width || targetWidth; // 避免 oldWidth 为 0\n                var scaleRatio = oldWidth > 0 ? targetWidth / oldWidth : 1;\n                contentElement.width = targetWidth;\n                if (_this4.linkScale) {\n                  contentElement.height = Math.max(10, Math.round(contentElement.height * scaleRatio));\n                }\n                element.width = contentElement.width;\n                element.height = contentElement.height;\n                _this4.form.widthVal = Math.round(contentElement.width);\n                _this4.form.heightVal = Math.round(contentElement.height);\n                that.editor.elementManager.syncEditBox(element.selector, element);\n                that.editor.elementManager.updateElementHitArea(element);\n                that.editor.elementManager.selectComponent(element);\n                if (element.name === 'shape-container') {\n                  var _contentElement$userD;\n                  if ((contentElement === null || contentElement === void 0 || (_contentElement$userD = contentElement.userData) === null || _contentElement$userD === void 0 ? void 0 : _contentElement$userD.colorType) === 'Solid') {\n                    var _contentElement$fillS;\n                    var color = contentElement === null || contentElement === void 0 || (_contentElement$fillS = contentElement.fillStyle) === null || _contentElement$fillS === void 0 ? void 0 : _contentElement$fillS.color;\n                    var colorValue = color ? \"#\".concat(color.toString(16).padStart(6, \"0\")) : '#FFFFFF';\n                    element.setColor(colorValue);\n                  } else {\n                    var gradient = contentElement === null || contentElement === void 0 ? void 0 : contentElement.userData.gradient;\n                    if (gradient) {\n                      element.setGradient(gradient.isLinear, gradient.colorStops, gradient.gradientParams);\n                    }\n                  }\n                }\n              }, 50);\n            }\n            // 修改元素高度\n            else if (param === 'bounds-height') {\n              (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.debounce)(function () {\n                element.scale.set(1);\n                var targetHeight = Math.max(4, Math.round(Number(value) || 0));\n                var oldHeight = contentElement.height;\n                var scaleRatio = oldHeight > 0 ? targetHeight / oldHeight : 1;\n                contentElement.height = targetHeight;\n                if (_this4.linkScale) {\n                  contentElement.width = Math.max(4, Math.round(contentElement.width * scaleRatio));\n                }\n                element.width = contentElement.width;\n                element.height = contentElement.height;\n                _this4.form.heightVal = Math.round(targetHeight);\n                _this4.form.widthVal = Math.round(contentElement.width);\n                that.editor.elementManager.syncEditBox(element.selector, element);\n                that.editor.elementManager.updateElementHitArea(element);\n                that.editor.elementManager.selectComponent(element);\n                if (element.name === 'shape-container') {\n                  var _contentElement$userD2;\n                  if ((contentElement === null || contentElement === void 0 || (_contentElement$userD2 = contentElement.userData) === null || _contentElement$userD2 === void 0 ? void 0 : _contentElement$userD2.colorType) === 'Solid') {\n                    var _contentElement$fillS2;\n                    var color = contentElement === null || contentElement === void 0 || (_contentElement$fillS2 = contentElement.fillStyle) === null || _contentElement$fillS2 === void 0 ? void 0 : _contentElement$fillS2.color;\n                    var colorValue = color ? \"#\".concat(color.toString(16).padStart(6, \"0\")) : '#FFFFFF';\n                    element.setColor(colorValue);\n                  } else {\n                    var gradient = contentElement === null || contentElement === void 0 ? void 0 : contentElement.userData.gradient;\n                    if (gradient) {\n                      element.setGradient(gradient.isLinear, gradient.colorStops, gradient.gradientParams);\n                    }\n                  }\n                }\n              }, 50);\n            }\n            // 修改元素渐变颜色\n            else if (param === 'gradient-color') {\n              if (this.sliderTool) {\n                this.sliderTool.setSelectedPointColor(value);\n                this.handleColorSelect(value);\n                var userData = this.currentElement.children.find(function (x) {\n                  return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this4.currentElement.name];\n                }).userData;\n                var colorType = userData.colorType;\n                var colorStops = this.sliderTool.getAllPoints().map(function (x) {\n                  return {\n                    position: x.value,\n                    color: x.color\n                  };\n                });\n                var gradientParams = {};\n                if (colorType === 'Linear') {\n                  var _userData$gradient10, _userData$gradient11;\n                  gradientParams = (_userData$gradient10 = userData.gradient) !== null && _userData$gradient10 !== void 0 && _userData$gradient10.gradientParams ? (_userData$gradient11 = userData.gradient) === null || _userData$gradient11 === void 0 ? void 0 : _userData$gradient11.gradientParams : {\n                    x0: 0,\n                    y0: 0,\n                    x1: this.currentElement.getBounds().width,\n                    y1: 0\n                  };\n                  this.currentElement.setGradient(true, colorStops, gradientParams);\n                } else if (colorType === 'Radial') {\n                  var _userData$gradient12, _userData$gradient13;\n                  gradientParams = (_userData$gradient12 = userData.gradient) !== null && _userData$gradient12 !== void 0 && _userData$gradient12.gradientParams ? (_userData$gradient13 = userData.gradient) === null || _userData$gradient13 === void 0 ? void 0 : _userData$gradient13.gradientParams : {\n                    x0: this.currentElement.getBounds().width / 2,\n                    y0: this.currentElement.getBounds().height / 2,\n                    r0: 0,\n                    x1: this.currentElement.getBounds().width / 2,\n                    y1: this.currentElement.getBounds().height / 2,\n                    r1: this.currentElement.getBounds().height / 2\n                  };\n                  this.currentElement.setGradient(false, colorStops, gradientParams);\n                } else if (colorType === 'Conic') {\n                  var _userData$gradient14, _userData$gradient15, _userData$gradient16;\n                  this.currentElement.setConicGradient(colorStops, (userData === null || userData === void 0 || (_userData$gradient14 = userData.gradient) === null || _userData$gradient14 === void 0 || (_userData$gradient14 = _userData$gradient14.gradientParams) === null || _userData$gradient14 === void 0 ? void 0 : _userData$gradient14.centerX) || 0, (userData === null || userData === void 0 || (_userData$gradient15 = userData.gradient) === null || _userData$gradient15 === void 0 || (_userData$gradient15 = _userData$gradient15.gradientParams) === null || _userData$gradient15 === void 0 ? void 0 : _userData$gradient15.centerY) || 0, (userData === null || userData === void 0 || (_userData$gradient16 = userData.gradient) === null || _userData$gradient16 === void 0 || (_userData$gradient16 = _userData$gradient16.gradientParams) === null || _userData$gradient16 === void 0 ? void 0 : _userData$gradient16.startAngle) || 0);\n                }\n                this.form.gradientOpacityVal = 100;\n              }\n            }\n            // 修改元素颜色\n            else if (param === 'color') {\n              if (this.currentElement.name === 'text-container') {\n                if (this.attributeSubTabIndex === 0) {\n                  this.currentElement.setColor(value);\n                } else if (this.attributeSubTabIndex === 1) {\n                  this.currentElement.setBackgroundColor(value);\n                } else if (this.attributeSubTabIndex === 3) {\n                  this.currentElement.setShadow({\n                    color: value\n                  });\n                }\n              } else {\n                this.currentElement.setColor(value);\n              }\n              this.handleColorSelect(value);\n            }\n            // 修改颜色类型（渐变或纯色）\n            else if (param === 'gradient-type') {\n              var _contentElement = this.currentElement.children.find(function (x) {\n                return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this4.currentElement.name];\n              });\n              _contentElement.userData.colorType = value;\n              _contentElement.alpha = 1;\n              var _this$currentElement$ = this.currentElement.getBounds(),\n                width = _this$currentElement$.width,\n                height = _this$currentElement$.height;\n              if (value === 'Linear') {\n                _contentElement.userData.gradient = _objectSpread(_objectSpread({}, _contentElement.userData.gradient), {}, {\n                  isLinear: true,\n                  gradientParams: {\n                    x0: 0,\n                    y0: height / 2,\n                    x1: width,\n                    y1: height / 2\n                  }\n                });\n              } else if (value === 'Radial') {\n                _contentElement.userData.gradient = _objectSpread(_objectSpread({}, _contentElement.userData.gradient), {}, {\n                  isLinear: false,\n                  gradientParams: {\n                    x0: width / 2,\n                    y0: height / 2,\n                    r0: 0,\n                    x1: width / 2,\n                    y1: height / 2,\n                    r1: Math.max(width, height) / 2\n                  }\n                });\n              } else if (value === 'Conic') {\n                _contentElement.userData.gradient = _objectSpread(_objectSpread({}, _contentElement.userData.gradient), {}, {\n                  isLinear: false,\n                  gradientParams: {\n                    centerX: 0,\n                    centerY: 0,\n                    startAngle: 0\n                  }\n                });\n              }\n              this.handleInit();\n            }\n            // 修改圆角度数\n            else if (param === 'border-radius-slider') {\n              this.currentElement.setBackgroundRadius ? this.currentElement.setBackgroundRadius(value) : this.currentElement.setRadius(value);\n            }\n            // 修改字体大小\n            else if (param === 'size-slider') {\n              this.currentElement.setFontSize(value);\n            }\n            // 修改旋转角度\n            else if (param === 'angle-slider') {\n              var _this$currentElement2;\n              if (((_this$currentElement2 = this.currentElement) === null || _this$currentElement2 === void 0 ? void 0 : _this$currentElement2.name) === 'text-container' && this.attributeSubTabIndex === 3) {\n                this.currentElement.setShadow({\n                  angle: value\n                });\n              } else {\n                var _element = this.currentElement;\n                var radians = value * Math.PI / 180;\n                _element.rotation = radians;\n                this.form.angleVal = value;\n                that.editor.elementManager.updateElementHitArea(_element);\n                that.editor.elementManager.syncEditBox(_element.selector, _element);\n                that.editor.elementManager.selectComponent(_element);\n              }\n            }\n            // 修改文本\n            else if (param === 'text') {\n              var _this$currentElement$2;\n              this.currentElement.children.find(function (x) {\n                return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this4.currentElement.name];\n              }).text = value;\n              this.currentElement.setFontSize((_this$currentElement$2 = this.currentElement.children.find(function (x) {\n                return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this4.currentElement.name];\n              })) === null || _this$currentElement$2 === void 0 ? void 0 : _this$currentElement$2.style.fontSize);\n              this.isChangeText = false;\n              this.handleInit();\n            }\n            // 修改渐变透明度\n            else if (param === 'gradient-opacity') {\n              var _this$sliderTool$getS = this.sliderTool.getSelectedPoint(),\n                color = _this$sliderTool$getS.color;\n              var baseColor = (color.startsWith('#') ? color.slice(1) : color).slice(0, 6); // 提取基础色\n              var opacity = Math.max(0, Math.min(100, value)); // 限制0-100\n              var alpha = Math.round(opacity / 100 * 255); // 转0-255\n              var newColor = \"#\".concat(baseColor).concat(opacity < 100 ? alpha.toString(16).padStart(2, '0').toUpperCase() : '');\n              this.sliderTool.setSelectedPointColor(newColor);\n              var _userData2 = this.currentElement.children.find(function (x) {\n                return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this4.currentElement.name];\n              }).userData;\n              var _colorType = _userData2.colorType;\n              var _colorStops = this.sliderTool.getAllPoints().map(function (x) {\n                return {\n                  position: x.value,\n                  color: x.color\n                };\n              });\n              var _gradientParams = {};\n              if (_colorType === 'Linear') {\n                var _userData2$gradient, _userData2$gradient2;\n                _gradientParams = (_userData2$gradient = _userData2.gradient) !== null && _userData2$gradient !== void 0 && _userData2$gradient.gradientParams ? (_userData2$gradient2 = _userData2.gradient) === null || _userData2$gradient2 === void 0 ? void 0 : _userData2$gradient2.gradientParams : {\n                  x0: 0,\n                  y0: 0,\n                  x1: this.currentElement.getBounds().width,\n                  y1: 0\n                };\n                this.currentElement.setGradient(true, _colorStops, _gradientParams);\n              } else if (_colorType === 'Radial') {\n                var _userData2$gradient3, _userData2$gradient4;\n                _gradientParams = (_userData2$gradient3 = _userData2.gradient) !== null && _userData2$gradient3 !== void 0 && _userData2$gradient3.gradientParams ? (_userData2$gradient4 = _userData2.gradient) === null || _userData2$gradient4 === void 0 ? void 0 : _userData2$gradient4.gradientParams : {\n                  x0: this.currentElement.getBounds().width / 2,\n                  y0: this.currentElement.getBounds().height / 2,\n                  r0: 0,\n                  x1: this.currentElement.getBounds().width / 2,\n                  y1: this.currentElement.getBounds().height / 2,\n                  r1: this.currentElement.getBounds().height / 2\n                };\n                this.currentElement.setGradient(false, _colorStops, _gradientParams);\n              } else if (_colorType === 'Conic') {\n                var _userData2$gradient5, _userData2$gradient6, _userData2$gradient7;\n                this.currentElement.setConicGradient(_colorStops, (_userData2 === null || _userData2 === void 0 || (_userData2$gradient5 = _userData2.gradient) === null || _userData2$gradient5 === void 0 || (_userData2$gradient5 = _userData2$gradient5.gradientParams) === null || _userData2$gradient5 === void 0 ? void 0 : _userData2$gradient5.centerX) || 0, (_userData2 === null || _userData2 === void 0 || (_userData2$gradient6 = _userData2.gradient) === null || _userData2$gradient6 === void 0 || (_userData2$gradient6 = _userData2$gradient6.gradientParams) === null || _userData2$gradient6 === void 0 ? void 0 : _userData2$gradient6.centerY) || 0, (_userData2 === null || _userData2 === void 0 || (_userData2$gradient7 = _userData2.gradient) === null || _userData2$gradient7 === void 0 || (_userData2$gradient7 = _userData2$gradient7.gradientParams) === null || _userData2$gradient7 === void 0 ? void 0 : _userData2$gradient7.startAngle) || 0);\n              }\n            }\n            // 修改减半角度\n            else if (param === 'gradient-angle') {\n              var _userData3 = this.currentElement.children.find(function (x) {\n                return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this4.currentElement.name];\n              }).userData;\n              var _colorType2 = _userData3.colorType;\n              if (_colorType2 === 'Linear') {\n                var _colorStops2 = this.sliderTool.getAllPoints().map(function (x) {\n                  return {\n                    position: x.value,\n                    color: x.color\n                  };\n                });\n                var _this$currentElement$3 = this.currentElement.getBounds(),\n                  _width = _this$currentElement$3.width,\n                  _height = _this$currentElement$3.height;\n                var centerX = _width / 2;\n                var centerY = _height / 2;\n                var diagonal = Math.sqrt(_width * _width + _height * _height);\n                var angle = (value % 360 + 360) % 360; // 标准化角度（0-360°）\n                var _radians = angle * Math.PI / 180; // 转为弧度\n\n                var x0 = centerX - Math.cos(_radians) * diagonal / 2;\n                var y0 = centerY - Math.sin(_radians) * diagonal / 2;\n                var x1 = centerX + Math.cos(_radians) * diagonal / 2;\n                var y1 = centerY + Math.sin(_radians) * diagonal / 2;\n                var _gradientParams2 = {\n                  x0: x0,\n                  y0: y0,\n                  x1: x1,\n                  y1: y1\n                };\n                this.currentElement.setGradient(true, _colorStops2, _gradientParams2);\n              } else if (_colorType2 === 'Conic') {\n                var gradient = _userData3.gradient;\n                var normalizedDeg = (value % 360 + 360) % 360;\n                var startAngleRadian = normalizedDeg * Math.PI / 180;\n                gradient.gradientParams.startAngle = startAngleRadian;\n                this.currentElement.setConicGradient(gradient.colorStops, gradient.gradientParams.centerX, gradient.gradientParams.centerY, gradient.gradientParams.startAngle);\n              }\n              that.editor.render();\n            }\n            // 对齐方式\n            else if (param === 'text-align') {\n              this.textAlign = value;\n              this.currentElement.setTextAlign(value);\n            } else if (param === 'letter-spacing-slider') {\n              this.currentElement.setLetterSpacing(value);\n            } else if (param === 'line-height-slider') {\n              this.currentElement.setLineHeight(value);\n            } else if (param === 'shadow-angle') {\n              this.currentElement.setShadow({\n                angle: value\n              });\n            } else if (param === 'distance-slider') {\n              this.form.shadowDistanceVal = value;\n              this.currentElement.setShadow({\n                blur: value\n              });\n            }\n            that.editor.render();\n          },\n          // 创建元素或弹出创建框\n          handleCreateClick: function handleCreateClick(elementType) {\n            switch (elementType) {\n              case 'Shape':\n                this.form.gradientTypeVal = 'Solid';\n                var resShapeElement = that.editor.elementFactory.addShape(that.editor.stageSize.width / 2, that.editor.stageSize.height / 2, 150, 80, \"#cccccc\", 1, 0, 'rect', 0);\n                that.setCurrentElement(resShapeElement);\n                break;\n              case 'Text':\n                var resTextElement = that.editor.elementFactory.addText(undefined, that.editor.stageSize.width / 2, that.editor.stageSize.height / 2, 24, '#ffffff', 0.5, {\n                  enabled: true,\n                  color: '#000000',\n                  blur: 0,\n                  angle: 0,\n                  alpha: 0\n                }, 'transparent', 0, 8, 0);\n                that.setCurrentElement(resTextElement);\n                break;\n              case 'Parts':\n                this.handleChangeTarget('create-parts');\n                break;\n              case 'Image':\n                this.handleChangeTarget('create-image');\n                break;\n              case 'Icon':\n                this.handleChangeTarget('create-icon');\n                this.iconList = JSON.parse(JSON.stringify(_config_js__WEBPACK_IMPORTED_MODULE_0__.svgs));\n                this.searchIconVal = '';\n                break;\n            }\n          },\n          handleClose: function handleClose() {\n            that.setCurrentElement(null);\n            this.handleChangeTarget('page');\n          },\n          updateAttribute: function updateAttribute() {\n            if (!this.currentElement) return;\n            if (this.attributeList.filter(function (x) {\n              return x.type === 'bounds-setting';\n            }).length > 0) {\n              this.form.widthVal = Math.round(this.currentElement.width);\n              this.form.heightVal = Math.round(this.currentElement.height);\n            }\n            if (this.attributeList.filter(function (x) {\n              return x.type === 'angle-slider';\n            }).length > 0) {\n              this.form.angleVal = Math.round(this.currentElement.rotation * 180 / Math.PI);\n            }\n          },\n          destroyJscolorInstance: function destroyJscolorInstance() {\n            var colorPicker = document.getElementById('colorPicker');\n            if (!colorPicker) return;\n            if (colorPicker.jscolor) {\n              colorPicker.jscolor.onInput = null;\n              colorPicker.jscolor.onChange = null;\n              colorPicker.jscolor = null;\n            }\n            var events = ['click', 'mousedown', 'input', 'blur', 'touchstart', 'touchend'];\n            events.forEach(function (event) {\n              var clone = colorPicker.cloneNode(true);\n              while (colorPicker.firstChild) {\n                clone.appendChild(colorPicker.firstChild);\n              }\n              colorPicker.replaceWith(clone);\n            });\n            colorPicker.removeAttribute('data-jscolor');\n            colorPicker.removeAttribute('data-jscolor-id');\n            if (window.jscolor) {\n              window.jscolor.defaultOptions = {};\n            }\n          },\n          handleSearchIcon: function handleSearchIcon() {\n            var _this5 = this;\n            this.iconList = _config_js__WEBPACK_IMPORTED_MODULE_0__.svgs.filter(function (x) {\n              return x.name.toLowerCase().includes(_this5.searchIconVal);\n            });\n          },\n          handleSearchSetting: function handleSearchSetting() {\n            var _this6 = this;\n            this.boxSettingData = this.boxSettingLock.filter(function (x) {\n              return x.name.toLowerCase().includes(_this6.searchSettingVal);\n            });\n          },\n          handleChangeLinkScale: function handleChangeLinkScale(isLink) {\n            this.linkScale = isLink;\n            if (this.currentElement.name === 'shape-container') {\n              this.links.shapeLinkScale = isLink;\n            } else if (this.currentElement.name === 'icon-container') {\n              this.links.iconLinkScale = isLink;\n            }\n          },\n          handleChangeEdit: function handleChangeEdit(val, item) {\n            this.isEditData = val;\n            if (!val) {\n              this.handleScrollToEl();\n            }\n            if (item) {\n              this.editRowData = _objectSpread(_objectSpread({}, item), {}, {\n                curUnit: item.unit\n              });\n            }\n          },\n          handleSaveEdit: function handleSaveEdit() {\n            var _this7 = this;\n            var formData = new FormData();\n            formData.append('token', 'LOGIN:263cc240d97f0f4a5273848436ebe2f4');\n            formData.append('type', 'Live');\n            formData.append('unit', this.editRowData.curUnit);\n            formData.append('dataName', this.editRowData.name);\n            formData.append('minValue', this.editRowData.minValue);\n            formData.append('maxValue', this.editRowData.maxValue);\n            axios.post(\"\".concat(_config_js__WEBPACK_IMPORTED_MODULE_0__.apiUrl, \"/userdataset/add\"), formData).then(function (response) {\n              if (response.data.data && response.data.data.unit) {\n                _this7.getData(function () {\n                  var box = that.editor.stage.children.filter(function (x) {\n                    return x.label === 'box-container';\n                  });\n                  var _loop = function _loop(i) {\n                    var _loop2 = function _loop2(k) {\n                      if (box[i].children[k].userData && box[i].children[k].userData.groupDataKey === _this7.editRowData.name) {\n                        if (box[i].children[k].userData.groupDataType === 'unit') {\n                          box[i].children[k].children.find(function (a) {\n                            return a.label === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[box[i].children[k].label];\n                          }).text = response.data.data.unit;\n                        }\n                      }\n                    };\n                    for (var k = 0; k < box[i].children.length; k++) {\n                      _loop2(k);\n                    }\n                  };\n                  for (var i = 0; i < box.length; i++) {\n                    _loop(i);\n                  }\n                  that.editor.render();\n                });\n                _this7.handleChangeEdit(false);\n              }\n            })[\"catch\"](function (error) {\n              console.error('fail：', error);\n              vant.showDialog({\n                title: 'Network request failed.',\n                message: 'Please try again later.',\n                'confirm-button-text': 'Cancel'\n              });\n            });\n          },\n          handleChangeShowText: function handleChangeShowText(isChangeText) {\n            var _this8 = this;\n            this.isChangeText = isChangeText;\n            if (isChangeText) {\n              this.textVal = '';\n              setTimeout(function () {\n                _this8.textVal = _this8.currentElement.children.find(function (x) {\n                  return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this8.currentElement.name];\n                }).text;\n                _this8.$refs['text-input-ref'].focus();\n              }, 50);\n            } else {\n              this.handleInit();\n            }\n          },\n          getAngleFromGradient: function getAngleFromGradient(gradient) {\n            if (!(gradient !== null && gradient !== void 0 && gradient.isLinear)) return 0;\n            var _gradient$gradientPar = gradient.gradientParams,\n              _gradient$gradientPar2 = _gradient$gradientPar.x0,\n              x0 = _gradient$gradientPar2 === void 0 ? 0 : _gradient$gradientPar2,\n              _gradient$gradientPar3 = _gradient$gradientPar.y0,\n              y0 = _gradient$gradientPar3 === void 0 ? 0 : _gradient$gradientPar3,\n              _gradient$gradientPar4 = _gradient$gradientPar.x1,\n              x1 = _gradient$gradientPar4 === void 0 ? 0 : _gradient$gradientPar4,\n              _gradient$gradientPar5 = _gradient$gradientPar.y1,\n              y1 = _gradient$gradientPar5 === void 0 ? 0 : _gradient$gradientPar5;\n            var dx = x1 - x0,\n              dy = y1 - y0;\n            return dx || dy ? Math.round((Math.atan2(-dy, dx) * 180 / Math.PI + 360) % 360) : 0;\n          },\n          getConicAngleFromGradient: function getConicAngleFromGradient(startAngleRadian) {\n            var deg = startAngleRadian * (180 / Math.PI);\n            deg = (deg % 360 + 360) % 360;\n            return Math.round(deg);\n          },\n          removeElementsByNames: function removeElementsByNames(container, names) {\n            for (var i = container.children.length - 1; i >= 0; i--) {\n              var child = container.children[i];\n              if (child.children && child.children.length > 0) {\n                this.removeElementsByNames(child, names);\n              }\n              if (names.includes(child.name)) {\n                container.removeChild(child);\n                child.destroy({\n                  children: true,\n                  texture: true,\n                  baseTexture: true\n                });\n              }\n            }\n          },\n          handleScrollToEl: function handleScrollToEl() {\n            var _this9 = this;\n            if (this.boxSettingList[this.boxSettingIndex] && this.boxSettingList[this.boxSettingIndex].length > 0) {\n              setTimeout(function () {\n                var _this9$boxSettingList;\n                var groupDataKey = (_this9$boxSettingList = _this9.boxSettingList[_this9.boxSettingIndex]) === null || _this9$boxSettingList === void 0 || (_this9$boxSettingList = _this9$boxSettingList[0]) === null || _this9$boxSettingList === void 0 ? void 0 : _this9$boxSettingList.groupDataKey;\n                if (groupDataKey) {\n                  var _document$querySelect;\n                  document.querySelector('.form-setting .setting-select-list').scrollTop = ((_document$querySelect = document.querySelector(\".setting-list-item[data-key='\".concat(groupDataKey, \"']\"))) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.offsetTop) || 0;\n                }\n              }, 50);\n            }\n          },\n          handleChangeSettingIndex: function handleChangeSettingIndex(index) {\n            this.boxSettingIndex = index;\n            this.handleScrollToEl();\n          },\n          handleSelectSetting: function handleSelectSetting(item) {\n            for (var i = 0; i < this.boxSettingList[this.boxSettingIndex].length; i++) {\n              this.boxSettingList[this.boxSettingIndex][i].groupDataKey = item.name;\n              this.boxSettingList[this.boxSettingIndex][i].container.userData.groupDataKey = item.name;\n              switch (this.boxSettingList[this.boxSettingIndex][i].container.userData.groupDataType) {\n                case 'value':\n                  this.boxSettingList[this.boxSettingIndex][i].target.text = item.value;\n                  break;\n                case 'unit':\n                  this.boxSettingList[this.boxSettingIndex][i].target.text = item.unit;\n                  break;\n                case 'name':\n                  this.boxSettingList[this.boxSettingIndex][i].target.text = item.abbreviation;\n                  break;\n                case 'icon':\n                  if (_config_js__WEBPACK_IMPORTED_MODULE_0__.iconKeyMap[item.unit]) {\n                    var svgUrl = './css/svg/' + _config_js__WEBPACK_IMPORTED_MODULE_0__.iconKeyMap[item.unit];\n                    console.log(this.boxSettingList[this.boxSettingIndex][i].target);\n                    // this.boxSettingList[this.boxSettingIndex][i].target.parent.changeSvg(svgUrl);\n                  }\n                  break;\n              }\n            }\n            that.editor.render();\n          },\n          handleSave: function handleSave() {\n            var _that$editor$stage$ch,\n              _this0 = this;\n            var data = [];\n            var eleList = ((_that$editor$stage$ch = that.editor.stage.children) === null || _that$editor$stage$ch === void 0 ? void 0 : _that$editor$stage$ch.filter(function (x) {\n              return _this0.types.includes(x.label);\n            })) || [];\n            var _loop3 = function _loop3() {\n              if (eleList[i].label === 'box-container') {\n                var childs = eleList[i].children.filter(function (x) {\n                  var _x$userData2;\n                  return x.userData && ((_x$userData2 = x.userData) === null || _x$userData2 === void 0 ? void 0 : _x$userData2.groupDataKey);\n                });\n                if (childs.length > 0) {\n                  var _eleList$i$userData, _eleList$i$userData2, _eleList$i$userData3;\n                  var temp = {\n                    type: 'part',\n                    partId: (_eleList$i$userData = eleList[i].userData) === null || _eleList$i$userData === void 0 ? void 0 : _eleList$i$userData.partId,\n                    tempId: (_eleList$i$userData2 = eleList[i].userData) === null || _eleList$i$userData2 === void 0 ? void 0 : _eleList$i$userData2.tempId,\n                    sortId: (_eleList$i$userData3 = eleList[i].userData) === null || _eleList$i$userData3 === void 0 ? void 0 : _eleList$i$userData3.sortId,\n                    data: []\n                  };\n                  childs.map(function (x) {\n                    temp.data.push({\n                      type: _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[x.label],\n                      groupDataKey: x.userData.groupDataKey,\n                      groupDataType: x.userData.groupDataType,\n                      groupDataIndex: x.userData.groupDataIndex,\n                      value: x.label === 'text-container' ? x.children.find(function (y) {\n                        return y.label === 'text';\n                      }).text : ''\n                    });\n                  });\n                  data.push(temp);\n                }\n              } else {}\n            };\n            for (var i = 0; i < eleList.length; i++) {\n              _loop3();\n            }\n            var loading = vant.showLoadingToast({\n              duration: 0,\n              mask: true,\n              forbidClick: true,\n              loadingType: 'circular',\n              position: 'middle',\n              className: 'data-loading'\n            });\n            that.editor.generateCenterImage({\n              filename: 'my-stage.png',\n              onFileReady: function () {\n                var _onFileReady = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(file) {\n                  var formData;\n                  return _regenerator().w(function (_context) {\n                    while (1) switch (_context.n) {\n                      case 0:\n                        try {\n                          formData = new FormData();\n                          formData.append('token', 'LOGIN:263cc240d97f0f4a5273848436ebe2f4');\n                          formData.append('id', _this0.tempId);\n                          formData.append('params', JSON.stringify(data));\n                          formData.append('file', file);\n                          axios.post(\"\".concat(_config_js__WEBPACK_IMPORTED_MODULE_0__.apiUrl, \"/userdashboard/edituserdashboard\"), formData, {\n                            headers: {\n                              'Content-Type': 'multipart/form-data'\n                            }\n                          }).then(function (response) {\n                            console.log(response.data);\n                            vant.showSuccessToast('Template edit successfully!');\n                          })[\"finally\"](function () {\n                            loading.close();\n                          });\n                        } catch (error) {\n                          console.error('上传失败：', error);\n                        }\n                      case 1:\n                        return _context.a(2);\n                    }\n                  }, _callee);\n                }));\n                function onFileReady(_x) {\n                  return _onFileReady.apply(this, arguments);\n                }\n                return onFileReady;\n              }()\n            });\n          },\n          getData: function getData(callback) {\n            var _this1 = this;\n            var loading = vant.showLoadingToast({\n              duration: 0,\n              mask: true,\n              forbidClick: true,\n              loadingType: 'circular',\n              position: 'middle',\n              className: 'data-loading'\n            });\n            var formData = new FormData();\n            formData.append('token', 'LOGIN:263cc240d97f0f4a5273848436ebe2f4');\n            axios.post(\"\".concat(_config_js__WEBPACK_IMPORTED_MODULE_0__.apiUrl, \"/livedata/getlivedatainfolist\"), formData).then(function (response) {\n              var _response$data3, _response$data4;\n              _this1.boxSettingData = JSON.parse(JSON.stringify((response === null || response === void 0 || (_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : _response$data3.data) || []));\n              _this1.boxSettingLock = JSON.parse(JSON.stringify((response === null || response === void 0 || (_response$data4 = response.data) === null || _response$data4 === void 0 ? void 0 : _response$data4.data) || []));\n              _this1.updateData();\n              callback && callback();\n            })[\"catch\"](function (error) {\n              console.error('fail：', error);\n              vant.showDialog({\n                title: 'Network request failed.',\n                message: 'Please try again later.',\n                'confirm-button-text': 'Cancel'\n              });\n            })[\"finally\"](function () {\n              loading.close();\n            });\n          },\n          updateData: function updateData() {\n            var _this10 = this;\n            for (var i = 0; i < this.partList.length; i++) {\n              for (var j = 0; j < this.partList[i].children.length; j++) {\n                for (var k = 0; k < this.partList[i].children[j].list.length; k++) {\n                  var item = this.partList[i].children[j].list[k];\n                  item.data.texts.forEach(function (x) {\n                    if (_this10.boxSettingData.find(function (y) {\n                      return y.name === x.groupDataKey;\n                    })) {\n                      var temp = _this10.boxSettingData.find(function (y) {\n                        return y.name === x.groupDataKey;\n                      });\n                      switch (x.groupDataType) {\n                        case 'value':\n                          x.content = temp.value;\n                          break;\n                        case 'unit':\n                          x.content = temp.unit;\n                          break;\n                        case 'name':\n                          x.content = temp.abbreviation;\n                          break;\n                      }\n                    }\n                  });\n                  item.data.icons.forEach(function (x) {\n                    if (_this10.boxSettingData.find(function (y) {\n                      return y.name === x.groupDataKey;\n                    })) {\n                      var temp = _this10.boxSettingData.find(function (y) {\n                        return y.name === x.groupDataKey;\n                      });\n                      if (_config_js__WEBPACK_IMPORTED_MODULE_0__.iconKeyMap[temp.unit]) {\n                        temp.icon = './css/svg/' + _config_js__WEBPACK_IMPORTED_MODULE_0__.iconKeyMap[temp.unit];\n                        switch (x.groupDataType) {\n                          case 'icon':\n                            x.url = temp.icon;\n                            break;\n                        }\n                      }\n                    }\n                  });\n                }\n              }\n            }\n          },\n          handleClosePage: function handleClosePage() {\n            if (window.FlutterBridge) {\n              window.FlutterBridge.postMessage('cancel');\n            }\n          }\n        },\n        mounted: function mounted() {\n          var _this11 = this;\n          that.vueInstance = this;\n          this.currentElement = that.currentElement;\n          this.tempId = 1;\n          this.getData(function () {\n            if (_this11.tempId > 0) {\n              _this11.handleAddPart(_this11.partList[0].children.find(function (x) {\n                return x.tempId === _this11.tempId;\n              }));\n            }\n          });\n          window.setAppData = function (params) {\n            var _this12 = this;\n            console.log(params.curVehicleId);\n            console.log(params.token);\n            console.log(params.tempId);\n            this.tempId = params.tempId || 0;\n            this.getData(function () {\n              if (_this12.tempId > 0) {\n                _this12.handleAddPart(_this12.partList[0].children.find(function (x) {\n                  return x.tempId === _this12.tempId;\n                }));\n              }\n            });\n          };\n          if (window.FlutterBridge) {\n            window.FlutterBridge.postMessage('ready');\n          }\n        }\n      });\n      app.use(vant);\n      app.use(vant.Lazyload);\n      app.mount('#app');\n    }\n  }]);\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Control);\n\n//# sourceURL=webpack://screen-edit/./js/Control.js?\n}");

/***/ }),

/***/ "./js/Editor.js":
/*!**********************!*\
  !*** ./js/Editor.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _ElementFactory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ElementFactory.js */ \"./js/ElementFactory.js\");\n/* harmony import */ var _ElementManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ElementManager.js */ \"./js/ElementManager.js\");\n/* harmony import */ var _StageManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StageManager.js */ \"./js/StageManager.js\");\n/* harmony import */ var _Control_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Control.js */ \"./js/Control.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\nvar Editor = /*#__PURE__*/function () {\n  function Editor() {\n    var _this = this;\n    _classCallCheck(this, Editor);\n    this.canvas = null;\n    this.renderer = null;\n    this.stage = new PIXI.Container();\n    this.size = {\n      width: 800,\n      height: 480\n    };\n    this.canvasSize = {\n      width: 0,\n      height: 0\n    };\n    this.stageSize = {\n      width: 50000,\n      height: 50000\n    };\n    this.dpr = window.devicePixelRatio || 1;\n    this.control = new _Control_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this);\n    this.stageManager = new _StageManager_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this);\n    this.elementManager = new _ElementManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this);\n    this.elementFactory = new _ElementFactory_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this);\n    this.init();\n    window.addEventListener('resize', function () {\n      return _this.handleResize();\n    });\n  }\n  return _createClass(Editor, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              this.initCanvas();\n              _context.n = 1;\n              return this.initRenderer();\n            case 1:\n              this.setupEvents();\n              if (this.stageManager) {\n                _context.n = 2;\n                break;\n              }\n              console.error(\"Editor 初始化错误：stageManager 未创建\");\n              return _context.a(2);\n            case 2:\n              this.drawBg();\n              this.drawMaxArea();\n              this.render();\n            case 3:\n              return _context.a(2);\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"initCanvas\",\n    value: function initCanvas() {\n      this.canvas = document.getElementById(\"editCanvas\");\n      if (!this.canvas) {\n        throw new Error(\"未找到 ID 为 'editCanvas' 的 Canvas 元素\");\n      }\n      var controlElement = document.getElementById(\"control\");\n      var controlHeight = controlElement ? controlElement.offsetHeight : 0;\n      var stepElement = document.getElementById(\"step\");\n      var stepHeight = stepElement ? stepElement.offsetHeight : 0;\n      var pageWidth = document.documentElement.clientWidth;\n      var pageHeight = document.documentElement.clientHeight - controlHeight - stepHeight;\n      var pageTop = 0 + stepHeight;\n      this.canvasSize.width = pageWidth;\n      this.canvasSize.height = pageHeight;\n      this.canvas.width = pageWidth * this.dpr;\n      this.canvas.height = pageHeight * this.dpr;\n      this.canvas.style.width = \"\".concat(pageWidth, \"px\");\n      this.canvas.style.height = \"\".concat(pageHeight, \"px\");\n      this.canvas.style.border = \"none\";\n      this.canvas.style.position = \"fixed\";\n      this.canvas.style.top = \"\".concat(pageTop, \"px\");\n      this.canvas.style.left = \"0\";\n      this.canvas.style.zIndex = \"1\";\n    }\n  }, {\n    key: \"handleResize\",\n    value: function handleResize() {\n      var _this2 = this;\n      var needCenter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      setTimeout(function () {\n        // 重新设置Canvas尺寸\n        _this2.initCanvas();\n        // 更新渲染器尺寸（使用计算后的 canvasSize 高度）\n        if (_this2.renderer) {\n          _this2.renderer.resize(_this2.canvasSize.width, _this2.canvasSize.height);\n        }\n        // 重新绘制展示区域\n        if (_this2.maxAreaGraphics) {\n          _this2.stage.removeChild(_this2.maxAreaGraphics);\n        }\n        _this2.drawMaxArea();\n        _this2.render();\n        needCenter && _this2.stageManager.initCenterPosition();\n      }, 0);\n    }\n  }, {\n    key: \"initRenderer\",\n    value: function () {\n      var _initRenderer = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.n) {\n            case 0:\n              _context2.n = 1;\n              return PIXI.autoDetectRenderer({\n                view: this.canvas,\n                width: this.canvasSize.width,\n                height: this.canvasSize.height,\n                backgroundColor: 0xffffff,\n                antialias: true,\n                resolution: this.dpr,\n                autoDensity: true,\n                forceWebGLVersion: 2\n              });\n            case 1:\n              this.renderer = _context2.v;\n              this.stage.scale.set(1);\n            case 2:\n              return _context2.a(2);\n          }\n        }, _callee2, this);\n      }));\n      function initRenderer() {\n        return _initRenderer.apply(this, arguments);\n      }\n      return initRenderer;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.renderer && this.stage) {\n        this.renderer.render(this.stage);\n      }\n    }\n  }, {\n    key: \"setupEvents\",\n    value: function setupEvents() {\n      var _this3 = this;\n      this.stage.interactive = true;\n      this.stage.interactiveChildren = true;\n      this.stage.pointerEvents = 'auto';\n      this.stage.hitArea = new PIXI.Rectangle(0, 0, this.stageSize.width, this.stageSize.height);\n      var canvas = this.canvas;\n      this.stage.on(\"pointerdown\", function (e) {\n        return _this3.elementManager.selectComponent(null);\n      });\n      this.stage.on(\"pointermove\", function (e) {\n        return _this3.elementManager.handlePointerMove(e);\n      });\n      this.stage.on(\"pointerup\", function (e) {\n        return _this3.elementManager.handlePointerUp(e);\n      });\n      this.stage.on(\"pointerupoutside\", function (e) {\n        return _this3.elementManager.handlePointerUp(e);\n      });\n      this.canvas.addEventListener('wheel', function (e) {\n        e.preventDefault();\n        var rect = _this3.canvas.getBoundingClientRect();\n        // 鼠标在Canvas中的相对坐标（CSS像素）\n        var mouseX = e.clientX - rect.left;\n        var mouseY = e.clientY - rect.top;\n        var delta = e.deltaY < 0 ? 0.1 : -0.1; // 上滚放大，下滚缩小\n        _this3.stageManager.handleWheelZoom(delta, mouseX, mouseY);\n      }, {\n        passive: false\n      });\n\n      // 原生触摸事件（只处理舞台拖动和舞台双指缩放）\n      canvas.addEventListener('touchstart', function (e) {\n        e.preventDefault();\n        var touches = Array.from(e.touches);\n        var formattedTouches = touches.map(function (touch) {\n          var rect = canvas.getBoundingClientRect();\n          var canvasX = (touch.clientX - rect.left) * (canvas.width / rect.width) / _this3.dpr;\n          var canvasY = (touch.clientY - rect.top) * (canvas.height / rect.height) / _this3.dpr;\n          return {\n            identifier: touch.identifier,\n            global: {\n              x: canvasX,\n              y: canvasY\n            }\n          };\n        });\n        _this3.stageManager.handleNativeTouchStart(formattedTouches);\n      }, {\n        passive: false\n      });\n\n      // 舞台拖动或舞台双指缩放\n      canvas.addEventListener('touchmove', function (e) {\n        e.preventDefault();\n        var touches = Array.from(e.touches);\n        var formattedTouches = touches.map(function (touch) {\n          var rect = canvas.getBoundingClientRect();\n          var canvasX = (touch.clientX - rect.left) * (canvas.width / rect.width) / _this3.dpr;\n          var canvasY = (touch.clientY - rect.top) * (canvas.height / rect.height) / _this3.dpr;\n          return {\n            identifier: touch.identifier,\n            global: {\n              x: canvasX,\n              y: canvasY\n            }\n          };\n        });\n        _this3.stageManager.handleNativeTouchMove(formattedTouches);\n      }, {\n        passive: false\n      });\n\n      // 结束舞台拖动或舞台双指缩放\n      canvas.addEventListener('touchend', function (e) {\n        var changedTouches = Array.from(e.changedTouches);\n        var formattedTouches = changedTouches.map(function (touch) {\n          return {\n            identifier: touch.identifier\n          };\n        });\n        _this3.stageManager.handleNativeTouchEnd(formattedTouches);\n      });\n\n      // 兼容PC\n      canvas.addEventListener('mousedown', function (e) {\n        e.preventDefault();\n        var touches = Array.from(e.touches || [e]);\n        var formattedTouches = touches.map(function (touch) {\n          var rect = canvas.getBoundingClientRect();\n          var canvasX = (touch.clientX - rect.left) * (canvas.width / rect.width) / _this3.dpr;\n          var canvasY = (touch.clientY - rect.top) * (canvas.height / rect.height) / _this3.dpr;\n          return {\n            identifier: touch.identifier,\n            global: {\n              x: canvasX,\n              y: canvasY\n            }\n          };\n        });\n        _this3.stageManager.handleNativeTouchStart(formattedTouches);\n      }, {\n        passive: false\n      });\n    }\n\n    // 修复：组件范围检测基于固定像素尺寸，与舞台坐标正确比对\n  }, {\n    key: \"getTouchTarget\",\n    value: function getTouchTarget(canvasX, canvasY) {\n      var scale = this.stageManager.scale || 1;\n      var offsetX = this.stageManager.offsetX || 0;\n      var offsetY = this.stageManager.offsetY || 0;\n      var stageX = (canvasX - offsetX) / scale;\n      var stageY = (canvasY - offsetY) / scale;\n      var _iterator = _createForOfIteratorHelper(this.stage.children),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var child = _step.value;\n          if (['shape-container', 'text-container', 'box-container'].includes(child.name)) {\n            // 组件尺寸为固定像素（创建时的width/height），不随舞台缩放变化\n            var compWidth = child.width || 0;\n            var compHeight = child.height || 0;\n            var halfW = compWidth / 2;\n            var halfH = compHeight / 2;\n            // 组件中心在舞台坐标系中的位置（child.x/child.y 是舞台坐标）\n            var minX = child.x - halfW;\n            var maxX = child.x + halfW;\n            var minY = child.y - halfH;\n            var maxY = child.y + halfH;\n            if (stageX >= minX && stageX <= maxX && stageY >= minY && stageY <= maxY) {\n              return child;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return this.stage;\n    }\n  }, {\n    key: \"drawMaxArea\",\n    value: function drawMaxArea() {\n      if (this.maxAreaGraphics) {\n        this.stage.removeChild(this.maxAreaGraphics);\n      }\n      this.maxAreaGraphics = new PIXI.Graphics();\n      var centerX = this.stageSize.width / 2;\n      var centerY = this.stageSize.height / 2;\n      var areaWidth = this.size.width;\n      var areaHeight = this.size.height;\n      var x = centerX - areaWidth / 2;\n      var y = centerY - areaHeight / 2;\n      this.maxAreaGraphics.beginFill(0x0a0a0c, 1);\n      this.maxAreaGraphics.lineStyle(1, '#323134');\n      this.maxAreaGraphics.drawRect(x, y, areaWidth, areaHeight);\n      this.maxAreaGraphics.endFill();\n      this.stage.addChildAt(this.maxAreaGraphics, 1);\n    }\n  }, {\n    key: \"drawBg\",\n    value: function drawBg() {\n      var background = new PIXI.Graphics();\n      background.beginFill('#EAEEF4').drawRect(0, 0, this.stageSize.width, this.stageSize.height).endFill();\n      this.stage.addChildAt(background, 0);\n      this.render();\n    }\n  }, {\n    key: \"generateCenterImage\",\n    value: function () {\n      var _generateCenterImage = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {\n        var options,\n          _options$filename,\n          filename,\n          _options$quality,\n          quality,\n          _options$returnData,\n          returnData,\n          onFileReady,\n          targetWidth,\n          targetHeight,\n          stageManager,\n          originalScale,\n          originalOffsetX,\n          originalOffsetY,\n          renderTexture,\n          imageCanvas,\n          targetCanvas,\n          targetCtx,\n          dataUrl,\n          file,\n          link,\n          _args3 = arguments,\n          _t;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.p = _context3.n) {\n            case 0:\n              options = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : {};\n              _options$filename = options.filename, filename = _options$filename === void 0 ? 'stage-center.png' : _options$filename, _options$quality = options.quality, quality = _options$quality === void 0 ? 1.0 : _options$quality, _options$returnData = options.returnData, returnData = _options$returnData === void 0 ? false : _options$returnData, onFileReady = options.onFileReady;\n              if (!(!this.renderer || !this.stage || !this.stageManager || !this.maxAreaGraphics)) {\n                _context3.n = 1;\n                break;\n              }\n              console.error('生成图片失败：依赖未初始化');\n              return _context3.a(2, null);\n            case 1:\n              targetWidth = this.size.width;\n              targetHeight = this.size.height;\n              stageManager = this.stageManager;\n              originalScale = stageManager.scale;\n              originalOffsetX = stageManager.offsetX;\n              originalOffsetY = stageManager.offsetY;\n              renderTexture = null;\n              _context3.p = 2;\n              stageManager.scale = 1;\n              stageManager.initCenterPosition();\n              stageManager.offsetX += (800 - window.innerWidth) / 2;\n              stageManager.offsetY += (480 - window.innerHeight) / 2 + 56 / 2;\n              stageManager.applyStageTransform();\n              renderTexture = PIXI.RenderTexture.create({\n                width: targetWidth,\n                height: targetHeight,\n                resolution: this.dpr,\n                scaleMode: PIXI.SCALE_MODES.LINEAR,\n                antialias: true\n              });\n              this.renderer.render({\n                container: this.stage,\n                target: renderTexture,\n                clear: true\n              });\n\n              // 生成 dataUrl\n              imageCanvas = this.renderer.extract.canvas(renderTexture);\n              targetCanvas = document.createElement('canvas');\n              targetCanvas.width = targetWidth;\n              targetCanvas.height = targetHeight;\n              targetCtx = targetCanvas.getContext('2d');\n              targetCtx.fillStyle = '#0a0a0c';\n              targetCtx.fillRect(0, 0, targetWidth, targetHeight);\n              targetCtx.drawImage(imageCanvas, 0, 0, targetWidth, targetHeight);\n              dataUrl = targetCanvas.toDataURL('image/png', quality); // dataUrl 转 File 对象\n              _context3.n = 3;\n              return this.dataUrlToFile(dataUrl, filename);\n            case 3:\n              file = _context3.v;\n              // 两种使用方式：下载 或 传给接口\n              if (!returnData && !onFileReady) {\n                // 原有下载逻辑\n                link = document.createElement('a');\n                link.href = dataUrl;\n                link.download = filename;\n                link.click();\n              }\n\n              // 回调返回 File 对象（供接口上传）\n              if (onFileReady && typeof onFileReady === 'function') {\n                onFileReady(file);\n              }\n              return _context3.a(2, returnData ? dataUrl : file);\n            case 4:\n              _context3.p = 4;\n              _t = _context3.v;\n              console.error('生成图片失败：', _t);\n              return _context3.a(2, null);\n            case 5:\n              _context3.p = 5;\n              // 恢复原始状态\n              stageManager.scale = originalScale;\n              stageManager.offsetX = originalOffsetX;\n              stageManager.offsetY = originalOffsetY;\n              stageManager.applyStageTransform();\n\n              // 清理资源\n              if (renderTexture) {\n                renderTexture.destroy({\n                  destroyBaseTexture: true\n                });\n              }\n              return _context3.f(5);\n            case 6:\n              return _context3.a(2);\n          }\n        }, _callee3, this, [[2, 4, 5, 6]]);\n      }));\n      function generateCenterImage() {\n        return _generateCenterImage.apply(this, arguments);\n      }\n      return generateCenterImage;\n    }() // dataUrl 转 File 对象\n  }, {\n    key: \"dataUrlToFile\",\n    value: function dataUrlToFile(dataUrl, filename) {\n      return new Promise(function (resolve) {\n        var _dataUrl$split = dataUrl.split(','),\n          _dataUrl$split2 = _slicedToArray(_dataUrl$split, 2),\n          dataPrefix = _dataUrl$split2[0],\n          base64Str = _dataUrl$split2[1];\n        var mimeType = dataPrefix.match(/:(.*?);/)[1] || 'image/png';\n        var byteCharacters = atob(base64Str);\n        var byteArrays = [];\n        for (var i = 0; i < byteCharacters.length; i++) {\n          byteArrays.push(byteCharacters.charCodeAt(i));\n        }\n        var uint8Array = new Uint8Array(byteArrays);\n        var blob = new Blob([uint8Array], {\n          type: mimeType\n        });\n        var file = new File([blob], filename, {\n          type: mimeType\n        });\n        resolve(file);\n      });\n    }\n  }]);\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Editor);\n\n//# sourceURL=webpack://screen-edit/./js/Editor.js?\n}");

/***/ }),

/***/ "./js/ElementFactory.js":
/*!******************************!*\
  !*** ./js/ElementFactory.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar ElementFactory = /*#__PURE__*/function () {\n  function ElementFactory(editor) {\n    _classCallCheck(this, ElementFactory);\n    this.editor = editor;\n  }\n  return _createClass(ElementFactory, [{\n    key: \"addShape\",\n    value: function addShape() {\n      var _this = this;\n      var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.editor.stageSize.width / 2;\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.editor.stageSize.height / 2;\n      var width = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 150;\n      var height = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 100;\n      var color = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"#0A0A0C\";\n      var alpha = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n      var rotation = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var shapeType = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : \"rect\";\n      var radius = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 0;\n      var addStage = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : true;\n      var getHitAreaByShape = function getHitAreaByShape(w, h) {\n        return new PIXI.Rectangle(-w / 2, -h / 2, w, h);\n      };\n      var compContainer = new PIXI.Container();\n      compContainer.name = \"shape-container\";\n      compContainer.x = x;\n      compContainer.y = y;\n      compContainer.rotation = rotation;\n      compContainer.interactive = true;\n      var shape = new PIXI.Graphics();\n      shape.beginFill(color, alpha);\n      shape.drawRoundedRect(-width / 2, -height / 2, width, height, radius);\n      shape.endFill();\n      shape.name = \"shape\";\n      shape.hitArea = getHitAreaByShape(width, height);\n      shape.interactive = true;\n      shape.userData = {\n        shapeType: \"rect\",\n        colorType: \"Solid\",\n        radius: radius,\n        originalWidth: width,\n        originalHeight: height\n      };\n\n      // 切换形状\n      compContainer.changeShapeType = function (newType) {\n        var _shape$fillStyle;\n        var newRadius = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var currentWidth = shape.width;\n        var currentHeight = shape.height;\n        var currentColor = (_shape$fillStyle = shape.fillStyle) === null || _shape$fillStyle === void 0 ? void 0 : _shape$fillStyle.color;\n        var currentAlpha = 1;\n        shape.clear();\n        shape.beginFill(currentColor, currentAlpha);\n        var updatedRadius = 0;\n        switch (newType) {\n          case \"rect\":\n            updatedRadius = newRadius;\n            shape.drawRoundedRect(-currentWidth / 2, -currentHeight / 2, currentWidth, currentHeight, updatedRadius);\n            shape.hitArea = getHitAreaByShape(currentWidth, currentHeight);\n            break;\n          case \"circle\":\n            updatedRadius = currentWidth / 2;\n            shape.drawCircle(0, 0, updatedRadius);\n            shape.hitArea = new PIXI.Circle(0, 0, updatedRadius);\n            break;\n          case \"triangle\":\n            shape.drawPolygon([0, -currentHeight / 2, currentWidth / 2, currentHeight / 2, -currentWidth / 2, currentHeight / 2]);\n            shape.hitArea = new PIXI.Polygon([0, -currentHeight / 2, currentWidth / 2, currentHeight / 2, -currentWidth / 2, currentHeight / 2]);\n            break;\n          default:\n            console.warn(\"\\u4E0D\\u652F\\u6301\\u7684\\u5F62\\u72B6\\u7C7B\\u578B\\uFF1A\".concat(newType));\n            return;\n        }\n        shape.endFill();\n        shape.userData.shapeType = newType;\n        shape.userData.radius = updatedRadius;\n        _this.editor.elementManager.updateSelectorSize(compContainer.selector, currentWidth, currentHeight);\n        _this.editor.elementManager.syncEditBox(compContainer.selector, compContainer);\n        _this.editor.render();\n      };\n\n      // 设置颜色\n      compContainer.setColor = function (newColor) {\n        var currentWidth = Math.round(shape.width || width);\n        var currentHeight = Math.round(shape.height || height);\n        var currentType = shape.userData.shapeType;\n        var currentRadius = shape.userData.radius || 0;\n        while (shape.children.length > 0) {\n          shape.removeChildAt(0);\n        }\n        shape.clear();\n        shape.lineStyle(0);\n        shape.userData.colorType = \"Solid\";\n        // delete shape.userData.gradient;\n\n        // 用新颜色重新绘制图形\n        shape.beginFill(newColor, alpha);\n        switch (currentType) {\n          case \"rect\":\n            shape.drawRoundedRect(-currentWidth / 2, -currentHeight / 2, currentWidth, currentHeight, currentRadius);\n            break;\n          case \"circle\":\n            // 圆形半径也取整（避免小数半径导致的绘制偏差）\n            var circleRadius = Math.round(currentRadius);\n            shape.drawCircle(0, 0, circleRadius);\n            break;\n          case \"triangle\":\n            shape.drawPolygon([0, -currentHeight / 2, currentWidth / 2, currentHeight / 2, -currentWidth / 2, currentHeight / 2]);\n            break;\n        }\n        shape.endFill();\n        shape.width = currentWidth;\n        shape.height = currentHeight;\n        compContainer.width = currentWidth;\n        compContainer.height = currentHeight;\n        _this.editor.render();\n      };\n\n      // 设置渐变\n      compContainer.setGradient = function (isLinear, colorStops, gradientParams) {\n        var currentType = shape.userData.shapeType;\n        // 关键1：宽高强制取整，杜绝小数参与\n        var currentWidth = Math.round(shape.width || 100);\n        var currentHeight = Math.round(shape.height || 100);\n        var currentRadius = shape.userData.radius || 0;\n\n        // 存储渐变数据（包含形状参数）\n        shape.userData.gradient = {\n          isLinear: isLinear,\n          colorStops: _toConsumableArray(colorStops),\n          gradientParams: _objectSpread(_objectSpread({}, gradientParams), {}, {\n            shapeType: currentType\n          }),\n          type: \"gradient\"\n        };\n\n        // 清空原有内容\n        while (shape.children.length > 0) {\n          shape.removeChildAt(0);\n        }\n        shape.clear();\n\n        // 创建与形状等大的画布（尺寸为整数）\n        var canvas = document.createElement('canvas');\n        canvas.width = currentWidth; // 整数\n        canvas.height = currentHeight; // 整数\n        var ctx = canvas.getContext('2d');\n        if (!ctx) return;\n\n        // 计算形状中心点（基于整数宽高）\n        var centerX = currentWidth / 2;\n        var centerY = currentHeight / 2;\n        var maxRadius = Math.max(currentWidth, currentHeight) / 2;\n\n        // 1. 创建渐变（逻辑不变）\n        var gradient;\n        try {\n          if (isLinear) {\n            var startX = (gradientParams.x0 || 0) - centerX;\n            var startY = (gradientParams.y0 || 0) - centerY;\n            var endX = (gradientParams.x1 || currentWidth) - centerX;\n            var endY = (gradientParams.y1 || 0) - centerY;\n            gradient = ctx.createLinearGradient(startX, startY, endX, endY);\n          } else {\n            var innerX = gradientParams.innerX || 0;\n            var innerY = gradientParams.innerY || 0;\n            var innerRadius = Math.max(0, gradientParams.innerRadius || 0);\n            var outerX = gradientParams.outerX || 0;\n            var outerY = gradientParams.outerY || 0;\n            var outerRadius = Math.min(maxRadius, gradientParams.outerRadius || maxRadius);\n            gradient = ctx.createRadialGradient(innerX, innerY, innerRadius, outerX, outerY, outerRadius);\n          }\n        } catch (e) {\n          console.error(\"创建渐变失败:\", e);\n          return;\n        }\n\n        // 2. 处理颜色节点（逻辑不变）\n        colorStops.forEach(function (stop, index) {\n          try {\n            var offset = Math.max(0, Math.min(1, Number(stop.position) / 100 || 0));\n            var colorStr;\n            var _color = stop.color;\n            if (typeof _color === 'number') {\n              var hex = _color.toString(16).padStart(_color > 0xffffff ? 8 : 6, '0');\n              var r = parseInt(hex.slice(0, 2), 16);\n              var g = parseInt(hex.slice(2, 4), 16);\n              var b = parseInt(hex.slice(4, 6), 16);\n              colorStr = hex.length === 8 ? \"rgba(\".concat(r, \", \").concat(g, \", \").concat(b, \", \").concat(parseInt(hex.slice(6, 8), 16) / 255, \")\") : \"rgb(\".concat(r, \", \").concat(g, \", \").concat(b, \")\");\n            } else if (typeof _color === 'string') {\n              colorStr = _color;\n            } else {\n              colorStr = '#888888';\n            }\n            gradient.addColorStop(offset, colorStr);\n          } catch (e) {\n            console.error(\"\\u5904\\u7406\\u7B2C\".concat(index, \"\\u4E2A\\u989C\\u8272\\u8282\\u70B9\\u5931\\u8D25:\"), e);\n          }\n        });\n\n        // 3. 绘制形状路径并裁剪（基于整数宽高）\n        ctx.save();\n        ctx.translate(centerX, centerY);\n        switch (currentType) {\n          case \"rect\":\n            ctx.beginPath();\n            ctx.roundRect(-currentWidth / 2, -currentHeight / 2, currentWidth, currentHeight, currentRadius);\n            break;\n          case \"circle\":\n            ctx.beginPath();\n            ctx.arc(0, 0, currentWidth / 2, 0, Math.PI * 2);\n            break;\n          case \"triangle\":\n            ctx.beginPath();\n            ctx.moveTo(0, -currentHeight / 2);\n            ctx.lineTo(currentWidth / 2, currentHeight / 2);\n            ctx.lineTo(-currentWidth / 2, currentHeight / 2);\n            ctx.closePath();\n            break;\n        }\n        ctx.clip();\n\n        // 4. 填充渐变（基于整数宽高）\n        ctx.fillStyle = gradient;\n        ctx.fillRect(-currentWidth / 2, -currentHeight / 2, currentWidth, currentHeight);\n        ctx.restore();\n\n        // 5. 转换为PIXI纹理并显示（精灵尺寸为整数）\n        var texture = PIXI.Texture.from(canvas);\n        var gradientSprite = new PIXI.Sprite(texture);\n        gradientSprite.anchor.set(0.5);\n        gradientSprite.width = currentWidth; // 整数，与画布一致\n        gradientSprite.height = currentHeight; // 整数，与画布一致\n\n        // 6. 重新绘制形状轮廓（基于整数宽高）\n        shape.addChild(gradientSprite);\n        shape.lineStyle(0);\n        shape.beginFill(0x000000, 0);\n        switch (currentType) {\n          case \"rect\":\n            shape.drawRoundedRect(-currentWidth / 2, -currentHeight / 2, currentWidth, currentHeight, currentRadius);\n            break;\n          case \"circle\":\n            shape.drawCircle(0, 0, currentWidth / 2);\n            break;\n          case \"triangle\":\n            shape.drawPolygon([0, -currentHeight / 2, currentWidth / 2, currentHeight / 2, -currentWidth / 2, currentHeight / 2]);\n            break;\n        }\n        shape.endFill();\n\n        // 关键2：同步更新shape自身的宽高为整数\n        shape.width = currentWidth;\n        shape.height = currentHeight;\n        _this.editor.render();\n      };\n      compContainer.setConicGradient = function (colorStops) {\n        var centerX = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var centerY = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var startAngle = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n        var currentType = shape.userData.shapeType;\n        var currentWidth = Math.max(10, Math.round(shape.width || width));\n        var currentHeight = Math.max(10, Math.round(shape.height || height));\n        var currentRadius = shape.userData.radius || 0;\n\n        // 环形特殊处理（核心修改）\n        if (currentType === \"ring\") {\n          // 从userData获取环形参数（与setOpenRoundedRing保持一致）\n          var _ref = shape.userData || {},\n            _ref$radius = _ref.radius,\n            _radius = _ref$radius === void 0 ? 100 : _ref$radius,\n            _ref$ringThickness = _ref.ringThickness,\n            ringThickness = _ref$ringThickness === void 0 ? 20 : _ref$ringThickness,\n            _ref$startAngle = _ref.startAngle,\n            _startAngle = _ref$startAngle === void 0 ? 0 : _ref$startAngle,\n            _ref$endAngle = _ref.endAngle,\n            endAngle = _ref$endAngle === void 0 ? 180 : _ref$endAngle;\n          var toRadians = function toRadians(degrees) {\n            return degrees * (Math.PI / 180);\n          };\n          var ringStartAngle = toRadians(_startAngle);\n          var ringEndAngle = toRadians(endAngle);\n\n          // 画布尺寸适配环形（完全复用setOpenRoundedRing逻辑）\n          var canvasSize = (_radius + ringThickness / 2) * 2;\n          var _canvas = document.createElement('canvas');\n          _canvas.width = canvasSize;\n          _canvas.height = canvasSize;\n          var _ctx = _canvas.getContext('2d');\n          if (!_ctx) return;\n\n          // 渐变中心（画布中心）\n          var _canvasCenterX = canvasSize / 2;\n          var _canvasCenterY = canvasSize / 2;\n\n          // 存储渐变数据\n          shape.userData.gradient = {\n            type: \"conic\",\n            colorStops: _toConsumableArray(colorStops),\n            gradientParams: {\n              centerX: centerX,\n              centerY: centerY,\n              startAngle: _startAngle\n            }\n          };\n          shape.userData.colorType = \"Conic\";\n\n          // 清空内容\n          while (shape.children.length > 0) shape.removeChildAt(0);\n          shape.clear();\n\n          // 创建锥形渐变\n          var _gradient = _ctx.createConicGradient(_startAngle, _canvasCenterX, _canvasCenterY);\n          colorStops.forEach(function (stop, index) {\n            try {\n              var offset = Math.max(0, Math.min(1, Number(stop.position) / 100 || 0));\n              var colorStr = stop.color;\n              var _alpha = stop.alpha || 1;\n              if (typeof colorStr === 'number') {\n                var hex = colorStr.toString(16).padStart(colorStr > 0xffffff ? 8 : 6, '0');\n                var r = parseInt(hex.slice(0, 2), 16);\n                var g = parseInt(hex.slice(2, 4), 16);\n                var b = parseInt(hex.slice(4, 6), 16);\n                r = Math.min(255, Math.round(r * 1.2));\n                g = Math.min(255, Math.round(g * 1.2));\n                b = Math.min(255, Math.round(b * 1.2));\n                var finalAlpha = _alpha;\n                if (hex.length === 8) {\n                  var alphaValue = parseInt(hex.slice(6, 8), 16);\n                  finalAlpha = alphaValue / 100;\n                }\n                colorStr = \"rgba(\".concat(r, \", \").concat(g, \", \").concat(b, \", \").concat(finalAlpha, \")\");\n              } else if (typeof colorStr === 'string') {\n                if (colorStr.startsWith('#')) {\n                  var _hex = colorStr.slice(1).padStart(6, '0');\n                  var _r = parseInt(_hex.slice(0, 2), 16);\n                  var _g = parseInt(_hex.slice(2, 4), 16);\n                  var _b = parseInt(_hex.slice(4, 6), 16);\n                  _r = Math.min(255, Math.round(_r * 1.2));\n                  _g = Math.min(255, Math.round(_g * 1.2));\n                  _b = Math.min(255, Math.round(_b * 1.2));\n                  var _finalAlpha = _alpha;\n                  if (_hex.length === 8) {\n                    var _alphaValue = parseInt(_hex.slice(6, 8), 16);\n                    _finalAlpha = _alphaValue / 100;\n                  }\n                  colorStr = \"rgba(\".concat(_r, \", \").concat(_g, \", \").concat(_b, \", \").concat(_finalAlpha, \")\");\n                } else if (colorStr.startsWith('rgb') || colorStr.startsWith('rgba')) {\n                  var match = colorStr.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)/);\n                  if (match) {\n                    var _r2 = parseInt(match[1]);\n                    var _g2 = parseInt(match[2]);\n                    var _b2 = parseInt(match[3]);\n                    var a = match[4] ? parseFloat(match[4]) : _alpha;\n                    _r2 = Math.min(255, Math.round(_r2 * 1.2));\n                    _g2 = Math.min(255, Math.round(_g2 * 1.2));\n                    _b2 = Math.min(255, Math.round(_b2 * 1.2));\n                    colorStr = \"rgba(\".concat(_r2, \", \").concat(_g2, \", \").concat(_b2, \", \").concat(a, \")\");\n                  }\n                }\n              }\n              _gradient.addColorStop(offset, colorStr);\n            } catch (e) {\n              console.error(\"\\u5904\\u7406\\u7B2C\".concat(index, \"\\u4E2A\\u989C\\u8272\\u8282\\u70B9\\u5931\\u8D25:\"), e);\n            }\n          });\n\n          // 复用setOpenRoundedRing的环形绘制逻辑（确保圆角正确）\n          _ctx.save();\n          _ctx.strokeStyle = _gradient; // 锥形渐变作为描边色\n          _ctx.lineWidth = ringThickness; // 环厚度=线宽\n          _ctx.lineCap = 'round'; // 端点圆角（关键）\n          _ctx.lineJoin = 'round';\n\n          // 绘制开口圆弧\n          _ctx.beginPath();\n          _ctx.arc(_canvasCenterX, _canvasCenterY, _radius, ringStartAngle, ringEndAngle);\n          _ctx.stroke();\n          _ctx.restore();\n\n          // 转换为PIXI纹理\n          var _texture = PIXI.Texture.from(_canvas);\n          var ringSprite = new PIXI.Sprite(_texture);\n          ringSprite.anchor.set(0.5);\n          ringSprite.width = canvasSize;\n          ringSprite.height = canvasSize;\n\n          // 添加到形状\n          shape.addChild(ringSprite);\n          // 保持交互区域一致\n          shape.hitArea = new PIXI.Circle(0, 0, _radius + ringThickness / 2);\n          shape.width = canvasSize;\n          shape.height = canvasSize;\n          _this.editor.render();\n          return; // 环形处理结束，不执行后续代码\n        }\n\n        // 以下为原有其他形状的锥形渐变逻辑（保持不变）\n        var canvasCenterX = currentWidth / 2;\n        var canvasCenterY = currentHeight / 2;\n        var maxOffsetX = currentWidth / 2;\n        var maxOffsetY = currentHeight / 2;\n        var safeX = Math.max(-maxOffsetX, Math.min(maxOffsetX, centerX));\n        var safeY = Math.max(-maxOffsetY, Math.min(maxOffsetY, centerY));\n        var gradientCenterX = canvasCenterX + safeX;\n        var gradientCenterY = canvasCenterY + safeY;\n        shape.userData.gradient = {\n          type: \"conic\",\n          colorStops: _toConsumableArray(colorStops),\n          gradientParams: {\n            centerX: safeX,\n            centerY: safeY,\n            startAngle: startAngle\n          }\n        };\n        shape.userData.colorType = \"Conic\";\n        while (shape.children.length > 0) shape.removeChildAt(0);\n        shape.clear();\n        var canvas = document.createElement('canvas');\n        canvas.width = currentWidth;\n        canvas.height = currentHeight;\n        var ctx = canvas.getContext('2d');\n        if (!ctx) return;\n        var gradient = ctx.createConicGradient(startAngle, gradientCenterX, gradientCenterY);\n        colorStops.forEach(function (stop, index) {\n          try {\n            var offset = Math.max(0, Math.min(1, Number(stop.position) / 100 || 0));\n            var colorStr = stop.color;\n            var _alpha2 = stop.alpha || 1;\n            if (typeof colorStr === 'number') {\n              var hex = colorStr.toString(16).padStart(colorStr > 0xffffff ? 8 : 6, '0');\n              var r = parseInt(hex.slice(0, 2), 16);\n              var g = parseInt(hex.slice(2, 4), 16);\n              var b = parseInt(hex.slice(4, 6), 16);\n              r = Math.min(255, Math.round(r * 1.2));\n              g = Math.min(255, Math.round(g * 1.2));\n              b = Math.min(255, Math.round(b * 1.2));\n              var finalAlpha = _alpha2;\n              if (hex.length === 8) {\n                var alphaValue = parseInt(hex.slice(6, 8), 16);\n                finalAlpha = alphaValue / 100;\n              }\n              colorStr = \"rgba(\".concat(r, \", \").concat(g, \", \").concat(b, \", \").concat(finalAlpha, \")\");\n            } else if (typeof colorStr === 'string') {\n              if (colorStr.startsWith('#')) {\n                var _hex2 = colorStr.slice(1).padStart(6, '0');\n                var _r3 = parseInt(_hex2.slice(0, 2), 16);\n                var _g3 = parseInt(_hex2.slice(2, 4), 16);\n                var _b3 = parseInt(_hex2.slice(4, 6), 16);\n                _r3 = Math.min(255, Math.round(_r3 * 1.2));\n                _g3 = Math.min(255, Math.round(_g3 * 1.2));\n                _b3 = Math.min(255, Math.round(_b3 * 1.2));\n                var _finalAlpha2 = _alpha2;\n                if (_hex2.length === 8) {\n                  var _alphaValue2 = parseInt(_hex2.slice(6, 8), 16);\n                  _finalAlpha2 = _alphaValue2 / 100;\n                }\n                colorStr = \"rgba(\".concat(_r3, \", \").concat(_g3, \", \").concat(_b3, \", \").concat(_finalAlpha2, \")\");\n              } else if (colorStr.startsWith('rgb') || colorStr.startsWith('rgba')) {\n                var match = colorStr.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)/);\n                if (match) {\n                  var _r4 = parseInt(match[1]);\n                  var _g4 = parseInt(match[2]);\n                  var _b4 = parseInt(match[3]);\n                  var a = match[4] ? parseFloat(match[4]) : _alpha2;\n                  _r4 = Math.min(255, Math.round(_r4 * 1.2));\n                  _g4 = Math.min(255, Math.round(_g4 * 1.2));\n                  _b4 = Math.min(255, Math.round(_b4 * 1.2));\n                  colorStr = \"rgba(\".concat(_r4, \", \").concat(_g4, \", \").concat(_b4, \", \").concat(a, \")\");\n                }\n              }\n            }\n            gradient.addColorStop(offset, colorStr);\n          } catch (e) {\n            console.error(\"\\u5904\\u7406\\u7B2C\".concat(index, \"\\u4E2A\\u989C\\u8272\\u8282\\u70B9\\u5931\\u8D25:\"), e);\n          }\n        });\n        ctx.beginPath();\n        switch (currentType) {\n          case \"rect\":\n            ctx.roundRect(0, 0, currentWidth, currentHeight, currentRadius);\n            break;\n          case \"circle\":\n            ctx.arc(canvasCenterX, canvasCenterY, currentWidth / 2, 0, Math.PI * 2);\n            break;\n          case \"triangle\":\n            ctx.moveTo(canvasCenterX, canvasCenterY - currentHeight / 2);\n            ctx.lineTo(canvasCenterX + currentWidth / 2, canvasCenterY + currentHeight / 2);\n            ctx.lineTo(canvasCenterX - currentWidth / 2, canvasCenterY + currentHeight / 2);\n            ctx.closePath();\n            break;\n        }\n        ctx.clip();\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, currentWidth, currentHeight);\n        var texture = PIXI.Texture.from(canvas);\n        var gradientSprite = new PIXI.Sprite(texture);\n        gradientSprite.anchor.set(0, 0);\n        gradientSprite.x = -currentWidth / 2;\n        gradientSprite.y = -currentHeight / 2;\n        gradientSprite.blendMode = 10;\n        shape.addChild(gradientSprite);\n        shape.lineStyle(0);\n        shape.beginFill(0x000000, 0);\n        switch (currentType) {\n          case \"rect\":\n            shape.drawRoundedRect(-currentWidth / 2, -currentHeight / 2, currentWidth, currentHeight, currentRadius);\n            break;\n          case \"circle\":\n            shape.drawCircle(0, 0, currentWidth / 2);\n            break;\n          case \"triangle\":\n            shape.drawPolygon([0, -currentHeight / 2, currentWidth / 2, currentHeight / 2, -currentWidth / 2, currentHeight / 2]);\n            break;\n        }\n        shape.endFill();\n        shape.width = currentWidth;\n        shape.height = currentHeight;\n        _this.editor.render();\n      };\n      compContainer.setOpenRoundedRing = function (ringConfig) {\n        var _ringConfig$radius = ringConfig.radius,\n          radius = _ringConfig$radius === void 0 ? 100 : _ringConfig$radius,\n          _ringConfig$ringThick = ringConfig.ringThickness,\n          ringThickness = _ringConfig$ringThick === void 0 ? 20 : _ringConfig$ringThick,\n          _ringConfig$startAngl = ringConfig.startAngle,\n          startAngle = _ringConfig$startAngl === void 0 ? 0 : _ringConfig$startAngl,\n          _ringConfig$endAngle = ringConfig.endAngle,\n          endAngle = _ringConfig$endAngle === void 0 ? 270 : _ringConfig$endAngle,\n          _ringConfig$color = ringConfig.color,\n          color = _ringConfig$color === void 0 ? \"#ffffff\" : _ringConfig$color,\n          _ringConfig$alpha = ringConfig.alpha,\n          alpha = _ringConfig$alpha === void 0 ? 1 : _ringConfig$alpha;\n        var toRadians = function toRadians(degrees) {\n          return degrees * (Math.PI / 180);\n        };\n        var startAngleRad = toRadians(startAngle);\n        var endAngleRad = toRadians(endAngle);\n\n        // 1. 画布尺寸适配环形（覆盖整个环形范围，含圆角）\n        var canvasSize = (radius + ringThickness / 2) * 2;\n        var canvas = document.createElement('canvas');\n        canvas.width = canvasSize;\n        canvas.height = canvasSize;\n        var ctx = canvas.getContext('2d');\n        if (!ctx) return;\n\n        // 画布中心（环形中心）\n        var centerX = canvasSize / 2;\n        var centerY = canvasSize / 2;\n\n        // 2. 绘制开口环形（仅用纯色）\n        ctx.save();\n        // 核心：使用纯色填充/描边，移除所有渐变逻辑\n        ctx.strokeStyle = color;\n        ctx.globalAlpha = alpha; // 应用透明度\n        ctx.lineWidth = ringThickness; // 环厚度 = 线宽\n        ctx.lineCap = 'round'; // 端点圆角（关键）\n        ctx.lineJoin = 'round';\n\n        // 绘制开口圆弧（从startAngle到endAngle，不闭合）\n        ctx.beginPath();\n        ctx.arc(centerX, centerY, radius, startAngleRad, endAngleRad);\n        ctx.stroke(); // 描边实现环形\n        ctx.restore();\n\n        // 3. 转换为PIXI纹理并显示\n        var texture = PIXI.Texture.from(canvas);\n        var ringSprite = new PIXI.Sprite(texture);\n        ringSprite.anchor.set(0.5); // 锚点居中，与环形中心对齐\n        ringSprite.width = canvasSize;\n        ringSprite.height = canvasSize;\n\n        // 清空原有内容，添加环形精灵\n        shape.clear();\n        while (shape.children.length > 0) {\n          shape.removeChildAt(0);\n        }\n        shape.addChild(ringSprite);\n\n        // 4. 更新用户数据（记录环形参数，供后续渐变使用）\n        shape.userData = {\n          shapeType: \"ring\",\n          radius: radius,\n          ringThickness: ringThickness,\n          startAngle: startAngle,\n          endAngle: endAngle,\n          color: color,\n          // 记录纯色，供参考\n          alpha: alpha\n        };\n        // 交互区域：覆盖环形及圆角范围\n        shape.hitArea = new PIXI.Circle(0, 0, radius + ringThickness / 2);\n        _this.editor.render();\n      };\n\n      // 设置圆角\n      compContainer.setRadius = function (newRadius) {\n        var _shape$fillStyle2;\n        if (shape.userData.shapeType !== \"rect\") {\n          console.warn(\"仅矩形支持修改圆角\");\n          return;\n        }\n        var currentWidth = shape.width;\n        var currentHeight = shape.height;\n        var currentColor = (_shape$fillStyle2 = shape.fillStyle) === null || _shape$fillStyle2 === void 0 ? void 0 : _shape$fillStyle2.color;\n        shape.clear();\n        shape.beginFill(currentColor, 1);\n        shape.drawRoundedRect(-currentWidth / 2, -currentHeight / 2, currentWidth, currentHeight, newRadius);\n        shape.endFill();\n        shape.userData.radius = newRadius;\n        _this.editor.render();\n      };\n      var selector = this.createSelector(width, height, 0.5, 0.5);\n      selector.userData = Object.assign(selector.userData, {\n        isInnerSelector: true,\n        target: compContainer\n      });\n      selector.visible = false;\n      compContainer.selector = selector;\n      if (addStage) {\n        compContainer.on('pointerdown', function (e) {\n          e.stopPropagation();\n          _this.editor.elementManager.selectComponent(null);\n          _this.editor.control.setCurrentElement(null);\n          _this.editor.control.handleChangeShowText(false);\n          _this.editor.elementManager.handleElementPointerDown(e, compContainer);\n          _this.editor.control.setSelectedComponent(compContainer);\n        });\n        var lastTapTime = 0;\n        compContainer.on('pointertap', function (e) {\n          var now = Date.now();\n          if (now - lastTapTime < 300) {\n            e.stopPropagation();\n            _this.editor.elementManager.selectComponent(compContainer);\n            _this.editor.control.setCurrentElement(null);\n            lastTapTime = 0;\n            setTimeout(function () {\n              _this.editor.control.setCurrentElement(compContainer);\n              _this.editor.render();\n            }, 0);\n          } else {\n            lastTapTime = now;\n          }\n        });\n      }\n      compContainer.addChild(shape);\n      if (addStage) {\n        this.editor.stage.addChild(compContainer);\n        this.editor.render();\n      }\n      return compContainer;\n    }\n\n    // 文字组件\n  }, {\n    key: \"addText\",\n    value: function addText() {\n      var _this2 = this;\n      var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"Double click to edit\";\n      var x = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.editor.stageSize.width / 2;\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.editor.stageSize.height / 2;\n      var fontSize = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 24;\n      var fill = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"#ffffff\";\n      var alignX = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n      var shadow = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {\n        enabled: true,\n        color: '#000000',\n        blur: 0,\n        angle: 0,\n        alpha: 0\n      };\n      var bgColor = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : \"transparent\";\n      var radius = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 0;\n      var bgPadding = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 4;\n      var letterSpacing = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : 0;\n      var lineHeight = arguments.length > 11 && arguments[11] !== undefined ? arguments[11] : fontSize * 1.2;\n      var addStage = arguments.length > 12 && arguments[12] !== undefined ? arguments[12] : true;\n      var textContainer = new PIXI.Container();\n      textContainer.name = \"text-container\";\n      textContainer.x = x;\n      textContainer.y = y;\n      textContainer.interactive = true;\n      var degreesToRadians = function degreesToRadians(degrees) {\n        return degrees * (Math.PI / 180);\n      };\n\n      // 初始化 userData，存储背景相关属性\n      textContainer.userData = {\n        bgColor: bgColor,\n        // 背景色\n        bgRadius: radius,\n        // 背景圆角\n        bgAlpha: 1,\n        // 背景透明度（默认不透明）\n        alignX: alignX,\n        shadow: shadow\n      };\n      var bgRect = new PIXI.Graphics();\n      bgRect.name = \"text-bg\";\n      textContainer.bgRect = bgRect;\n      var textObj = new PIXI.Text(text, {\n        fontSize: fontSize,\n        fill: fill,\n        fontFamily: \"Arial, sans-serif\",\n        letterSpacing: letterSpacing,\n        lineHeight: lineHeight,\n        dropShadow: {\n          enabled: true,\n          color: shadow.color,\n          blur: shadow.blur,\n          alpha: shadow.alpha,\n          angle: degreesToRadians(shadow.angle)\n        }\n      });\n      textObj.name = \"text\";\n      textObj.anchor.set(alignX, 0.5);\n      textObj.interactive = true;\n      var updateHitArea = function updateHitArea() {\n        // 交互区域左边界 = -锚点x * 文本宽度（确保点击区域跟随文本对齐）\n        var hitLeft = -textObj.anchor.x * textObj.width;\n        textObj.hitArea = new PIXI.Rectangle(hitLeft, -textObj.height / 2, textObj.width, textObj.height);\n      };\n      updateHitArea();\n      var updateBackground = function updateBackground() {\n        bgRect.clear();\n        var _textContainer$userDa = textContainer.userData,\n          bgColor = _textContainer$userDa.bgColor,\n          bgRadius = _textContainer$userDa.bgRadius,\n          bgAlpha = _textContainer$userDa.bgAlpha;\n        if (bgColor === \"transparent\") return;\n        var bgWidth = textObj.width + bgPadding * 2;\n        var bgHeight = textObj.height + bgPadding * 2;\n        var bgLeft = -textObj.anchor.x * textObj.width - bgPadding;\n        var bgTop = -bgHeight / 2;\n        bgRect.beginFill(bgColor, bgAlpha);\n        bgRect.drawRoundedRect(bgLeft,\n        // x：背景左边界\n        bgTop,\n        // y：背景上边界（垂直居中）\n        bgWidth,\n        // width：背景宽度\n        bgHeight,\n        // height：背景高度\n        bgRadius // radius：圆角半径\n        );\n        bgRect.endFill();\n        _this2.editor.render();\n      };\n\n      // 初始化背景\n      updateBackground();\n\n      // 修改文字颜色\n      textContainer.setColor = function (newColor) {\n        textObj.style.fill = newColor;\n        textObj.dirty = true;\n        _this2.editor.render();\n      };\n\n      // 修改文字透明度\n      textContainer.setAlpha = function (newAlpha) {\n        // 将 0~100 的输入转成 0~1，并限制范围\n        textObj.alpha = Math.max(0, Math.min(1, (Number(newAlpha) || 0) / 100));\n        _this2.editor.render();\n      };\n\n      // 修改字体大小（同步更新背景）\n      textContainer.setFontSize = function (newSize) {\n        textObj.style.fontSize = newSize;\n        textObj.dirty = true;\n        // 延迟更新以确保文字尺寸已重新计算\n        setTimeout(function () {\n          updateHitArea();\n          updateBackground(); // 字体大小变化后重新绘制背景\n          if (textContainer.selector) {\n            _this2.editor.elementManager.updateSelectorSize(textContainer.selector, textObj.width, textObj.height);\n            _this2.editor.elementManager.syncEditBox(textContainer.selector, textContainer);\n          }\n          _this2.editor.render();\n        }, 0);\n      };\n      textContainer.setTextAlign = function (newAlignX) {\n        var oldAlignX = textContainer.userData.alignX;\n        var textWidth = textObj.width;\n        textContainer.userData.alignX = newAlignX;\n        textObj.anchor.x = newAlignX;\n\n        // 公式：补偿量 = (新锚点 - 旧锚点) × 文本宽度\n        var offsetCompensation = (newAlignX - oldAlignX) * textWidth;\n        textContainer.x += offsetCompensation;\n        updateHitArea();\n        updateBackground();\n        if (textContainer.selector) {\n          _this2.editor.elementManager.updateSelectorSize(textContainer.selector, textObj.width, textObj.height);\n          _this2.editor.elementManager.syncEditBox(textContainer.selector, textContainer);\n        }\n        _this2.editor.render();\n      };\n\n      // 设置背景色（更新到 userData）\n      textContainer.setBackgroundColor = function (color) {\n        textContainer.userData.bgColor = color;\n        updateBackground();\n      };\n\n      // 设置背景圆角（更新到 userData）\n      textContainer.setBackgroundRadius = function (newRadius) {\n        textContainer.userData.bgRadius = Math.max(0, Number(newRadius) || 0); // 确保非负\n        updateBackground();\n      };\n\n      // 设置背景透明度（更新到 userData）\n      textContainer.setBackgroundAlpha = function (newAlpha) {\n        // 限制透明度在 0~1 之间\n        textContainer.userData.bgAlpha = Math.max(0, Math.min(1, (Number(newAlpha) || 0) / 100));\n        updateBackground();\n      };\n\n      // 修改字符间距\n      textContainer.setLetterSpacing = function (newSpacing) {\n        textObj.style.letterSpacing = Number(newSpacing) || 0; // 确保为数字\n        textObj.dirty = true; // 标记文本需要重绘\n        setTimeout(function () {\n          updateHitArea(); // 更新交互区域\n          updateBackground(); // 更新背景\n          if (textContainer.selector) {\n            _this2.editor.elementManager.updateSelectorSize(textContainer.selector, textObj.width, textObj.height);\n            _this2.editor.elementManager.syncEditBox(textContainer.selector, textContainer);\n          }\n          _this2.editor.render();\n        }, 0);\n      };\n\n      // 修改行高\n      textContainer.setLineHeight = function (newLineHeight) {\n        textObj.style.lineHeight = Number(newLineHeight) || fontSize * 1.2; // 默认为字体大小的1.2倍\n        textObj.dirty = true; // 标记文本需要重绘\n        setTimeout(function () {\n          updateHitArea(); // 更新交互区域\n          updateBackground(); // 更新背景\n          if (textContainer.selector) {\n            _this2.editor.elementManager.updateSelectorSize(textContainer.selector, textObj.width, textObj.height);\n            _this2.editor.elementManager.syncEditBox(textContainer.selector, textContainer);\n          }\n          _this2.editor.render();\n        }, 0);\n      };\n\n      // 修改阴影\n      textContainer.setShadow = function () {\n        var shadowOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var current = textContainer.userData.shadow;\n        var newShadow = _objectSpread(_objectSpread({}, current), shadowOptions);\n        textContainer.userData.shadow = newShadow;\n        textObj.style.dropShadow = {\n          enabled: true,\n          color: newShadow.color,\n          alpha: newShadow.alpha,\n          blur: newShadow.blur,\n          angle: degreesToRadians(newShadow.angle)\n        };\n        textObj.dirty = true;\n        textObj.style.dirty = true;\n        _this2.editor.render();\n      };\n\n      // 选择器和事件绑定\n      var selector = this.createSelector(textObj.width, textObj.height, textContainer.userData.alignX, 0.5, 8, true);\n      selector.userData = Object.assign(selector.userData, {\n        isInnerSelector: true,\n        target: textContainer\n      });\n      selector.visible = false;\n      textContainer.selector = selector;\n      if (addStage) {\n        textContainer.on('pointerdown', function (e) {\n          e.stopPropagation();\n          var currentSelected = _this2.editor.control.currentElement;\n          if (currentSelected && currentSelected !== textContainer) {\n            _this2.editor.elementManager.selectComponent(null);\n            _this2.editor.control.setCurrentElement(null);\n            _this2.editor.control.handleChangeShowText(false);\n          }\n          _this2.editor.elementManager.handleElementPointerDown(e, textContainer);\n          _this2.editor.control.setSelectedComponent(textContainer);\n        });\n        var lastTapTime = 0;\n        textContainer.on('pointertap', function (e) {\n          var now = Date.now();\n          if (now - lastTapTime < 300) {\n            // 双击\n            e.stopPropagation();\n            var currentElement = _this2.editor.control.currentElement;\n            var isInPropertyMode = currentElement === textContainer;\n            var isEditingText = textContainer.userData.isEditing || false;\n            if (isInPropertyMode && !isEditingText) {\n              textContainer.userData.isEditing = true;\n              _this2.editor.control.handleChangeShowText(true);\n            } else {\n              _this2.editor.elementManager.selectComponent(textContainer);\n              _this2.editor.control.setCurrentElement(textContainer);\n              textContainer.userData.isEditing = false;\n            }\n            lastTapTime = 0;\n            setTimeout(function () {\n              return _this2.editor.render();\n            }, 0);\n          } else {\n            _this2.editor.elementManager.selectComponent(textContainer);\n            lastTapTime = now;\n          }\n        });\n      }\n      textContainer.addChild(bgRect);\n      textContainer.addChild(textObj);\n      if (addStage) {\n        this.editor.stage.addChild(textContainer);\n        this.editor.render();\n      }\n      return textContainer;\n    }\n  }, {\n    key: \"addImage\",\n    value: function addImage(url) {\n      var _this3 = this;\n      var x = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.editor.stageSize.width / 2;\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.editor.stageSize.height / 2;\n      var width = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 200;\n      var height = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 200;\n      var alpha = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n      var rotation = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var initialColor = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n      var addStage = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : true;\n      var imageContainer = new PIXI.Container();\n      imageContainer.name = \"image-container\";\n      imageContainer.x = x;\n      imageContainer.y = y;\n      imageContainer.alpha = alpha;\n      imageContainer.rotation = rotation;\n      imageContainer.interactive = true;\n      imageContainer.scale.set(1, 1);\n      imageContainer.editor = this.editor;\n\n      // 存储原始图片数据（用于动态改色）\n      var originalImageData = null;\n      // 存储原始纹理（用于恢复原图）\n      var originalTexture = null;\n\n      // 加载指示器\n      var loadingIndicator = new PIXI.Graphics();\n      loadingIndicator.beginFill(0xcccccc);\n      loadingIndicator.drawRect(-width / 2, -height / 2, width, height);\n      loadingIndicator.endFill();\n      imageContainer.addChild(loadingIndicator);\n\n      // 选择框和交互事件（保持不变）\n      var selector = this.createSelector(width, height, 0.5, 0.5);\n      selector.userData = Object.assign(selector.userData, {\n        isInnerSelector: true,\n        target: imageContainer\n      });\n      selector.visible = false;\n      imageContainer.selector = selector;\n      imageContainer.hitArea = new PIXI.Rectangle(-width / 2, -height / 2, width, height);\n      imageContainer.buttonMode = true;\n      if (addStage) {\n        imageContainer.on('pointerdown', function (e) {\n          e.stopPropagation();\n          _this3.editor.elementManager.selectComponent(null);\n          _this3.editor.control.setCurrentElement(null);\n          _this3.editor.control.handleChangeShowText(false);\n          _this3.editor.elementManager.handleElementPointerDown(e, imageContainer);\n          _this3.editor.control.setSelectedComponent(imageContainer);\n        });\n        var lastTapTime = 0;\n        imageContainer.on('pointertap', function (e) {\n          var now = Date.now();\n          if (now - lastTapTime < 300) {\n            e.stopPropagation();\n            _this3.editor.elementManager.selectComponent(imageContainer);\n            _this3.editor.control.setCurrentElement(null);\n            lastTapTime = 0;\n            setTimeout(function () {\n              _this3.editor.control.setCurrentElement(imageContainer);\n              _this3.editor.render();\n            }, 0);\n          } else {\n            lastTapTime = now;\n          }\n        });\n      }\n      imageContainer.updateBounds = function () {\n        var currentWidth = imageContainer.image ? imageContainer.image.width : width;\n        var currentHeight = imageContainer.image ? imageContainer.image.height : height;\n        if (_this3.editor.elementManager.updateSelectorSize) {\n          _this3.editor.elementManager.updateSelectorSize(imageContainer.selector, currentWidth, currentHeight);\n        }\n        imageContainer.hitArea = new PIXI.Rectangle(-currentWidth / 2, -currentHeight / 2, currentWidth, currentHeight);\n        if (_this3.editor.elementManager.syncEditBox) {\n          _this3.editor.elementManager.syncEditBox(imageContainer.selector, imageContainer);\n        }\n        _this3.editor.render();\n      };\n\n      // 核心：动态改色方法（支持恢复原图）\n      imageContainer.setColor = function (colorHex) {\n        var brightnessBoost = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1.3;\n        if (!this.image) return;\n\n        // 如果不传颜色或传null，恢复原图\n        if (!colorHex) {\n          this.image.texture = originalTexture;\n          this.editor.render();\n          return;\n        }\n\n        // 基于原始数据改色\n        if (!originalImageData) return;\n        var imageData = new ImageData(new Uint8ClampedArray(originalImageData.data), originalImageData.width, originalImageData.height);\n        var data = imageData.data;\n        var r = parseInt(colorHex.slice(1, 3), 16);\n        var g = parseInt(colorHex.slice(3, 5), 16);\n        var b = parseInt(colorHex.slice(5, 7), 16);\n        for (var i = 0; i < data.length; i += 4) {\n          var _alpha3 = data[i + 3];\n          if (_alpha3 > 0) {\n            var brightness = Math.round(data[i] * 0.299 + data[i + 1] * 0.587 + data[i + 2] * 0.114);\n            var ratio = brightness / 255 * brightnessBoost;\n            ratio = Math.min(ratio, 1.0);\n            data[i] = Math.round(r * ratio);\n            data[i + 1] = Math.round(g * ratio);\n            data[i + 2] = Math.round(b * ratio);\n          }\n        }\n        var canvas = document.createElement('canvas');\n        canvas.width = imageData.width;\n        canvas.height = imageData.height;\n        canvas.getContext('2d').putImageData(imageData, 0, 0);\n        this.image.texture = PIXI.Texture.from(canvas);\n        this.editor.render();\n      };\n\n      // 加载并初始化\n      var loadPromise = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var img, canvas, ctx, image, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.p = _context.n) {\n            case 0:\n              _context.p = 0;\n              img = new Image();\n              img.crossOrigin = \"anonymous\";\n              img.src = url;\n              _context.n = 1;\n              return new Promise(function (resolve) {\n                return img.onload = resolve;\n              });\n            case 1:\n              // 保存原始数据和纹理\n              canvas = document.createElement('canvas');\n              canvas.width = img.width;\n              canvas.height = img.height;\n              ctx = canvas.getContext('2d');\n              ctx.drawImage(img, 0, 0);\n              originalImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n              originalTexture = PIXI.Texture.from(canvas); // 原始纹理（用于恢复）\n\n              // 创建图片精灵（初始显示原图）\n              image = new PIXI.Sprite(originalTexture);\n              image.name = \"image\";\n              image.anchor.set(0.5, 0.5);\n              image.width = width;\n              image.height = height;\n              imageContainer.image = image;\n              imageContainer.removeChild(loadingIndicator);\n              imageContainer.addChild(image);\n              imageContainer.updateBounds();\n\n              // 仅当初始颜色存在时才改色\n              if (initialColor) {\n                imageContainer.setColor(initialColor);\n              }\n              _this3.editor.render();\n              return _context.a(2, imageContainer);\n            case 2:\n              _context.p = 2;\n              _t = _context.v;\n              console.error(\"加载失败：\", _t);\n              throw _t;\n            case 3:\n              return _context.a(2);\n          }\n        }, _callee, null, [[0, 2]]);\n      }))();\n      imageContainer.loadPromise = loadPromise;\n      if (addStage) {\n        this.editor.stage.addChild(imageContainer);\n        this.editor.render();\n      }\n      return imageContainer;\n    }\n\n    // 图标组件\n  }, {\n    key: \"addIcon\",\n    value: function addIcon(svgUrl) {\n      var _this4 = this;\n      var x = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.editor.stageSize.width / 2;\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.editor.stageSize.height / 2;\n      var width = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 24;\n      var height = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 24;\n      var color = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : \"#FFFFFF\";\n      var alpha = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 1;\n      var rotation = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n      var addStage = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : true;\n      // 创建图标容器\n      var iconContainer = new PIXI.Container();\n      iconContainer.name = \"icon-container\";\n      iconContainer.x = x;\n      iconContainer.y = y;\n      iconContainer.alpha = alpha;\n      iconContainer.rotation = rotation;\n      iconContainer.interactive = true;\n      iconContainer.scale.set(1, 1);\n\n      // 创建加载指示器（临时显示）\n      var loadingIndicator = new PIXI.Graphics();\n      loadingIndicator.beginFill(0xcccccc);\n      loadingIndicator.drawRect(-width / 2, -height / 2, width, height);\n      loadingIndicator.endFill();\n      iconContainer.addChild(loadingIndicator);\n\n      // 创建选择框\n      var selector = this.createSelector(width, height, 0.5, 0.5);\n      selector.userData = Object.assign(selector.userData, {\n        isInnerSelector: true,\n        target: iconContainer\n      });\n      selector.visible = false;\n      iconContainer.selector = selector;\n\n      // 设置点击区域\n      iconContainer.hitArea = new PIXI.Rectangle(-width / 2, -height / 2, width, height);\n      iconContainer.buttonMode = true;\n      if (addStage) {\n        iconContainer.on('pointerdown', function (e) {\n          e.stopPropagation();\n          _this4.editor.elementManager.selectComponent(null);\n          _this4.editor.control.setCurrentElement(null);\n          _this4.editor.control.handleChangeShowText(false);\n          _this4.editor.elementManager.handleElementPointerDown(e, iconContainer);\n          _this4.editor.control.setSelectedComponent(iconContainer);\n        });\n        var lastTapTime = 0;\n        iconContainer.on('pointertap', function (e) {\n          var now = Date.now();\n          if (now - lastTapTime < 300) {\n            // 双击事件\n            e.stopPropagation();\n            _this4.editor.elementManager.selectComponent(iconContainer);\n            _this4.editor.control.setCurrentElement(null);\n            lastTapTime = 0;\n            setTimeout(function () {\n              _this4.editor.control.setCurrentElement(iconContainer);\n              _this4.editor.render();\n            }, 0);\n          } else {\n            lastTapTime = now;\n          }\n        });\n      }\n\n      // 添加颜色修改方法\n      iconContainer.setColor = function (newColor) {\n        if (newColor && iconContainer.icon) {\n          try {\n            var tintColor = parseInt(newColor.replace('#', ''), 16);\n            iconContainer.icon.tint = tintColor;\n            _this4.editor.render();\n          } catch (e) {\n            console.error('修改图标颜色失败:', e);\n          }\n        }\n      };\n\n      // 添加边界更新方法\n      iconContainer.updateBounds = function () {\n        var scaledWidth = width * iconContainer.scale.x;\n        var scaledHeight = height * iconContainer.scale.y;\n        _this4.editor.elementManager.updateSelectorSize(iconContainer.selector, scaledWidth, scaledHeight);\n        iconContainer.hitArea = new PIXI.Rectangle(-width / 2, -height / 2, width, height);\n        _this4.editor.elementManager.syncEditBox(iconContainer.selector, iconContainer);\n        _this4.editor.render();\n      };\n      iconContainer.changeSvg = /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(newSvgUrl) {\n          var _iconContainer$icon;\n          var containerBounds, finalWidth, finalHeight, currentColor, loadIndicator, _iconContainer$icon2, newTexture, newIcon, oldTint, _t2;\n          return _regenerator().w(function (_context2) {\n            while (1) switch (_context2.p = _context2.n) {\n              case 0:\n                containerBounds = iconContainer.getLocalBounds();\n                finalWidth = containerBounds.width || 24;\n                finalHeight = containerBounds.height || 24;\n                currentColor = ((_iconContainer$icon = iconContainer.icon) === null || _iconContainer$icon === void 0 ? void 0 : _iconContainer$icon.tint) || 0xFFFFFF;\n                _context2.p = 1;\n                loadIndicator = new PIXI.Graphics();\n                loadIndicator.beginFill(currentColor);\n                loadIndicator.drawRect(containerBounds.x, containerBounds.y, finalWidth, finalHeight);\n                loadIndicator.endFill();\n                if (iconContainer.icon) {\n                  iconContainer.removeChild(iconContainer.icon);\n                }\n                iconContainer.addChild(loadIndicator);\n                _context2.n = 2;\n                return PIXI.Assets.load(newSvgUrl);\n              case 2:\n                newTexture = _context2.v;\n                newIcon = new PIXI.Sprite(newTexture);\n                newIcon.name = \"icon\";\n                newIcon.anchor.set(0.5, 0.5); // 保持原锚点（中心对齐）\n                newIcon.width = finalWidth;\n                newIcon.height = finalHeight;\n                newIcon.interactive = false;\n                oldTint = ((_iconContainer$icon2 = iconContainer.icon) === null || _iconContainer$icon2 === void 0 ? void 0 : _iconContainer$icon2.tint) || parseInt(iconContainer.defaultColor.replace('#', ''), 16);\n                newIcon.tint = oldTint;\n                iconContainer.icon = newIcon;\n                iconContainer.removeChild(loadIndicator);\n                iconContainer.addChild(newIcon);\n                iconContainer.updateBounds();\n                _this4.editor.render();\n                _context2.n = 4;\n                break;\n              case 3:\n                _context2.p = 3;\n                _t2 = _context2.v;\n                if (loadIndicator) {\n                  loadIndicator.clear();\n                  loadIndicator.beginFill(0xff3333);\n                  loadIndicator.drawRect(containerBounds.x, containerBounds.y, finalWidth, finalHeight);\n                  loadIndicator.lineStyle(2, 0xffffff);\n                  loadIndicator.moveTo(containerBounds.x + finalWidth / 4, containerBounds.y + finalHeight / 4);\n                  loadIndicator.lineTo(containerBounds.x + finalWidth * 3 / 4, containerBounds.y + finalHeight * 3 / 4);\n                  loadIndicator.moveTo(containerBounds.x + finalWidth * 3 / 4, containerBounds.y + finalHeight / 4);\n                  loadIndicator.lineTo(containerBounds.x + finalWidth / 4, containerBounds.y + finalHeight * 3 / 4);\n                  loadIndicator.endFill();\n                  _this4.editor.render();\n                }\n              case 4:\n                return _context2.a(2);\n            }\n          }, _callee2, null, [[1, 3]]);\n        }));\n        return function (_x) {\n          return _ref3.apply(this, arguments);\n        };\n      }();\n      var loadIcon = /*#__PURE__*/function () {\n        var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {\n          var texture, icon, tintColor, _t3;\n          return _regenerator().w(function (_context3) {\n            while (1) switch (_context3.p = _context3.n) {\n              case 0:\n                _context3.p = 0;\n                _context3.n = 1;\n                return PIXI.Assets.load(svgUrl);\n              case 1:\n                texture = _context3.v;\n                // 创建图标精灵\n                icon = new PIXI.Sprite(texture);\n                icon.name = \"icon\";\n                icon.anchor.set(0.5, 0.5); // 中心锚点\n                icon.width = width;\n                icon.height = height;\n                icon.interactive = false;\n\n                // 应用颜色\n                if (color) {\n                  tintColor = parseInt(color.replace('#', ''), 16);\n                  icon.tint = tintColor;\n                }\n\n                // 存储图标引用\n                iconContainer.icon = icon;\n\n                // 替换加载指示器\n                iconContainer.removeChild(loadingIndicator);\n                iconContainer.addChild(icon);\n\n                // 完成初始化\n                iconContainer.updateBounds();\n                _this4.editor.render();\n                _context3.n = 3;\n                break;\n              case 2:\n                _context3.p = 2;\n                _t3 = _context3.v;\n                console.error(\"SVG\\u52A0\\u8F7D\\u5931\\u8D25: \".concat(_t3.message));\n                // 显示错误状态\n                loadingIndicator.clear();\n                loadingIndicator.beginFill(0xff3333);\n                loadingIndicator.drawRect(-width / 2, -height / 2, width, height);\n                loadingIndicator.lineStyle(2, 0xffffff);\n                loadingIndicator.moveTo(-width / 4, -height / 4);\n                loadingIndicator.lineTo(width / 4, height / 4);\n                loadingIndicator.moveTo(width / 4, -height / 4);\n                loadingIndicator.lineTo(-width / 4, height / 4);\n                loadingIndicator.endFill();\n                _this4.editor.render();\n              case 3:\n                return _context3.a(2);\n            }\n          }, _callee3, null, [[0, 2]]);\n        }));\n        return function loadIcon() {\n          return _ref4.apply(this, arguments);\n        };\n      }();\n\n      // 执行加载\n      loadIcon();\n      if (addStage) {\n        this.editor.stage.addChild(iconContainer);\n        this.editor.render();\n      }\n      return iconContainer;\n    }\n  }, {\n    key: \"addBox\",\n    value: function addBox() {\n      var _this5 = this;\n      var texts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var shapes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var images = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n      var icons = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n      var x = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.editor.stageSize.width / 2;\n      var y = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : this.editor.stageSize.height / 2;\n      var alpha = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 1;\n      var rotation = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n      var options = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : {\n        canMoving: false,\n        canEdit: true,\n        partId: 0,\n        tempId: 0,\n        sortId: undefined\n      };\n      var compositeContainer = new PIXI.Container();\n      compositeContainer.name = \"box-container\";\n      compositeContainer.x = x;\n      compositeContainer.y = y;\n      compositeContainer.interactive = true;\n      compositeContainer.alpha = alpha;\n      compositeContainer.rotation = rotation;\n      compositeContainer.scale.set(1, 1);\n      compositeContainer.sortableChildren = true;\n      compositeContainer.userData = {\n        canMoving: options.canMoving,\n        canEdit: options.canEdit,\n        partId: options.partId,\n        tempId: options.tempId,\n        sortId: options.sortId\n      };\n      var baseZIndex = {\n        images: 100,\n        shapes: 200,\n        icons: 300,\n        texts: 400\n      };\n      if (options.canMoving) {\n        compositeContainer.on('pointerdown', function (e) {\n          e.stopPropagation();\n          _this5.editor.elementManager.selectComponent(null);\n          _this5.editor.control.setCurrentElement(null);\n          _this5.editor.control.handleChangeShowText(false);\n          _this5.editor.elementManager.handleElementPointerDown(e, compositeContainer);\n          _this5.editor.control.setSelectedComponent(compositeContainer);\n        });\n      }\n      var lastTapTime = 0;\n      compositeContainer.on('pointertap', function (e) {\n        var now = Date.now();\n        if (now - lastTapTime < 300) {\n          e.stopPropagation();\n          _this5.editor.elementManager.selectComponent(compositeContainer);\n          _this5.editor.control.setCurrentElement(null);\n          lastTapTime = 0;\n          setTimeout(function () {\n            _this5.editor.control.setCurrentElement(compositeContainer);\n            _this5.editor.render();\n          }, 0);\n        } else {\n          lastTapTime = now;\n        }\n      });\n      var tempWidth = 100;\n      var tempHeight = 100;\n      var selector = this.createSelector(tempWidth, tempHeight, 0.5, 0.5);\n      selector.userData = Object.assign(selector.userData, {\n        isInnerSelector: true,\n        target: compositeContainer\n      });\n      selector.visible = false;\n      compositeContainer.selector = selector;\n      images.forEach(function (imgConfig) {\n        var url = imgConfig.url,\n          _imgConfig$x = imgConfig.x,\n          x = _imgConfig$x === void 0 ? 0 : _imgConfig$x,\n          _imgConfig$y = imgConfig.y,\n          y = _imgConfig$y === void 0 ? 0 : _imgConfig$y,\n          _imgConfig$width = imgConfig.width,\n          width = _imgConfig$width === void 0 ? 100 : _imgConfig$width,\n          _imgConfig$height = imgConfig.height,\n          height = _imgConfig$height === void 0 ? 100 : _imgConfig$height,\n          _imgConfig$alpha = imgConfig.alpha,\n          alpha = _imgConfig$alpha === void 0 ? 1 : _imgConfig$alpha,\n          _imgConfig$rotation = imgConfig.rotation,\n          rotation = _imgConfig$rotation === void 0 ? 0 : _imgConfig$rotation,\n          _imgConfig$initialCol = imgConfig.initialColor,\n          initialColor = _imgConfig$initialCol === void 0 ? null : _imgConfig$initialCol,\n          _imgConfig$zIndex = imgConfig.zIndex,\n          zIndex = _imgConfig$zIndex === void 0 ? 0 : _imgConfig$zIndex;\n        if (!url) return;\n        var imageElement = _this5.addImage(url, x, y, width, height, alpha, rotation, initialColor, false);\n        imageElement.zIndex = baseZIndex.images + (zIndex || 0);\n        compositeContainer.addChild(imageElement);\n      });\n      shapes.forEach(function (shapeConfig, index) {\n        var _shapeConfig$type = shapeConfig.type,\n          shapeType = _shapeConfig$type === void 0 ? \"rect\" : _shapeConfig$type,\n          _shapeConfig$colorTyp = shapeConfig.colorType,\n          colorType = _shapeConfig$colorTyp === void 0 ? \"Solid\" : _shapeConfig$colorTyp,\n          _shapeConfig$x = shapeConfig.x,\n          x = _shapeConfig$x === void 0 ? 0 : _shapeConfig$x,\n          _shapeConfig$y = shapeConfig.y,\n          y = _shapeConfig$y === void 0 ? 0 : _shapeConfig$y,\n          _shapeConfig$width = shapeConfig.width,\n          width = _shapeConfig$width === void 0 ? 100 : _shapeConfig$width,\n          _shapeConfig$height = shapeConfig.height,\n          height = _shapeConfig$height === void 0 ? 60 : _shapeConfig$height,\n          _shapeConfig$color = shapeConfig.color,\n          color = _shapeConfig$color === void 0 ? \"#ffffff\" : _shapeConfig$color,\n          _shapeConfig$alpha = shapeConfig.alpha,\n          alpha = _shapeConfig$alpha === void 0 ? 1 : _shapeConfig$alpha,\n          _shapeConfig$rotation = shapeConfig.rotation,\n          rotation = _shapeConfig$rotation === void 0 ? 0 : _shapeConfig$rotation,\n          _shapeConfig$radius = shapeConfig.radius,\n          radius = _shapeConfig$radius === void 0 ? 0 : _shapeConfig$radius,\n          _shapeConfig$gradient = shapeConfig.gradient,\n          gradient = _shapeConfig$gradient === void 0 ? null : _shapeConfig$gradient,\n          _shapeConfig$ringOpti = shapeConfig.ringOption,\n          ringOption = _shapeConfig$ringOpti === void 0 ? null : _shapeConfig$ringOpti,\n          _shapeConfig$zIndex = shapeConfig.zIndex,\n          zIndex = _shapeConfig$zIndex === void 0 ? 0 : _shapeConfig$zIndex;\n        var shapeElement = _this5.addShape(x, y, width, height, color, alpha, rotation, shapeType, radius, false);\n        if (['circle', 'triangle'].includes(shapeType)) {\n          shapeElement.changeShapeType(shapeType, radius);\n        } else if (['ring'].includes(shapeType)) {\n          shapeElement.setOpenRoundedRing(ringOption);\n        }\n        if (gradient) {\n          if (colorType !== 'Conic') {\n            shapeElement.setGradient(gradient.isLinear, gradient.colorStops, gradient.gradientParams);\n          } else {\n            shapeElement.setConicGradient(gradient.colorStops, gradient.centerX, gradient.centerY, gradient.startAngle);\n          }\n        }\n        shapeElement.zIndex = baseZIndex.shapes + (zIndex || 0);\n        compositeContainer.addChild(shapeElement);\n      });\n      icons.forEach(function (iconConfig) {\n        var url = iconConfig.url,\n          _iconConfig$x = iconConfig.x,\n          iconX = _iconConfig$x === void 0 ? 0 : _iconConfig$x,\n          _iconConfig$y = iconConfig.y,\n          iconY = _iconConfig$y === void 0 ? 0 : _iconConfig$y,\n          _iconConfig$width = iconConfig.width,\n          width = _iconConfig$width === void 0 ? 24 : _iconConfig$width,\n          _iconConfig$height = iconConfig.height,\n          height = _iconConfig$height === void 0 ? 24 : _iconConfig$height,\n          _iconConfig$color = iconConfig.color,\n          color = _iconConfig$color === void 0 ? \"#FFFFFF\" : _iconConfig$color,\n          _iconConfig$alpha = iconConfig.alpha,\n          alpha = _iconConfig$alpha === void 0 ? 1 : _iconConfig$alpha,\n          _iconConfig$rotation = iconConfig.rotation,\n          rotation = _iconConfig$rotation === void 0 ? 0 : _iconConfig$rotation,\n          _iconConfig$zIndex = iconConfig.zIndex,\n          zIndex = _iconConfig$zIndex === void 0 ? 0 : _iconConfig$zIndex,\n          _iconConfig$groupData = iconConfig.groupDataKey,\n          groupDataKey = _iconConfig$groupData === void 0 ? null : _iconConfig$groupData,\n          _iconConfig$groupData2 = iconConfig.groupDataType,\n          groupDataType = _iconConfig$groupData2 === void 0 ? null : _iconConfig$groupData2,\n          _iconConfig$groupData3 = iconConfig.groupDataIndex,\n          groupDataIndex = _iconConfig$groupData3 === void 0 ? null : _iconConfig$groupData3;\n        if (!url) return;\n        var iconElement = _this5.addIcon(url, iconX, iconY, width, height, color, alpha, rotation, false);\n        iconElement.zIndex = baseZIndex.icons + (zIndex || 0);\n        iconElement.userData = _objectSpread(_objectSpread({}, iconElement.userData), {}, {\n          groupDataKey: groupDataKey,\n          groupDataType: groupDataType,\n          groupDataIndex: groupDataIndex\n        });\n        compositeContainer.addChild(iconElement);\n      });\n      texts.forEach(function (textConfig) {\n        var _textConfig$content = textConfig.content,\n          content = _textConfig$content === void 0 ? \"Double click to edit\" : _textConfig$content,\n          _textConfig$x = textConfig.x,\n          x = _textConfig$x === void 0 ? 0 : _textConfig$x,\n          _textConfig$y = textConfig.y,\n          y = _textConfig$y === void 0 ? 0 : _textConfig$y,\n          _textConfig$fontSize = textConfig.fontSize,\n          fontSize = _textConfig$fontSize === void 0 ? 24 : _textConfig$fontSize,\n          _textConfig$fill = textConfig.fill,\n          fill = _textConfig$fill === void 0 ? \"#ffffff\" : _textConfig$fill,\n          _textConfig$shadow = textConfig.shadow,\n          shadow = _textConfig$shadow === void 0 ? {\n            enabled: true,\n            color: '#000000',\n            blur: 0,\n            angle: 0,\n            alpha: 0\n          } : _textConfig$shadow,\n          _textConfig$bgColor = textConfig.bgColor,\n          bgColor = _textConfig$bgColor === void 0 ? \"transparent\" : _textConfig$bgColor,\n          _textConfig$radius = textConfig.radius,\n          radius = _textConfig$radius === void 0 ? 0 : _textConfig$radius,\n          _textConfig$bgPadding = textConfig.bgPadding,\n          bgPadding = _textConfig$bgPadding === void 0 ? 4 : _textConfig$bgPadding,\n          _textConfig$letterSpa = textConfig.letterSpacing,\n          letterSpacing = _textConfig$letterSpa === void 0 ? 0 : _textConfig$letterSpa,\n          _textConfig$lineHeigh = textConfig.lineHeight,\n          lineHeight = _textConfig$lineHeigh === void 0 ? fontSize * 1.2 : _textConfig$lineHeigh,\n          _textConfig$zIndex = textConfig.zIndex,\n          zIndex = _textConfig$zIndex === void 0 ? 0 : _textConfig$zIndex,\n          _textConfig$groupData = textConfig.groupDataKey,\n          groupDataKey = _textConfig$groupData === void 0 ? null : _textConfig$groupData,\n          _textConfig$groupData2 = textConfig.groupDataType,\n          groupDataType = _textConfig$groupData2 === void 0 ? null : _textConfig$groupData2,\n          _textConfig$groupData3 = textConfig.groupDataIndex,\n          groupDataIndex = _textConfig$groupData3 === void 0 ? null : _textConfig$groupData3;\n        var alignX = textConfig.anchor.x;\n        var textElement = _this5.addText(content, x, y, fontSize, fill, alignX, shadow, bgColor, radius, bgPadding, letterSpacing, lineHeight, false);\n        textElement.zIndex = baseZIndex.texts + (zIndex || 0);\n        textElement.userData = _objectSpread(_objectSpread({}, textElement.userData), {}, {\n          groupDataKey: groupDataKey,\n          groupDataType: groupDataType,\n          groupDataIndex: groupDataIndex\n        });\n        compositeContainer.addChild(textElement);\n      });\n      var bounds;\n      var childBounds = [];\n      compositeContainer.children.forEach(function (ele) {\n        var bound = ele.getBounds();\n        childBounds.push({\n          bound: bound,\n          offsetX: ele.x,\n          offsetY: ele.y\n        });\n      });\n      if (childBounds.length > 0) {\n        var minX = Math.min.apply(Math, _toConsumableArray(childBounds.map(function (b) {\n          return b.bound.x;\n        })));\n        var maxX = Math.max.apply(Math, _toConsumableArray(childBounds.map(function (b) {\n          return b.bound.x + b.bound.width;\n        })));\n        var minY = Math.min.apply(Math, _toConsumableArray(childBounds.map(function (b) {\n          return b.bound.y;\n        })));\n        var maxY = Math.max.apply(Math, _toConsumableArray(childBounds.map(function (b) {\n          return b.bound.y + b.bound.height;\n        })));\n        var width = maxX - minX;\n        var height = maxY - minY;\n        bounds = {\n          width: width,\n          height: height\n        };\n      } else {\n        bounds = {\n          minX: -tempWidth / 2,\n          maxX: tempWidth / 2,\n          minY: -tempHeight / 2,\n          maxY: tempHeight / 2,\n          width: tempWidth,\n          height: tempHeight\n        };\n      }\n      compositeContainer.bounds = bounds;\n      this.editor.stage.addChild(compositeContainer);\n      compositeContainer.sortChildren();\n      this.editor.render();\n      return compositeContainer;\n    }\n  }, {\n    key: \"createSelector\",\n    value: function createSelector(targetWidth, targetHeight) {\n      var _this6 = this;\n      var anchorX = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var anchorY = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var padding = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 8;\n      var isText = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n      var selectorContainer = new PIXI.Container();\n      selectorContainer.userData = {\n        isInnerSelector: true,\n        isText: isText\n      };\n      selectorContainer.visible = false;\n      var lineWidth = 1;\n      var margin = padding; // 与其他方法保持一致的边距参数\n      var controlRadius = 12;\n      var controlColor = 0xFFFFFF;\n      var shrink = 3; // 固定缩进值，与syncEditBox保持一致（不再用controlRadius计算，避免差异）\n\n      var elemLeft, elemTop, elemRight, elemBottom;\n      if (isText) {\n        // 文本元素：基于文本锚点计算边界（与textObj.anchor匹配）\n        elemLeft = -anchorX * targetWidth; // 左边界 = -对齐锚点 * 宽度\n        elemTop = -targetHeight / 2; // 垂直居中\n        elemRight = elemLeft + targetWidth;\n        elemBottom = elemTop + targetHeight;\n      } else {\n        // 非文本元素：原逻辑\n        elemLeft = -anchorX * targetWidth;\n        elemTop = -anchorY * targetHeight;\n        elemRight = elemLeft + targetWidth;\n        elemBottom = elemTop + targetHeight;\n      }\n\n      // 线框边界（与updateSelectorSize、syncEditBox计算逻辑一致）\n      var borderLeft = elemLeft - margin;\n      var borderTop = elemTop - margin;\n      var borderRight = elemRight + margin;\n      var borderBottom = elemBottom + margin;\n\n      // 绘制初始线框\n      var border = new PIXI.Graphics();\n      border.beginFill(0xFFFFFF);\n      border.drawRect(borderLeft, borderTop, borderRight - borderLeft, lineWidth);\n      border.drawRect(borderLeft, borderBottom - lineWidth, borderRight - borderLeft, lineWidth);\n      border.drawRect(borderLeft, borderTop + lineWidth, lineWidth, borderBottom - borderTop - 2 * lineWidth);\n      border.drawRect(borderRight - lineWidth, borderTop + lineWidth, lineWidth, borderBottom - borderTop - 2 * lineWidth);\n      border.endFill();\n      selectorContainer.addChild(border);\n\n      // 创建控制点（位置与线框边界严格关联）\n      var createControlPoint = function createControlPoint(x, y, position) {\n        var pointContainer = new PIXI.Container();\n        pointContainer.x = x;\n        pointContainer.y = y;\n        pointContainer.userData = {\n          position: position,\n          isControlPoint: true\n        };\n        pointContainer.interactive = true;\n        pointContainer.buttonMode = true;\n        pointContainer.hitArea = new PIXI.Circle(0, 0, 20);\n        pointContainer.zIndex = 99999;\n        pointContainer.interactiveChildren = false;\n\n        // 控制点样式\n        var circleBg = new PIXI.Graphics();\n        circleBg.lineStyle(0, 0xFFFFFF, 1, 0.5, true);\n        circleBg.beginFill(controlColor);\n        circleBg.drawCircle(0, 0, controlRadius, 64);\n        circleBg.endFill();\n        pointContainer.addChild(circleBg);\n\n        // 图标文字\n        var iconMap = {\n          topLeft: \"\\uE900\",\n          topRight: \"\\uE908\",\n          bottomLeft: \"\\uE901\",\n          bottomRight: \"\\uE902\"\n        };\n        var iconText = new PIXI.Text(iconMap[position], {\n          fontFamily: 'icomoon',\n          fontSize: controlRadius * 1.2,\n          fill: 0x1B1A1E,\n          align: 'center'\n        });\n        iconText.y = 1;\n        iconText.anchor.set(0.5);\n        pointContainer.addChild(iconText);\n\n        // 控制点事件\n        pointContainer.on('pointerdown', function (e) {\n          e.stopPropagation();\n          var targetElement = selectorContainer.userData.target;\n          _this6.editor.elementManager.handleControlPointClick(position, targetElement, e.global);\n        });\n        return pointContainer;\n      };\n\n      // 添加四个控制点（位置基于线框边界，与syncEditBox逻辑一致）\n      selectorContainer.addChild(createControlPoint(borderLeft + shrink, borderTop + shrink, 'topLeft'));\n      selectorContainer.addChild(createControlPoint(borderRight - shrink, borderTop + shrink, 'topRight'));\n      selectorContainer.addChild(createControlPoint(borderLeft + shrink, borderBottom - shrink, 'bottomLeft'));\n      selectorContainer.addChild(createControlPoint(borderRight - shrink, borderBottom - shrink, 'bottomRight'));\n      selectorContainer.interactive = false;\n      selectorContainer.interactiveChildren = true;\n      selectorContainer.zIndex = 1000;\n      return selectorContainer;\n    }\n  }]);\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ElementFactory);\n\n//# sourceURL=webpack://screen-edit/./js/ElementFactory.js?\n}");

/***/ }),

/***/ "./js/ElementManager.js":
/*!******************************!*\
  !*** ./js/ElementManager.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config.js */ \"./js/config.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar ElementManager = /*#__PURE__*/function () {\n  function ElementManager(editor) {\n    _classCallCheck(this, ElementManager);\n    this.editor = editor;\n    this.selectedComponent = null;\n    this.isDraggingComponent = false;\n    this.dragOffset = {\n      x: 0,\n      y: 0\n    };\n    this.touchPoints = new Map();\n    this.isPinching = false;\n    this.eventTypes = ['text-container', 'shape-container', 'box-container', 'icon-container', 'image-container'];\n    this.initialCompX = 0;\n    this.initialCompY = 0;\n    this.initialTouchX = 0;\n    this.initialTouchY = 0;\n    this.isTransforming = false;\n    this.transformStart = {\n      mouseX: 0,\n      mouseY: 0,\n      centerX: 0,\n      centerY: 0,\n      width: 0,\n      height: 0,\n      rotation: 0,\n      distance: 0,\n      angle: 0,\n      originalFontSize: 14\n    };\n    this.lastTransformDistance = 0;\n    this.firstTransformDone = false;\n    this.editContainer = new PIXI.Container();\n    this.editContainer.zIndex = 9999;\n    this.editor.stage.addChild(this.editContainer);\n  }\n  return _createClass(ElementManager, [{\n    key: \"getComponentDragBounds\",\n    value: function getComponentDragBounds() {\n      var stageCenterX = this.editor.stageSize.width / 2;\n      var stageCenterY = this.editor.stageSize.height / 2;\n      var areaWidth = this.editor.size.width;\n      var areaHeight = this.editor.size.height;\n      return {\n        minX: stageCenterX - areaWidth / 2,\n        maxX: stageCenterX + areaWidth / 2,\n        minY: stageCenterY - areaHeight / 2,\n        maxY: stageCenterY + areaHeight / 2\n      };\n    }\n  }, {\n    key: \"showComponentControl\",\n    value: function showComponentControl() {\n      this.hideAllInnerSelectors();\n      if (this.selectedComponent) {\n        var selector = this.selectedComponent.selector;\n        if (selector && !this.editContainer.children.includes(selector)) {\n          this.editContainer.addChild(selector);\n        }\n        selector.visible = true;\n        this.syncEditBox(selector, this.selectedComponent);\n      }\n      this.editor.render();\n    }\n  }, {\n    key: \"hideAllInnerSelectors\",\n    value: function hideAllInnerSelectors() {\n      this.editContainer.children.forEach(function (selector) {\n        selector.visible = false;\n      });\n    }\n\n    // 同步编辑框与元素\n  }, {\n    key: \"syncEditBox\",\n    value: function syncEditBox(editBox, obj) {\n      var _this = this;\n      if (!editBox || !obj) return;\n      var width, height;\n      // 复合组件（box-container）\n      if (obj.name === \"box-container\" && obj.bounds) {\n        var scaleX = obj.scale.x || 1;\n        var scaleY = obj.scale.y || 1;\n        width = (obj.bounds.width || 0) * scaleX;\n        height = (obj.bounds.height || 0) * scaleY;\n      }\n      // 文本元素（text-container）\n      else if (obj.name === \"text-container\") {\n        var textElement = obj.children.find(function (child) {\n          return child.name === \"text\";\n        });\n        if (!textElement) return;\n        width = textElement.width || 0;\n        height = textElement.height || 0;\n      }\n      // 普通元素：\n      else {\n        var contentElement = null;\n        obj.children.forEach(function (child) {\n          var _child$userData;\n          if (!((_child$userData = child.userData) !== null && _child$userData !== void 0 && _child$userData.isInnerSelector)) {\n            contentElement = child;\n          }\n        });\n        if (!contentElement) return;\n        width = contentElement.width || 0;\n        height = contentElement.height || 0;\n      }\n\n      // 计算边界（区分文本/非文本）\n      var elemLeft, elemTop, elemRight, elemBottom;\n      var padding = 8;\n      if (obj.name === \"text-container\") {\n        // 文本元素：基于对齐锚点计算边界（与文本锚点同步）\n        var alignX = obj.userData.alignX || 0; // 获取文本对齐方式\n        elemLeft = -alignX * width; // 左边界 = -对齐锚点 × 宽度（适配左/中/右）\n        elemTop = -height / 2; // 垂直居中\n        elemRight = elemLeft + width;\n        elemBottom = elemTop + height;\n      } else {\n        // 非文本元素（含box-container）：沿用原有中心基准逻辑\n        elemLeft = -width / 2;\n        elemTop = -height / 2;\n        elemRight = width / 2;\n        elemBottom = height / 2;\n      }\n\n      // 线框边界（基于元素边界+内边距）\n      var borderLeft = elemLeft - padding;\n      var borderTop = elemTop - padding;\n      var borderRight = elemRight + padding;\n      var borderBottom = elemBottom + padding;\n      var shrink = 3;\n\n      // 更新控制点位置\n      var controlPoints = editBox.children.filter(function (child) {\n        var _child$userData2;\n        return (_child$userData2 = child.userData) === null || _child$userData2 === void 0 ? void 0 : _child$userData2.isControlPoint;\n      });\n      controlPoints.forEach(function (point) {\n        switch (point.userData.position) {\n          case 'topLeft':\n            point.x = borderLeft + shrink;\n            point.y = borderTop + shrink;\n            break;\n          case 'topRight':\n            point.x = borderRight - shrink;\n            point.y = borderTop + shrink;\n            point.visible = !(_this.selectedComponent && _this.selectedComponent.name === 'box-container' && !_this.selectedComponent.userData.canMoving);\n            break;\n          case 'bottomLeft':\n            point.x = borderLeft + shrink;\n            point.y = borderBottom - shrink;\n            point.visible = !(_this.selectedComponent && _this.selectedComponent.name === 'box-container' && !_this.selectedComponent.userData.canMoving);\n            break;\n          case 'bottomRight':\n            point.x = borderRight - shrink;\n            point.y = borderBottom - shrink;\n            point.visible = !(_this.selectedComponent && _this.selectedComponent.name === 'box-container' && !_this.selectedComponent.userData.canMoving);\n            break;\n        }\n      });\n\n      // 选择框基础属性\n      editBox.x = obj.x;\n      editBox.y = obj.y;\n      editBox.rotation = obj.rotation;\n      editBox.scale.x = 1;\n      editBox.scale.y = 1;\n\n      // 控制点缩放逻辑（保留box-container处理，新增文本适配）\n      controlPoints.forEach(function (point) {\n        if (obj.name === \"box-container\") {\n          // 复合组件：控制点不抵消缩放\n          point.scale.x = 1;\n          point.scale.y = 1;\n        } else {\n          // 文本和普通元素：抵消缩放\n          point.scale.x = 1 / (obj.scale.x || 1);\n          point.scale.y = 1 / (obj.scale.y || 1);\n        }\n      });\n\n      // 更新选择框尺寸\n      this.updateSelectorSize(editBox, width, height);\n    }\n  }, {\n    key: \"selectComponent\",\n    value: function selectComponent(element) {\n      var targetContainer = null;\n      if (element && this.eventTypes.includes(element.name)) {\n        targetContainer = element;\n      } else if (element && element.parent && this.eventTypes.includes(element.parent.name)) {\n        targetContainer = element.parent;\n      } else {\n        targetContainer = null;\n      }\n      this.selectedComponent = targetContainer;\n      this.showComponentControl();\n      this.editor.control.setSelectedComponent(this.selectedComponent);\n    }\n  }, {\n    key: \"handleElementPointerDown\",\n    value: function handleElementPointerDown(e, container) {\n      e.stopPropagation();\n      this.selectComponent(container);\n      this.isDraggingComponent = true;\n      var stageManager = this.editor.stageManager;\n      var stagePos = stageManager.screenToStage(e.global.x, e.global.y);\n      this.initialCompX = container.x;\n      this.initialCompY = container.y;\n      this.initialTouchX = e.global.x;\n      this.initialTouchY = e.global.y;\n      this.dragOffset.x = stagePos.x - container.x;\n      this.dragOffset.y = stagePos.y - container.y;\n    }\n  }, {\n    key: \"handlePointerMove\",\n    value: function handlePointerMove(e) {\n      var _this$editor, _this$selectedCompone, _this$selectedCompone2, _this$selectedCompone3;\n      var touches = e.touches || [e];\n      if (this.isTransforming && touches.length === 1) {\n        this.handleTransforming(touches[0].global);\n        return;\n      }\n      var stageManager = (_this$editor = this.editor) === null || _this$editor === void 0 ? void 0 : _this$editor.stageManager;\n      if (!stageManager) return;\n      if (!touches.length && stageManager !== null && stageManager !== void 0 && stageManager.isDragging) {\n        stageManager.stopDragging();\n        return;\n      }\n      var stageScale = stageManager.scale || 1;\n      if (((_this$selectedCompone = this.selectedComponent) === null || _this$selectedCompone === void 0 ? void 0 : _this$selectedCompone.name) === 'box-container' && (_this$selectedCompone2 = this.selectedComponent) !== null && _this$selectedCompone2 !== void 0 && _this$selectedCompone2.userData && !((_this$selectedCompone3 = this.selectedComponent.userData) !== null && _this$selectedCompone3 !== void 0 && _this$selectedCompone3.canMoving)) {\n        return;\n      }\n      if (this.isDraggingComponent && this.selectedComponent) {\n        var touch = touches[0];\n        var element = this.selectedComponent;\n\n        // 1. 计算触摸偏移（原有逻辑不变）\n        var touchDeltaX = touch.global.x - this.initialTouchX;\n        var touchDeltaY = touch.global.y - this.initialTouchY;\n        var compensationScale = 1 / stageScale;\n        var compDeltaX = touchDeltaX * compensationScale;\n        var compDeltaY = touchDeltaY * compensationScale;\n\n        // 2. 计算新位置（未限制前）\n        var newCompX = this.initialCompX + compDeltaX;\n        var newCompY = this.initialCompY + compDeltaY;\n\n        // 3. 区分组件类型计算实际尺寸（核心修复）\n        var contentWidth, contentHeight, scaleX, scaleY;\n        if (element.name === 'box-container') {\n          // 复合组件：用边界宽高 × 当前缩放比例\n          var bounds = element.bounds || {\n            width: 0,\n            height: 0\n          };\n          contentWidth = bounds.width; // 原始边界宽度（未缩放）\n          contentHeight = bounds.height; // 原始边界高度（未缩放）\n          scaleX = element.scale.x || 1; // 当前X轴缩放比例\n          scaleY = element.scale.y || 1; // 当前Y轴缩放比例\n        } else {\n          // 普通元素：直接使用内容尺寸（不依赖缩放，因尺寸已实时更新）\n          var contentElement = null;\n          element.children.forEach(function (child) {\n            var _child$userData3;\n            if (!((_child$userData3 = child.userData) !== null && _child$userData3 !== void 0 && _child$userData3.isInnerSelector)) {\n              contentElement = child;\n            }\n          });\n          if (!contentElement) return;\n          contentWidth = contentElement.width || 0;\n          contentHeight = contentElement.height || 0;\n          scaleX = 1; // 普通元素无需额外缩放（尺寸已包含缩放）\n          scaleY = 1;\n        }\n\n        // 4. 计算旋转/缩放后的元素边界（世界坐标系）\n        var rotated = Math.abs(element.rotation) % (Math.PI * 2) !== 0;\n        var halfWidth, halfHeight;\n        if (rotated) {\n          // 旋转后：使用外接矩形的半宽高（考虑缩放）\n          var rad = Math.abs(element.rotation);\n          var cos = Math.cos(rad);\n          var sin = Math.sin(rad);\n          // 复合组件：内容宽高先乘缩放，再计算旋转后的边界\n          halfWidth = (contentWidth * cos * scaleX + contentHeight * sin * scaleY) / 2;\n          halfHeight = (contentWidth * sin * scaleX + contentHeight * cos * scaleY) / 2;\n        } else {\n          // 未旋转：直接使用 原始宽高×缩放 / 2\n          halfWidth = contentWidth * scaleX / 2;\n          halfHeight = contentHeight * scaleY / 2;\n        }\n\n        // 5. 应用边界限制（使用计算出的实际边界）\n        var _this$getComponentDra = this.getComponentDragBounds(),\n          minX = _this$getComponentDra.minX,\n          maxX = _this$getComponentDra.maxX,\n          minY = _this$getComponentDra.minY,\n          maxY = _this$getComponentDra.maxY;\n        newCompX = Math.max(minX + halfWidth, Math.min(newCompX, maxX - halfWidth));\n        newCompY = Math.max(minY + halfHeight, Math.min(newCompY, maxY - halfHeight));\n\n        // 6. 更新位置并同步\n        element.x = newCompX;\n        element.y = newCompY;\n        this.syncEditBox(element.selector, element);\n        this.editor.render();\n      } else if (stageManager !== null && stageManager !== void 0 && stageManager.isDragging) {\n        var _touch = touches[0];\n        stageManager.drag(_touch.global.x, _touch.global.y);\n      }\n    }\n  }, {\n    key: \"handlePointerUp\",\n    value: function handlePointerUp(e) {\n      var _this2 = this,\n        _this$editor2;\n      var touches = e.touches || [e];\n      this.isTransforming = false;\n      // 结束元素操作时对当前属性栏更新（如果有的话）\n      this.editor.control.updateAttribute();\n      touches.forEach(function (touch) {\n        _this2.touchPoints[\"delete\"](touch.identifier);\n      });\n      var remainingTouches = Array.from(this.touchPoints.values());\n      var stageManager = (_this$editor2 = this.editor) === null || _this$editor2 === void 0 ? void 0 : _this$editor2.stageManager;\n      if (stageManager) {\n        stageManager.stopDragging();\n      }\n      if (remainingTouches.length < 2) {\n        this.isPinching = false;\n      }\n      if (remainingTouches.length === 0) {\n        this.isDraggingComponent = false;\n      }\n    }\n  }, {\n    key: \"handleControlPointClick\",\n    value: function handleControlPointClick(position, targetElement, globalPos) {\n      this.selectComponent(targetElement);\n      switch (position) {\n        case 'topRight':\n          this.deleteSelectedComponent();\n          break;\n        case 'topLeft':\n          console.log('左上角控制点：操作层级');\n          break;\n        case 'bottomLeft':\n          console.log('左下角控制点：复制元素');\n          break;\n        case 'bottomRight':\n          this.firstTransformDone = false;\n          this.startTransforming(globalPos);\n          break;\n        default:\n          console.log(\"\\u672A\\u5B9A\\u4E49\".concat(position, \"\\u63A7\\u5236\\u70B9\\u884C\\u4E3A\"));\n      }\n    }\n  }, {\n    key: \"startTransforming\",\n    value: function startTransforming(globalPos) {\n      var _this3 = this;\n      if (!this.selectedComponent) return;\n      this.isTransforming = true;\n      var stageManager = this.editor.stageManager;\n      var stagePos = stageManager.screenToStage(globalPos.x, globalPos.y);\n      var _this$selectedCompone4 = this.selectedComponent,\n        centerX = _this$selectedCompone4.x,\n        centerY = _this$selectedCompone4.y,\n        rotation = _this$selectedCompone4.rotation,\n        scale = _this$selectedCompone4.scale;\n      var control = this.editor.control;\n      var linkScale = this.selectedComponent.name === 'shape-container' ? control.vueInstance.links.shapeLinkScale : this.selectedComponent.name === 'icon-container' ? control.vueInstance.links.iconLinkScale : true;\n\n      // 区分不同组件类型，获取尺寸信息\n      var contentElement = null;\n      var initialWidth,\n        initialHeight,\n        originalFontSize = null;\n      if (this.selectedComponent.name === 'box-container') {\n        var bounds = this.selectedComponent.bounds;\n        if (!bounds) {\n          console.error('复合组件未初始化bounds！');\n          return;\n        }\n        var currentScale = this.selectedComponent.scale.x || 1;\n        initialWidth = bounds.width * currentScale;\n        initialHeight = bounds.height * currentScale;\n        contentElement = this.selectedComponent;\n      } else if (this.selectedComponent.name === 'icon-container') {\n        contentElement = this.selectedComponent.children.find(function (x) {\n          return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this3.selectedComponent.name];\n        });\n        if (!contentElement) return;\n        initialWidth = contentElement.width || 24;\n        initialHeight = contentElement.height || 24;\n      } else if (this.selectedComponent.name === 'image-container') {\n        contentElement = this.selectedComponent.children.find(function (x) {\n          return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this3.selectedComponent.name];\n        });\n        if (!contentElement) return;\n        initialWidth = contentElement.width || 200;\n        initialHeight = contentElement.height || 200;\n      } else {\n        contentElement = this.selectedComponent.children.find(function (x) {\n          return x.name === _config_js__WEBPACK_IMPORTED_MODULE_0__.elementKeyMap[_this3.selectedComponent.name];\n        });\n        if (!contentElement) return;\n        initialWidth = contentElement.width || 100;\n        initialHeight = contentElement.height || 100;\n        originalFontSize = contentElement.name === 'text' ? contentElement.style.fontSize : null;\n      }\n      var dx = stagePos.x - centerX;\n      var dy = stagePos.y - centerY;\n      this.transformStart = {\n        centerX: centerX,\n        centerY: centerY,\n        rotation: rotation,\n        // 记录初始旋转角度（不再更新）\n        width: initialWidth,\n        height: initialHeight,\n        originalFontSize: originalFontSize,\n        distance: Math.sqrt(dx * dx + dy * dy),\n        angle: Math.atan2(dy, dx),\n        // 仅用于初始方向判断\n        contentElement: contentElement,\n        componentType: this.selectedComponent.name,\n        linkScale: linkScale,\n        startX: globalPos.x,\n        startY: globalPos.y\n      };\n    }\n  }, {\n    key: \"handleTransforming\",\n    value: function handleTransforming(globalPos) {\n      if (!this.isTransforming || !this.selectedComponent) return;\n      var _this$transformStart = this.transformStart,\n        centerX = _this$transformStart.centerX,\n        centerY = _this$transformStart.centerY,\n        initialRotation = _this$transformStart.rotation,\n        initialWidth = _this$transformStart.width,\n        initialHeight = _this$transformStart.height,\n        initialDistance = _this$transformStart.distance,\n        initialAngle = _this$transformStart.angle,\n        contentElement = _this$transformStart.contentElement,\n        originalFontSize = _this$transformStart.originalFontSize,\n        componentType = _this$transformStart.componentType,\n        linkScale = _this$transformStart.linkScale;\n      var stageManager = this.editor.stageManager;\n      var stagePos = stageManager.screenToStage(globalPos.x, globalPos.y);\n      var element = this.selectedComponent;\n      var _this$getComponentDra2 = this.getComponentDragBounds(),\n        minX = _this$getComponentDra2.minX,\n        maxX = _this$getComponentDra2.maxX,\n        minY = _this$getComponentDra2.minY,\n        maxY = _this$getComponentDra2.maxY;\n\n      // 核心修改：移除旋转，固定角度为初始值\n      var newRotation = initialRotation; // 不再计算角度变化\n      var rad = newRotation; // 始终使用初始旋转角度\n      var cos = Math.abs(Math.cos(rad));\n      var sin = Math.abs(Math.sin(rad));\n\n      // 计算拖拽距离（仅用于缩放比例，不影响角度）\n      var currentDx = stagePos.x - centerX;\n      var currentDy = stagePos.y - centerY;\n      var currentDistance = Math.sqrt(currentDx * currentDx + currentDy * currentDy);\n      var currentAngle = Math.atan2(currentDy, currentDx); // 仅用于方向判断\n\n      if (componentType === 'box-container') {\n        if (!this.firstTransformDone) {\n          this.lastTransformDistance = currentDistance;\n          this.firstTransformDone = true;\n          return;\n        }\n        // 仅保留缩放，移除旋转影响\n        var delta = currentDistance - this.lastTransformDistance;\n        this.lastTransformDistance = currentDistance;\n        var scaleStep = delta * 0.005;\n        var currentScale = element.scale.x || 1;\n        var newScale = Math.max(0.2, Math.min(currentScale + scaleStep, 4));\n\n        // 边界检查（基于初始旋转角度）\n        var bounds = element.bounds || {\n          width: initialWidth,\n          height: initialHeight\n        };\n        var halfW = bounds.width / 2;\n        var halfH = bounds.height / 2;\n        var checkOutOfBounds = function checkOutOfBounds(scale) {\n          var vertices = [{\n            x: element.x + (-halfW * scale * cos - halfH * scale * sin),\n            y: element.y + (-halfW * scale * sin + halfH * scale * cos)\n          }, {\n            x: element.x + (halfW * scale * cos - halfH * scale * sin),\n            y: element.y + (halfW * scale * sin + halfH * scale * cos)\n          }, {\n            x: element.x + (halfW * scale * cos + halfH * scale * sin),\n            y: element.y + (halfW * scale * sin - halfH * scale * cos)\n          }, {\n            x: element.x + (-halfW * scale * cos + halfH * scale * sin),\n            y: element.y + (-halfW * scale * sin - halfH * scale * cos)\n          }];\n          return vertices.some(function (v) {\n            return v.x < minX || v.x > maxX || v.y < minY || v.y > maxY;\n          });\n        };\n        var isOutOfBounds = checkOutOfBounds(newScale);\n        if (isOutOfBounds) {\n          while (isOutOfBounds && newScale > 0.2) {\n            newScale -= 0.02;\n            isOutOfBounds = checkOutOfBounds(newScale);\n          }\n        }\n\n        // 应用缩放（不修改旋转）\n        element.scale.x = newScale;\n        element.scale.y = newScale;\n        // 固定旋转角度（不再更新）\n        element.rotation = newRotation;\n\n        // 位置微调\n        var finalVertices = [{\n          x: element.x + (-halfW * newScale * cos - halfH * newScale * sin),\n          y: element.y + (-halfW * newScale * sin + halfH * newScale * cos)\n        }, {\n          x: element.x + (halfW * newScale * cos - halfH * newScale * sin),\n          y: element.y + (halfW * newScale * sin + halfH * newScale * cos)\n        }, {\n          x: element.x + (halfW * newScale * cos + halfH * newScale * sin),\n          y: element.y + (halfW * newScale * sin - halfH * newScale * cos)\n        }, {\n          x: element.x + (-halfW * newScale * cos + halfH * newScale * sin),\n          y: element.y + (-halfW * newScale * sin - halfH * newScale * cos)\n        }];\n        finalVertices.forEach(function (v) {\n          if (v.x < minX) element.x += minX - v.x;\n          if (v.x > maxX) element.x += maxX - v.x;\n          if (v.y < minY) element.y += minY - v.y;\n          if (v.y > maxY) element.y += maxY - v.y;\n        });\n        var finalWidth = bounds.width * newScale;\n        var finalHeight = bounds.height * newScale;\n        this.updateSelectorSize(element.selector, finalWidth, finalHeight);\n      } else if (componentType === 'shape-container') {\n        var _contentElement$userD, _contentElement$userD2, _contentElement$userD3, _contentElement$userD4;\n        var rawScaleRatio = currentDistance / initialDistance;\n\n        // 最大缩放限制（基于初始旋转角度）\n        var halfInitialW = initialWidth / 2;\n        var halfInitialH = initialHeight / 2;\n        var requiredWidthPerScale = 2 * (halfInitialW * cos + halfInitialH * sin);\n        var requiredHeightPerScale = 2 * (halfInitialW * sin + halfInitialH * cos);\n        var maxAvailableWidth = maxX - minX;\n        var maxAvailableHeight = maxY - minY;\n        var maxScaleByWidth = maxAvailableWidth / requiredWidthPerScale * 0.95;\n        var maxScaleByHeight = maxAvailableHeight / requiredHeightPerScale * 0.95;\n        var hardScaleLimit = Math.min(maxScaleByWidth, maxScaleByHeight, 5);\n\n        // 平滑缩放\n        var finalScaleRatio;\n        if (rawScaleRatio <= hardScaleLimit) {\n          finalScaleRatio = rawScaleRatio;\n        } else {\n          var excess = rawScaleRatio - hardScaleLimit;\n          var smoothFactor = 1 / (1 + excess * 2);\n          finalScaleRatio = hardScaleLimit + (rawScaleRatio - hardScaleLimit) * smoothFactor;\n          finalScaleRatio = Math.min(finalScaleRatio, hardScaleLimit * 1.05);\n        }\n        var newWidth, newHeight;\n        if (linkScale) {\n          // 等比例缩放（仅宽高变化）\n          newWidth = Math.max(50, initialWidth * finalScaleRatio);\n          newHeight = Math.max(50, initialHeight * finalScaleRatio);\n        } else {\n          // 1. 基础宽高计算（带敏感度）\n          var _this$transformStart2 = this.transformStart,\n            startX = _this$transformStart2.startX,\n            startY = _this$transformStart2.startY;\n          var originalWidth = initialWidth;\n          var originalHeight = initialHeight;\n          var dragX = globalPos.x - startX;\n          var dragY = globalPos.y - startY;\n          var baseWidth = Math.max(10, originalWidth + dragX * 0.5);\n          var baseHeight = Math.max(10, originalHeight + dragY * 0.5);\n\n          // 2. 计算最大允许宽高（基于边界的绝对限制）\n          var calculateMaxAllowedSize = function calculateMaxAllowedSize() {\n            // 先假设宽高为基础值，计算顶点\n            var w = baseWidth;\n            var h = baseHeight;\n            var maxIterations = 30; // 最多迭代30次\n            var shrinkStep = 0.97; // 每次缩小3%（比之前更激进，确保能收进边界）\n\n            for (var i = 0; i < maxIterations; i++) {\n              var _halfW = w / 2;\n              var _halfH = h / 2;\n              // 计算旋转后的四个顶点（世界坐标）\n              var vertices = [{\n                x: element.x + (-_halfW * cos - _halfH * sin),\n                y: element.y + (-_halfW * sin + _halfH * cos)\n              }, {\n                x: element.x + (_halfW * cos - _halfH * sin),\n                y: element.y + (_halfW * sin + _halfH * cos)\n              }, {\n                x: element.x + (_halfW * cos + _halfH * sin),\n                y: element.y + (_halfW * sin - _halfH * cos)\n              }, {\n                x: element.x + (-_halfW * cos + _halfH * sin),\n                y: element.y + (-_halfW * sin - _halfH * cos)\n              }];\n\n              // 检查是否超出边界（严格判断）\n              var _isOutOfBounds = vertices.some(function (v) {\n                return v.x < minX || v.x > maxX || v.y < minY || v.y > maxY;\n              });\n              if (!_isOutOfBounds) break; // 已在边界内，退出\n\n              // 仍超出则缩小宽高（按比例缩小，保持用户拖拽意图）\n              w = Math.max(10, w * shrinkStep);\n              h = Math.max(10, h * shrinkStep);\n            }\n            return {\n              w: w,\n              h: h\n            };\n          };\n\n          // 应用最大允许尺寸\n          var _calculateMaxAllowedS = calculateMaxAllowedSize(),\n            limitedWidth = _calculateMaxAllowedS.w,\n            limitedHeight = _calculateMaxAllowedS.h;\n          newWidth = limitedWidth;\n          newHeight = limitedHeight;\n        }\n\n        // 固定旋转角度\n        element.rotation = newRotation;\n\n        // 3. 强制位置约束（即使尺寸调整后仍可能偏移，再次修正）\n        var _halfW2 = newWidth / 2;\n        var _halfH2 = newHeight / 2;\n        // 计算最终顶点（基于调整后的尺寸）\n        var _finalVertices = [{\n          x: element.x + (-_halfW2 * cos - _halfH2 * sin),\n          y: element.y + (-_halfW2 * sin + _halfH2 * cos)\n        }, {\n          x: element.x + (_halfW2 * cos - _halfH2 * sin),\n          y: element.y + (_halfW2 * sin + _halfH2 * cos)\n        }, {\n          x: element.x + (_halfW2 * cos + _halfH2 * sin),\n          y: element.y + (_halfW2 * sin - _halfH2 * cos)\n        }, {\n          x: element.x + (-_halfW2 * cos + _halfH2 * sin),\n          y: element.y + (-_halfW2 * sin - _halfH2 * cos)\n        }];\n\n        // 计算顶点的边界极值\n        var vertexMinX = Math.min.apply(Math, _toConsumableArray(_finalVertices.map(function (v) {\n          return v.x;\n        })));\n        var vertexMaxX = Math.max.apply(Math, _toConsumableArray(_finalVertices.map(function (v) {\n          return v.x;\n        })));\n        var vertexMinY = Math.min.apply(Math, _toConsumableArray(_finalVertices.map(function (v) {\n          return v.y;\n        })));\n        var vertexMaxY = Math.max.apply(Math, _toConsumableArray(_finalVertices.map(function (v) {\n          return v.y;\n        })));\n\n        // 强制将顶点约束在边界内（直接调整元素位置）\n        var finalX = element.x;\n        var finalY = element.y;\n        // X方向修正\n        if (vertexMinX < minX) finalX += minX - vertexMinX;\n        if (vertexMaxX > maxX) finalX += maxX - vertexMaxX;\n        // Y方向修正\n        if (vertexMinY < minY) finalY += minY - vertexMinY;\n        if (vertexMaxY > maxY) finalY += maxY - vertexMaxY;\n\n        // 应用修正后的位置\n        element.x = finalX;\n        element.y = finalY;\n\n        // 形状绘制（保持不变）\n        var shapeType = ((_contentElement$userD = contentElement.userData) === null || _contentElement$userD === void 0 ? void 0 : _contentElement$userD.shapeType) || \"rect\";\n        var radius = ((_contentElement$userD2 = contentElement.userData) === null || _contentElement$userD2 === void 0 ? void 0 : _contentElement$userD2.radius) || 0;\n        var colorType = ((_contentElement$userD3 = contentElement.userData) === null || _contentElement$userD3 === void 0 ? void 0 : _contentElement$userD3.colorType) || \"Solid\";\n        var gradientData = (_contentElement$userD4 = contentElement.userData) === null || _contentElement$userD4 === void 0 ? void 0 : _contentElement$userD4.gradient;\n        contentElement.clear();\n        while (contentElement.children.length > 0) {\n          contentElement.removeChildAt(0);\n        }\n        if (colorType === \"Solid\") {\n          var _contentElement$fillS;\n          contentElement.beginFill((_contentElement$fillS = contentElement.fillStyle) === null || _contentElement$fillS === void 0 ? void 0 : _contentElement$fillS.color);\n          switch (shapeType) {\n            case \"rect\":\n            case \"rectangle\":\n              contentElement.drawRoundedRect(-newWidth / 2, -newHeight / 2, newWidth, newHeight, radius);\n              break;\n            case \"circle\":\n              contentElement.drawCircle(0, 0, newWidth / 2);\n              break;\n            case \"triangle\":\n              contentElement.drawPolygon([0, -newHeight / 2, newWidth / 2, newHeight / 2, -newWidth / 2, newHeight / 2]);\n              break;\n          }\n          contentElement.endFill();\n        } else {\n          var canvas = document.createElement('canvas');\n          canvas.width = newWidth;\n          canvas.height = newHeight;\n          var ctx = canvas.getContext('2d');\n          if (ctx) {\n            var _centerX = newWidth / 2;\n            var _centerY = newHeight / 2;\n            var maxRadius = Math.max(newWidth, newHeight) / 2;\n            var gradient;\n            try {\n              if (gradientData.isLinear) {\n                var _startX = gradientData.gradientParams.startX || -_centerX;\n                var _startY = gradientData.gradientParams.startY || 0;\n                var endX = gradientData.gradientParams.endX || _centerX;\n                var endY = gradientData.gradientParams.endY || 0;\n                gradient = ctx.createLinearGradient(_startX, _startY, endX, endY);\n              } else {\n                var innerX = gradientData.gradientParams.innerX || 0;\n                var innerY = gradientData.gradientParams.innerY || 0;\n                var innerRadius = Math.max(0, gradientData.gradientParams.innerRadius || 0);\n                var outerX = gradientData.gradientParams.outerX || 0;\n                var outerY = gradientData.gradientParams.outerY || 0;\n                var outerRadius = Math.min(maxRadius, gradientData.gradientParams.outerRadius || maxRadius);\n                gradient = ctx.createRadialGradient(innerX, innerY, innerRadius, outerX, outerY, outerRadius);\n              }\n            } catch (e) {\n              console.error(\"缩放时创建渐变失败:\", e);\n              return;\n            }\n            gradientData.colorStops.forEach(function (stop, index) {\n              try {\n                var offset = Math.max(0, Math.min(1, Number(stop.position) / 100 || 0));\n                var colorStr = stop.color;\n                if (typeof colorStr === 'number') {\n                  var hex = colorStr.toString(16).padStart(colorStr > 0xffffff ? 8 : 6, '0');\n                  var r = parseInt(hex.slice(0, 2), 16);\n                  var g = parseInt(hex.slice(2, 4), 16);\n                  var b = parseInt(hex.slice(4, 6), 16);\n                  colorStr = hex.length === 8 ? \"rgba(\".concat(r, \", \").concat(g, \", \").concat(b, \", \").concat(parseInt(hex.slice(6, 8), 16) / 255, \")\") : \"rgb(\".concat(r, \", \").concat(g, \", \").concat(b, \")\");\n                }\n                gradient.addColorStop(offset, colorStr);\n              } catch (e) {\n                console.error(\"\\u7F29\\u653E\\u65F6\\u5904\\u7406\\u989C\\u8272\\u8282\\u70B9\\u5931\\u8D25:\", e);\n              }\n            });\n            ctx.save();\n            ctx.translate(_centerX, _centerY);\n            switch (shapeType) {\n              case \"rect\":\n                ctx.beginPath();\n                ctx.roundRect(-newWidth / 2, -newHeight / 2, newWidth, newHeight, radius);\n                break;\n              case \"circle\":\n                ctx.beginPath();\n                ctx.arc(0, 0, newWidth / 2, 0, Math.PI * 2);\n                break;\n              case \"triangle\":\n                ctx.beginPath();\n                ctx.moveTo(0, -newHeight / 2);\n                ctx.lineTo(newWidth / 2, newHeight / 2);\n                ctx.lineTo(-newWidth / 2, newHeight / 2);\n                ctx.closePath();\n                break;\n            }\n            ctx.clip();\n            ctx.fillStyle = gradient;\n            ctx.fillRect(-newWidth / 2, -newHeight / 2, newWidth, newHeight);\n            ctx.restore();\n            var texture = PIXI.Texture.from(canvas);\n            var gradientSprite = new PIXI.Sprite(texture);\n            gradientSprite.anchor.set(0.5);\n            gradientSprite.width = newWidth;\n            gradientSprite.height = newHeight;\n            contentElement.addChild(gradientSprite);\n            contentElement.lineStyle(0);\n            contentElement.beginFill(0x000000, 0);\n            switch (shapeType) {\n              case \"rect\":\n                contentElement.drawRoundedRect(-newWidth / 2, -newHeight / 2, newWidth, newHeight, radius);\n                break;\n              case \"circle\":\n                contentElement.drawCircle(0, 0, newWidth / 2);\n                break;\n              case \"triangle\":\n                contentElement.drawPolygon([0, -newHeight / 2, newWidth / 2, newHeight / 2, -newWidth / 2, newHeight / 2]);\n                break;\n            }\n            contentElement.endFill();\n          }\n        }\n        contentElement.width = newWidth;\n        contentElement.height = newHeight;\n        contentElement.userData = _objectSpread(_objectSpread({}, contentElement.userData), {}, {\n          shapeType: shapeType,\n          radius: shapeType === \"circle\" ? newWidth / 2 : radius\n        });\n        this.updateSelectorSize(element.selector, newWidth, newHeight);\n      } else if (componentType === 'image-container') {\n        var _rawScaleRatio = currentDistance / initialDistance;\n\n        // 最大缩放限制\n        var _halfInitialW = initialWidth / 2;\n        var _halfInitialH = initialHeight / 2;\n        var _requiredWidthPerScale = 2 * (_halfInitialW * cos + _halfInitialH * sin);\n        var _requiredHeightPerScale = 2 * (_halfInitialW * sin + _halfInitialH * cos);\n        var _maxAvailableWidth = maxX - minX;\n        var _maxAvailableHeight = maxY - minY;\n        var _maxScaleByWidth = _maxAvailableWidth / _requiredWidthPerScale * 0.95;\n        var _maxScaleByHeight = _maxAvailableHeight / _requiredHeightPerScale * 0.95;\n        var _hardScaleLimit = Math.min(_maxScaleByWidth, _maxScaleByHeight, 5);\n\n        // 平滑缩放\n        var _finalScaleRatio;\n        if (_rawScaleRatio <= _hardScaleLimit) {\n          _finalScaleRatio = _rawScaleRatio;\n        } else {\n          var _excess = _rawScaleRatio - _hardScaleLimit;\n          var _smoothFactor = 1 / (1 + _excess * 2);\n          _finalScaleRatio = _hardScaleLimit + (_rawScaleRatio - _hardScaleLimit) * _smoothFactor;\n          _finalScaleRatio = Math.min(_finalScaleRatio, _hardScaleLimit * 1.05);\n        }\n\n        // 仅宽高变化，旋转固定\n        var _newWidth = Math.max(30, initialWidth * _finalScaleRatio);\n        var _newHeight = Math.max(30, initialHeight * _finalScaleRatio);\n        element.rotation = newRotation;\n\n        // 位置修正\n        var getBoundingRect = function getBoundingRect(w, h, rot, x, y) {\n          var halfW = w / 2;\n          var halfH = h / 2;\n          var rectW = halfW * cos + halfH * sin;\n          var rectH = halfW * sin + halfH * cos;\n          return {\n            left: x - rectW,\n            right: x + rectW,\n            bottom: y - rectH,\n            top: y + rectH\n          };\n        };\n        var _finalX = element.x;\n        var _finalY = element.y;\n        var _bounds = getBoundingRect(_newWidth, _newHeight, newRotation, _finalX, _finalY);\n        if (_bounds.left < minX) _finalX = minX + (_bounds.right - _bounds.left) / 2;\n        if (_bounds.right > maxX) _finalX = maxX - (_bounds.right - _bounds.left) / 2;\n        if (_bounds.bottom < minY) _finalY = minY + (_bounds.top - _bounds.bottom) / 2;\n        if (_bounds.top > maxY) _finalY = maxY - (_bounds.top - _bounds.bottom) / 2;\n        element.x = _finalX;\n        element.y = _finalY;\n        contentElement.width = _newWidth;\n        contentElement.height = _newHeight;\n        this.updateSelectorSize(element.selector, _newWidth, _newHeight);\n      } else if (componentType === 'icon-container') {\n        var _rawScaleRatio2 = currentDistance / initialDistance;\n\n        // 最大缩放限制\n        var _halfInitialW2 = initialWidth / 2;\n        var _halfInitialH2 = initialHeight / 2;\n        var _requiredWidthPerScale2 = 2 * (_halfInitialW2 * cos + _halfInitialH2 * sin);\n        var _requiredHeightPerScale2 = 2 * (_halfInitialW2 * sin + _halfInitialH2 * cos);\n        var _maxAvailableWidth2 = maxX - minX;\n        var _maxAvailableHeight2 = maxY - minY;\n        var _maxScaleByWidth2 = _maxAvailableWidth2 / _requiredWidthPerScale2 * 0.95;\n        var _maxScaleByHeight2 = _maxAvailableHeight2 / _requiredHeightPerScale2 * 0.95;\n        var _hardScaleLimit2 = Math.min(_maxScaleByWidth2, _maxScaleByHeight2, 5);\n\n        // 平滑缩放\n        var _finalScaleRatio2;\n        if (_rawScaleRatio2 <= _hardScaleLimit2) {\n          _finalScaleRatio2 = _rawScaleRatio2;\n        } else {\n          var _excess2 = _rawScaleRatio2 - _hardScaleLimit2;\n          var _smoothFactor2 = 1 / (1 + _excess2 * 2);\n          _finalScaleRatio2 = _hardScaleLimit2 + (_rawScaleRatio2 - _hardScaleLimit2) * _smoothFactor2;\n          _finalScaleRatio2 = Math.min(_finalScaleRatio2, _hardScaleLimit2 * 1.05);\n        }\n\n        // 仅宽高变化，旋转固定\n        var _newWidth2, _newHeight2;\n        if (linkScale) {\n          // 等比例缩放（仅宽高变化）\n          _newWidth2 = Math.max(22, initialWidth * _finalScaleRatio2);\n          _newHeight2 = Math.max(22, initialHeight * _finalScaleRatio2);\n        } else {\n          // 1. 取初始触摸位置和元素原始宽高\n          var _this$transformStart3 = this.transformStart,\n            _startX2 = _this$transformStart3.startX,\n            _startY2 = _this$transformStart3.startY;\n          var _originalWidth = initialWidth;\n          var _originalHeight = initialHeight;\n\n          // 2. 计算拖拽偏移（水平/垂直移动了多少像素）\n          var _dragX = globalPos.x - _startX2; // 正数=右拖，负数=左拖\n          var _dragY = globalPos.y - _startY2; // 正数=下拖，负数=上拖\n\n          // 3. 直接用偏移量改宽高（敏感度0.5：拖10像素，宽高变5）\n          _newWidth2 = Math.max(22, _originalWidth + _dragX * 0.5);\n          _newHeight2 = Math.max(22, _originalHeight + _dragY * 0.5);\n        }\n        element.rotation = newRotation;\n\n        // 位置修正\n        var _getBoundingRect = function _getBoundingRect(w, h, rot, x, y) {\n          var halfW = w / 2;\n          var halfH = h / 2;\n          var rectW = halfW * cos + halfH * sin;\n          var rectH = halfW * sin + halfH * cos;\n          return {\n            left: x - rectW,\n            right: x + rectW,\n            bottom: y - rectH,\n            top: y + rectH\n          };\n        };\n        var _finalX2 = element.x;\n        var _finalY2 = element.y;\n        var _bounds2 = _getBoundingRect(_newWidth2, _newHeight2, newRotation, _finalX2, _finalY2);\n        if (_bounds2.left < minX) _finalX2 = minX + (_bounds2.right - _bounds2.left) / 2;\n        if (_bounds2.right > maxX) _finalX2 = maxX - (_bounds2.right - _bounds2.left) / 2;\n        if (_bounds2.bottom < minY) _finalY2 = minY + (_bounds2.top - _bounds2.bottom) / 2;\n        if (_bounds2.top > maxY) _finalY2 = maxY - (_bounds2.top - _bounds2.bottom) / 2;\n        element.x = _finalX2;\n        element.y = _finalY2;\n        contentElement.width = _newWidth2;\n        contentElement.height = _newHeight2;\n        this.updateSelectorSize(element.selector, _newWidth2, _newHeight2);\n      } else if (componentType === 'text-container') {\n        var _rawScaleRatio3 = currentDistance / initialDistance;\n\n        // 字体缩放（仅大小变化）\n        var baseRatio = _rawScaleRatio3 - 1;\n        var smoothRatio = baseRatio * (Math.abs(baseRatio) + 1);\n        var sensitivity = 1.5;\n        var fontScaleRatio = 1 + smoothRatio * sensitivity;\n        var newFontSize = Math.max(14, Math.min(100, originalFontSize * fontScaleRatio));\n        contentElement.style.fontSize = newFontSize;\n        element.setFontSize(contentElement.style.fontSize);\n\n        // 旋转固定\n        var _newWidth3 = contentElement.width;\n        var _newHeight3 = contentElement.height;\n        element.rotation = newRotation;\n\n        // 位置修正\n        var _getBoundingRect2 = function _getBoundingRect2(w, h, rot, x, y) {\n          var halfW = w / 2;\n          var halfH = h / 2;\n          var rectW = halfW * cos + halfH * sin;\n          var rectH = halfW * sin + halfH * cos;\n          return {\n            left: x - rectW,\n            right: x + rectW,\n            bottom: y - rectH,\n            top: y + rectH\n          };\n        };\n        var _finalX3 = element.x;\n        var _finalY3 = element.y;\n        var _bounds3 = _getBoundingRect2(_newWidth3, _newHeight3, newRotation, _finalX3, _finalY3);\n        if (_bounds3.left < minX) _finalX3 = minX + (_bounds3.right - _bounds3.left) / 2;\n        if (_bounds3.right > maxX) _finalX3 = maxX - (_bounds3.right - _bounds3.left) / 2;\n        if (_bounds3.bottom < minY) _finalY3 = minY + (_bounds3.top - _bounds3.bottom) / 2;\n        if (_bounds3.top > maxY) _finalY3 = maxY - (_bounds3.top - _bounds3.bottom) / 2;\n        element.x = _finalX3;\n        element.y = _finalY3;\n        this.updateSelectorSize(element.selector, _newWidth3, _newHeight3);\n      }\n      this.updateElementHitArea(element);\n      this.syncEditBox(element.selector, element);\n      this.editor.render();\n    }\n\n    // 更新编辑框尺寸\n  }, {\n    key: \"updateSelectorSize\",\n    value: function updateSelectorSize(selector, width, height) {\n      var _selector$userData, _selector$userData$ta, _selector$userData2;\n      if (!selector) return;\n\n      // 移除旧线框\n      selector.children.forEach(function (child) {\n        var _child$userData4;\n        if (child instanceof PIXI.Graphics && !((_child$userData4 = child.userData) !== null && _child$userData4 !== void 0 && _child$userData4.isControlPoint)) {\n          selector.removeChild(child);\n        }\n      });\n      var lineWidth = 1;\n      var padding = 8;\n      var isText = ((_selector$userData = selector.userData) === null || _selector$userData === void 0 ? void 0 : _selector$userData.isText) || false;\n      var anchorX = (_selector$userData$ta = (_selector$userData2 = selector.userData) === null || _selector$userData2 === void 0 || (_selector$userData2 = _selector$userData2.target) === null || _selector$userData2 === void 0 || (_selector$userData2 = _selector$userData2.userData) === null || _selector$userData2 === void 0 ? void 0 : _selector$userData2.alignX) !== null && _selector$userData$ta !== void 0 ? _selector$userData$ta : 0.5;\n      var anchorY = 0.5;\n\n      // 完全复用createSelector的边界计算逻辑\n      var elemLeft, elemTop, elemRight, elemBottom;\n      if (isText) {\n        elemLeft = -anchorX * width;\n        elemTop = -anchorY * height;\n        elemRight = elemLeft + width;\n        elemBottom = elemTop + height;\n      } else {\n        elemLeft = -width / 2;\n        elemTop = -height / 2;\n        elemRight = width / 2;\n        elemBottom = height / 2;\n      }\n      var borderLeft = elemLeft - padding;\n      var borderTop = elemTop - padding;\n      var borderRight = elemRight + padding;\n      var borderBottom = elemBottom + padding;\n      var border = new PIXI.Graphics();\n      border.beginFill(0xFFFFFF);\n      border.drawRect(borderLeft, borderTop, borderRight - borderLeft, lineWidth);\n      border.drawRect(borderLeft, borderBottom - lineWidth, borderRight - borderLeft, lineWidth);\n      border.drawRect(borderLeft, borderTop + lineWidth, lineWidth, borderBottom - borderTop - 2 * lineWidth);\n      border.drawRect(borderRight - lineWidth, borderTop + lineWidth, lineWidth, borderBottom - borderTop - 2 * lineWidth);\n      border.endFill();\n      selector.addChildAt(border, 0);\n    }\n  }, {\n    key: \"updateElementHitArea\",\n    value: function updateElementHitArea(element) {\n      if (!element) return;\n\n      // 1. 区分普通元素和复合组件，计算点击区域\n      var hitWidth, hitHeight;\n      if (element.name === \"box-container\" && element.bounds) {\n        // 复合组件：使用整体边界的宽高（加边距）\n        var padding = 8;\n        hitWidth = element.bounds.width + padding * 2;\n        hitHeight = element.bounds.height + padding * 2;\n      } else {\n        // 普通元素：取特定子元素的尺寸（原有逻辑）\n        var contentElement = null;\n        element.children.forEach(function (child) {\n          if (element.name === 'shape-container' && child.name === 'shape' || element.name === 'text-container' && child.name === 'text' || element.name === 'icon-container' && child.name === 'icon' || element.name === 'image-container' && child.name === 'image') {\n            contentElement = child;\n          }\n        });\n        if (!contentElement) return;\n        var _padding = 8;\n        hitWidth = contentElement.width + _padding * 2;\n        hitHeight = contentElement.height + _padding * 2;\n      }\n\n      // 2. 创建与元素中心锚点对齐的hitArea（逻辑不变）\n      element.hitArea = new PIXI.Rectangle(-hitWidth / 2, -hitHeight / 2, hitWidth, hitHeight);\n\n      // 3. 复合组件特殊处理：允许子元素交互（但点击事件由容器统一处理）\n      if (element.name === \"box-container\") {\n        element.interactiveChildren = true; // 子元素可交互（如文本编辑）\n      } else {\n        element.interactiveChildren = false; // 普通元素禁用子元素干扰\n      }\n      element.interactive = true;\n    }\n  }, {\n    key: \"deleteSelectedComponent\",\n    value: function deleteSelectedComponent() {\n      if (this.selectedComponent) {\n        // 移除元素和对应的编辑框\n        this.editor.stage.removeChild(this.selectedComponent);\n        this.editContainer.removeChild(this.selectedComponent.selector);\n        this.selectComponent(null);\n        this.editor.control.setCurrentElement(null);\n        this.editor.render();\n      }\n    }\n  }]);\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ElementManager);\n\n//# sourceURL=webpack://screen-edit/./js/ElementManager.js?\n}");

/***/ }),

/***/ "./js/SliderTool.js":
/*!**************************!*\
  !*** ./js/SliderTool.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config.js */ \"./js/config.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar SliderTool = /*#__PURE__*/function () {\n  function SliderTool(sliderId) {\n    var initialPoints = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _classCallCheck(this, SliderTool);\n    this.slider = document.getElementById(sliderId);\n    this.points = initialPoints.length ? initialPoints : [{\n      value: 0,\n      color: '#FFFFFF'\n    }, {\n      value: 100,\n      color: '#000000'\n    }];\n    this.minPoints = 2;\n    this.selectedIndex = 0;\n    this.minGap = 0;\n    this.onUpdate = options.onUpdate;\n    this.onSelect = options.onSelect;\n    this.createSlider();\n    this.bindEvents();\n  }\n  return _createClass(SliderTool, [{\n    key: \"createSlider\",\n    value: function createSlider() {\n      var _this = this;\n      if (this.slider.noUiSlider) this.slider.noUiSlider.destroy();\n      noUiSlider.create(this.slider, {\n        start: this.points.map(function (p) {\n          return p.value;\n        }),\n        range: {\n          min: 0,\n          max: 100\n        },\n        connect: false,\n        behaviour: 'tap-drag',\n        snap: false,\n        tooltips: false\n      });\n      this.slider.noUiSlider.on('update', function (values) {\n        var _this$onUpdate;\n        var newValues = values.map(function (v) {\n          return parseFloat(v);\n        });\n        var isValid = true;\n        for (var i = 0; i < newValues.length; i++) {\n          var leftBound = i > 0 ? newValues[i - 1] + _this.minGap : 0;\n          var rightBound = i < newValues.length - 1 ? newValues[i + 1] - _this.minGap : 100;\n          if (newValues[i] < leftBound) {\n            newValues[i] = leftBound;\n            isValid = false;\n          } else if (newValues[i] > rightBound) {\n            newValues[i] = rightBound;\n            isValid = false;\n          }\n        }\n        if (!isValid) {\n          _this.slider.noUiSlider.set(newValues);\n        }\n        _this.points = _this.points.map(function (p, i) {\n          return _objectSpread(_objectSpread({}, p), {}, {\n            value: newValues[i]\n          });\n        });\n        (_this$onUpdate = _this.onUpdate) === null || _this$onUpdate === void 0 || _this$onUpdate.call(_this, _this.getAllPoints());\n      });\n      this.updateHandleColors();\n      this.selectHandle(this.selectedIndex);\n      this.bindDragEvents();\n      this.updateButtons();\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n      if (this.slider.noUiSlider) {\n        this.slider.noUiSlider.destroy();\n      }\n      document.querySelectorAll('.noUi-handle').forEach(function (handle) {\n        handle.removeEventListener('mousedown', _this2.handleDragStart);\n        handle.removeEventListener('touchstart', _this2.handleDragStart);\n      });\n    }\n  }, {\n    key: \"bindDragEvents\",\n    value: function bindDragEvents() {\n      var _this3 = this;\n      document.querySelectorAll('.noUi-handle').forEach(function (handle) {\n        handle.removeEventListener('mousedown', _this3.handleDragStart);\n        handle.removeEventListener('touchstart', _this3.handleDragStart);\n      });\n      this.handleDragStart = function (e) {\n        e.preventDefault();\n        var index = Array.from(document.querySelectorAll('.noUi-handle')).indexOf(e.currentTarget);\n        if (index !== -1) _this3.selectHandle(index);\n      };\n      document.querySelectorAll('.noUi-handle').forEach(function (handle) {\n        handle.addEventListener('mousedown', _this3.handleDragStart);\n        handle.addEventListener('touchstart', _this3.handleDragStart);\n      });\n    }\n  }, {\n    key: \"updateHandleColors\",\n    value: function updateHandleColors() {\n      var _this4 = this;\n      document.querySelectorAll('.noUi-handle').forEach(function (handle, i) {\n        var _this4$points$i;\n        handle.style.backgroundColor = ((_this4$points$i = _this4.points[i]) === null || _this4$points$i === void 0 ? void 0 : _this4$points$i.color) || '#ffffff';\n      });\n    }\n  }, {\n    key: \"selectHandle\",\n    value: function selectHandle(index) {\n      var _this5 = this;\n      if (index < 0 || index >= this.points.length) return;\n      document.querySelectorAll('.noUi-handle').forEach(function (h) {\n        return h.classList.remove('selected');\n      });\n      var handles = document.querySelectorAll('.noUi-handle');\n      if (handles[index]) {\n        var _this$onSelect;\n        handles[index].classList.add('selected');\n        this.selectedIndex = index;\n        (_this$onSelect = this.onSelect) === null || _this$onSelect === void 0 || _this$onSelect.call(this, this.getSelectedPoint());\n        if (document.querySelector('.color-picker') && document.querySelector('#colorPicker')) {\n          document.querySelectorAll('.color-picker span, .color-picker button').forEach(function (x) {\n            x.classList.remove('icon-success');\n          });\n          setTimeout(function () {\n            if (_config_js__WEBPACK_IMPORTED_MODULE_0__.defaultPickColors.includes(_this5.points[_this5.selectedIndex].color)) {\n              document.querySelector(\".color-picker span[data-color=\\\"\".concat(_this5.points[_this5.selectedIndex].color, \"\\\"]\")).classList.add('icon-success');\n            } else {\n              document.querySelector(\".color-picker button\").classList.add('icon-success');\n            }\n          }, 10);\n        }\n      }\n    }\n  }, {\n    key: \"updateButtons\",\n    value: function updateButtons() {\n      document.getElementById('del').disabled = this.points.length <= this.minPoints;\n    }\n  }, {\n    key: \"bindEvents\",\n    value: function bindEvents() {\n      var _this6 = this;\n      document.getElementById('add').addEventListener('click', function () {\n        var currentValue = _this6.points[_this6.selectedIndex].value;\n        var leftBound = _this6.selectedIndex > 0 ? _this6.points[_this6.selectedIndex - 1].value + _this6.minGap : 0;\n        var rightBound = _this6.selectedIndex < _this6.points.length - 1 ? _this6.points[_this6.selectedIndex + 1].value - _this6.minGap : 100;\n        var newValue = Math.min(rightBound - _this6.minGap, Math.max(leftBound + _this6.minGap, currentValue + 5));\n        _this6.points.splice(_this6.selectedIndex + 1, 0, {\n          value: newValue,\n          color: '#ffffff'\n        });\n        _this6.createSlider();\n        _this6.selectHandle(_this6.selectedIndex + 1);\n      });\n      document.getElementById('del').addEventListener('click', function () {\n        if (_this6.points.length > _this6.minPoints) {\n          _this6.points.splice(_this6.selectedIndex, 1);\n          _this6.selectedIndex = Math.max(0, Math.min(_this6.selectedIndex - 1, _this6.points.length - 1));\n          _this6.createSlider();\n        }\n      });\n      this.slider.addEventListener('click', function (e) {\n        var handle = e.target.closest('.noUi-handle');\n        if (handle) {\n          var index = Array.from(document.querySelectorAll('.noUi-handle')).indexOf(handle);\n          if (index !== -1) _this6.selectHandle(index);\n        }\n      });\n    }\n  }, {\n    key: \"getSelectedPoint\",\n    value: function getSelectedPoint() {\n      return this.points[this.selectedIndex];\n    }\n  }, {\n    key: \"setSelectedPointColor\",\n    value: function setSelectedPointColor(color) {\n      if (this.selectedIndex >= 0 && this.selectedIndex < this.points.length) {\n        this.points[this.selectedIndex].color = color;\n        this.updateHandleColors();\n      }\n    }\n  }, {\n    key: \"getAllPoints\",\n    value: function getAllPoints() {\n      return _toConsumableArray(this.points);\n    }\n\n    // 简化后的 setAllPoints：直接赋值，仅保留必要的滑块更新逻辑\n  }, {\n    key: \"setAllPoints\",\n    value: function setAllPoints(points) {\n      // 直接赋值（不做任何验证）\n      this.points = points;\n\n      // 若点数变化，必须重建滑块才能更新手柄数量\n      var currentHandleCount = document.querySelectorAll('.noUi-handle').length;\n      if (this.points.length !== currentHandleCount) {\n        this.createSlider(); // 重建滑块以同步手柄数量\n      } else {\n        // 点数不变时，直接更新位置和UI\n        this.slider.noUiSlider.set(this.points.map(function (p) {\n          return p.value;\n        }));\n        this.updateHandleColors();\n        this.updateButtons();\n        this.selectedIndex = Math.max(0, Math.min(this.selectedIndex, this.points.length - 1));\n        this.selectHandle(this.selectedIndex);\n      }\n    }\n  }]);\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SliderTool);\n\n//# sourceURL=webpack://screen-edit/./js/SliderTool.js?\n}");

/***/ }),

/***/ "./js/StageManager.js":
/*!****************************!*\
  !*** ./js/StageManager.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar StageManager = /*#__PURE__*/function () {\n  function StageManager(editor) {\n    var _this = this;\n    _classCallCheck(this, StageManager);\n    this.editor = editor;\n    this.scale = this.isAppEmbedded() ? this.calcScaleByPageAndBaseWidth() : 1;\n    this.offsetX = 0;\n    this.offsetY = 0;\n    this.isDragging = false;\n    this.dragStart = {\n      x: 0,\n      y: 0,\n      offsetX: 0,\n      offsetY: 0\n    };\n    this.pinchStart = {\n      distance: 0,\n      scale: 1,\n      center: {\n        x: 0,\n        y: 0\n      },\n      offsetX: 0,\n      offsetY: 0\n    };\n    this.minScale = this.isAppEmbedded() ? this.calcScaleByPageAndBaseWidth() : 1;\n    this.maxScale = this.isAppEmbedded() ? this.calcScaleByPageAndBaseWidth() * 2 : 2;\n    this.handleResize = function () {\n      return _this.onWindowResize();\n    };\n    window.addEventListener('resize', this.handleResize);\n    setTimeout(function () {\n      return _this.initCenterPosition();\n    }, 0);\n  }\n  return _createClass(StageManager, [{\n    key: \"onWindowResize\",\n    value: function onWindowResize() {\n      this.scale = this.isAppEmbedded() ? this.calcScaleByPageAndBaseWidth() : 1;\n      this.minScale = this.isAppEmbedded() ? this.calcScaleByPageAndBaseWidth() : 1;\n      this.maxScale = this.isAppEmbedded() ? this.calcScaleByPageAndBaseWidth() * 2 : 2;\n      this.initCenterPosition();\n    }\n  }, {\n    key: \"calcScaleByPageAndBaseWidth\",\n    value: function calcScaleByPageAndBaseWidth() {\n      var currentPageWidth = window.innerWidth;\n      return currentPageWidth / this.editor.size.width;\n    }\n  }, {\n    key: \"isAppEmbedded\",\n    value: function isAppEmbedded() {\n      // 方案1：通过User-Agent判断（适用于App有特定UA标识）\n      var userAgent = navigator.userAgent.toLowerCase();\n      // 示例：如果App的UA包含\"myapp\"标识（需替换为实际App的UA特征）\n      var isAppUA = userAgent.includes('myapp') || userAgent.includes('appname');\n\n      // 方案2：通过父窗口或环境变量判断（适用于App通过webview注入标识）\n      var isAppEnv = window.__isAppEmbedded === true; // 假设App会注入此变量\n\n      // 方案3：通过屏幕尺寸辅助判断（H5通常在小屏设备，作为补充）\n      var isSmallScreen = window.innerWidth < 768;\n      var mobileRegex = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;\n      var isMobile = mobileRegex.test(navigator.userAgent);\n\n      // 综合判断：满足任一App特征即视为内嵌H5\n      return isAppUA || isAppEnv || isSmallScreen || isMobile;\n    }\n\n    // 1. 初始化中心位置（明确坐标基准）\n  }, {\n    key: \"initCenterPosition\",\n    value: function initCenterPosition() {\n      var _this$editor$canvasSi, _this$editor$canvasSi2;\n      // 1. 核心尺寸获取\n      var redBoxWidth = this.editor.size.width; // 红框宽度\n      var redBoxHeight = this.editor.size.height; // 红框高度\n      var redBoxHalfWidth = redBoxWidth / 2; // 红框半宽（X轴补偿用）\n      var stageCenterX = this.editor.stageSize.width / 2; // 舞台中心X\n      var stageCenterY = this.editor.stageSize.height / 2; // 舞台中心Y\n\n      // 2. XY轴补偿：Canvas实际宽高与红框宽高的差值一半\n      var canvasWidth = ((_this$editor$canvasSi = this.editor.canvasSize) === null || _this$editor$canvasSi === void 0 ? void 0 : _this$editor$canvasSi.width) || redBoxWidth;\n      var canvasHeight = ((_this$editor$canvasSi2 = this.editor.canvasSize) === null || _this$editor$canvasSi2 === void 0 ? void 0 : _this$editor$canvasSi2.height) || redBoxHeight;\n      var widthDiffCompensation = (canvasWidth - redBoxWidth) / 2;\n      var heightDiffCompensation = (canvasHeight - redBoxHeight) / 2;\n\n      // 3. 关键偏移计算：\n      this.offsetX = redBoxWidth / 2 - stageCenterX * this.scale + widthDiffCompensation;\n      this.offsetY = redBoxHeight / 2 - stageCenterY * this.scale + heightDiffCompensation;\n      this.applyStageTransform();\n    }\n  }, {\n    key: \"focusElement\",\n    value: function focusElement(element) {\n      var _element$children$;\n      if (!element || !this.editor) return;\n      if (element.parent && element.parent.name === 'box-container') element = element.parent;\n\n      // 1. 获取元素核心属性（包含自身缩放）\n      var elementX = element.x; // 元素中心X（舞台坐标系）\n      var elementY = element.y; // 元素中心Y（舞台坐标系）\n      var elementScaleY = element.scale.y || 1; // 元素自身Y轴缩放（默认1）\n      var originalHeight = element.height || ((_element$children$ = element.children[0]) === null || _element$children$ === void 0 ? void 0 : _element$children$.height) || 0; // 原始高度（未缩放）\n\n      // 计算元素实际显示高度（原始高度 × 自身缩放）\n      var actualElementHeight = originalHeight * elementScaleY;\n      // 元素中心到顶部的实际距离（实际高度的一半）\n      var actualHalfHeight = actualElementHeight / 2;\n\n      // 2. 获取画布/舞台尺寸\n      var canvasWidth = this.editor.canvasSize.width || this.editor.size.width;\n      var stageScale = this.scale; // 舞台缩放比例\n\n      // 3. X轴偏移（保持水平居中，不受元素缩放影响）\n      var targetOffsetX = canvasWidth / 2 - elementX * stageScale;\n\n      // 4. Y轴偏移（元素顶部对齐舞台顶部，关键修正）\n      // 元素顶部在舞台坐标系中的位置 = 元素中心Y - 实际半高\n      var elementTopYInStage = elementY - actualHalfHeight;\n      // 舞台偏移Y = 0（舞台顶部） - (元素顶部Y × 舞台缩放)\n      var targetOffsetY = 0 - elementTopYInStage * stageScale + 18 * this.scale;\n\n      // 5. 应用边界限制\n      var limitedOffsetX = this.limitOffsetX(targetOffsetX);\n      var limitedOffsetY = this.limitOffsetY(targetOffsetY);\n\n      // 6. 更新舞台并渲染\n      this.offsetX = limitedOffsetX;\n      this.offsetY = limitedOffsetY;\n      this.applyStageTransform();\n    }\n\n    // 2. 统一应用舞台变换（确保所有操作共用同一套更新逻辑）\n  }, {\n    key: \"applyStageTransform\",\n    value: function applyStageTransform() {\n      this.editor.stage.x = Math.round(this.offsetX);\n      this.editor.stage.y = Math.round(this.offsetY);\n      this.editor.stage.scale.set(this.scale);\n      this.editor.render();\n    }\n\n    // 3. 修复拖拽逻辑（基于屏幕坐标系的偏移累加）\n  }, {\n    key: \"startDragging\",\n    value: function startDragging(x, y) {\n      this.isDragging = true;\n      this.dragStart = {\n        x: x,\n        // 屏幕坐标起点\n        y: y,\n        offsetX: this.offsetX,\n        // 当前舞台偏移量\n        offsetY: this.offsetY\n      };\n    }\n  }, {\n    key: \"drag\",\n    value: function drag(x, y) {\n      if (!this.isDragging) return;\n\n      // 计算屏幕坐标系下的拖拽偏移（与初始化基准一致）\n      var deltaX = x - this.dragStart.x;\n      var deltaY = y - this.dragStart.y;\n\n      // 直接累加偏移，不引入额外缩放（拖拽是屏幕坐标系的平移）\n      this.offsetX = this.dragStart.offsetX + deltaX;\n      this.offsetY = this.dragStart.offsetY + deltaY;\n\n      // 应用边界限制\n      this.offsetX = this.limitOffsetX(this.offsetX);\n      this.offsetY = this.limitOffsetY(this.offsetY);\n      this.applyStageTransform();\n    }\n  }, {\n    key: \"stopDragging\",\n    value: function stopDragging() {\n      this.isDragging = false;\n    }\n\n    // 4. 修复双指缩放逻辑（保持缩放中心对齐）\n  }, {\n    key: \"startPinch\",\n    value: function startPinch(touches) {\n      if (touches.length !== 2) return;\n      var t1 = touches[0].global;\n      var t2 = touches[1].global;\n      if (!t1 || !t2) return;\n      this.pinchStart = {\n        distance: this.calcDistance(t1, t2),\n        scale: this.scale,\n        center: this.calcCenter(t1, t2),\n        // 屏幕坐标系下的缩放中心\n        offsetX: this.offsetX,\n        offsetY: this.offsetY\n      };\n    }\n  }, {\n    key: \"handlePinch\",\n    value: function handlePinch(touches) {\n      if (touches.length !== 2) return;\n      var t1 = touches[0].global;\n      var t2 = touches[1].global;\n      if (!t1 || !t2) return;\n\n      // 计算缩放比例\n      var currentDistance = this.calcDistance(t1, t2);\n      var scaleRatio = currentDistance / this.pinchStart.distance;\n      var newScale = this.pinchStart.scale * scaleRatio;\n      newScale = Math.max(this.minScale, Math.min(newScale, this.maxScale));\n\n      // 关键修复：基于屏幕坐标系计算缩放后的偏移\n      var currentCenter = this.calcCenter(t1, t2); // 当前双指中心（屏幕坐标）\n      var stageCenterAtPinchStart = {\n        // 缩放开始时，双指中心对应的舞台坐标\n        x: (this.pinchStart.center.x - this.pinchStart.offsetX) / this.pinchStart.scale,\n        y: (this.pinchStart.center.y - this.pinchStart.offsetY) / this.pinchStart.scale\n      };\n\n      // 缩放后，保持双指中心对应的舞台坐标不变\n      this.offsetX = currentCenter.x - stageCenterAtPinchStart.x * newScale;\n      this.offsetY = currentCenter.y - stageCenterAtPinchStart.y * newScale;\n      this.scale = newScale;\n\n      // 应用边界限制\n      this.offsetX = this.limitOffsetX(this.offsetX);\n      this.offsetY = this.limitOffsetY(this.offsetY);\n      this.applyStageTransform();\n    }\n  }, {\n    key: \"limitOffsetX\",\n    value: function limitOffsetX(offsetX) {\n      var redBoxWidth = this.editor.size.width;\n      var canvasWidth = this.editor.canvasSize.width || redBoxWidth;\n      var stageCenterX = this.editor.stageSize.width / 2;\n      var scale = this.scale;\n      var targetMargin = redBoxWidth * scale * 0.85;\n      var minOffset = -targetMargin - (stageCenterX - redBoxWidth / 2) * scale;\n      var maxOffset = canvasWidth + targetMargin - (stageCenterX + redBoxWidth / 2) * scale;\n      return Math.max(minOffset, Math.min(maxOffset, offsetX));\n    }\n  }, {\n    key: \"limitOffsetY\",\n    value: function limitOffsetY(offsetY) {\n      var redBoxHeight = this.editor.size.height;\n      var canvasHeight = this.editor.canvasSize.height || redBoxHeight;\n      var stageCenterY = this.editor.stageSize.height / 2;\n      var scale = this.scale;\n      var targetMargin = redBoxHeight * scale * 0.85;\n      var minOffset = -targetMargin - (stageCenterY - redBoxHeight / 2) * scale;\n      var maxOffset = canvasHeight + targetMargin - (stageCenterY + redBoxHeight / 2) * scale;\n      return Math.max(minOffset, Math.min(maxOffset, offsetY));\n    }\n\n    // 其他方法保持不变\n  }, {\n    key: \"screenToStage\",\n    value: function screenToStage(screenX, screenY) {\n      var canvas = this.editor.canvas;\n      var rect = canvas.getBoundingClientRect();\n      var canvasX = (screenX - rect.left) * (canvas.width / rect.width);\n      var canvasY = (screenY - rect.top) * (canvas.height / rect.height);\n      return {\n        x: (canvasX - this.offsetX) / this.scale,\n        y: (canvasY - this.offsetY) / this.scale\n      };\n    }\n  }, {\n    key: \"handleWheelZoom\",\n    value: function handleWheelZoom(delta, mouseX, mouseY) {\n      // 1. 计算新缩放比例\n      var oldScale = this.scale;\n      var newScale = Math.max(this.minScale, Math.min(oldScale + delta, this.maxScale));\n      if (newScale === oldScale) return;\n      var stagePointAtMouse = {\n        x: (mouseX - this.offsetX) / oldScale,\n        // 鼠标对应舞台上的原始坐标\n        y: (mouseY - this.offsetY) / oldScale\n      };\n      this.offsetX = mouseX - stagePointAtMouse.x * newScale;\n      this.offsetY = mouseY - stagePointAtMouse.y * newScale;\n      this.scale = newScale;\n      this.applyStageTransform();\n    }\n\n    // 舞台重置缩放（提供外部调用，如果有需要的话）\n  }, {\n    key: \"resetStage\",\n    value: function resetStage() {\n      this.scale = this.isAppEmbedded() ? this.calcScaleByPageAndBaseWidth() : 1;\n      this.initCenterPosition();\n    }\n  }, {\n    key: \"calcDistance\",\n    value: function calcDistance(p1, p2) {\n      var dx = p2.x - p1.x;\n      var dy = p2.y - p1.y;\n      return Math.sqrt(dx * dx + dy * dy);\n    }\n  }, {\n    key: \"calcCenter\",\n    value: function calcCenter(p1, p2) {\n      return {\n        x: (p1.x + p2.x) / 2,\n        y: (p1.y + p2.y) / 2\n      };\n    }\n\n    // 舞台多点触控缩放\n  }, {\n    key: \"handleNativeTouchStart\",\n    value: function handleNativeTouchStart(touches) {\n      var _this2 = this;\n      jscolor.hide();\n      if (this.editor.elementManager.selectedComponent) return;\n      var firstTouch = touches[0];\n      if (!firstTouch || !firstTouch.global) return;\n      this.editor.control.setCurrentElement(null);\n      this.editor.control.handleChangeShowText(false);\n      touches.forEach(function (touch) {\n        _this2.editor.elementManager.touchPoints.set(touch.identifier, touch);\n      });\n      if (touches.length === 2) {\n        this.editor.elementManager.selectComponent(null);\n        this.editor.elementManager.isDraggingComponent = false;\n        this.editor.elementManager.isPinching = true;\n        this.startPinch(touches);\n      } else if (touches.length === 1) {\n        if (this.isDragging) {\n          this.stopDragging();\n        }\n        this.editor.control.handleChangeTarget('page');\n        this.editor.elementManager.selectComponent(null);\n        this.startDragging(firstTouch.global.x, firstTouch.global.y);\n      }\n    }\n\n    // 舞台多点触控缩放\n  }, {\n    key: \"handleNativeTouchMove\",\n    value: function handleNativeTouchMove(touches) {\n      if (this.editor.elementManager.selectedComponent) return;\n      if (!touches.length && this !== null && this !== void 0 && this.isDragging) {\n        this.stopDragging();\n        return;\n      }\n      if (touches.length === 2) {\n        this.editor.elementManager.selectComponent(null);\n        this.editor.elementManager.isDraggingComponent = false;\n        this.editor.elementManager.isPinching = true;\n        this.handlePinch(touches);\n      } else if (touches.length === 1) {\n        var touch = touches[0];\n        this.drag(touch.global.x, touch.global.y);\n      }\n    }\n\n    // 舞台多点触控缩放\n  }, {\n    key: \"handleNativeTouchEnd\",\n    value: function handleNativeTouchEnd(touches) {\n      var _this3 = this;\n      touches.forEach(function (touch) {\n        _this3.editor.elementManager.touchPoints[\"delete\"](touch.identifier);\n      });\n      var remainingTouches = Array.from(this.editor.elementManager.touchPoints.values());\n      this.stopDragging();\n      if (remainingTouches.length < 2) {\n        this.editor.elementManager.isPinching = false;\n      }\n      if (remainingTouches.length === 0) {\n        this.editor.elementManager.isDraggingComponent = false;\n      }\n    }\n  }]);\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StageManager);\n\n//# sourceURL=webpack://screen-edit/./js/StageManager.js?\n}");

/***/ }),

/***/ "./js/config.js":
/*!**********************!*\
  !*** ./js/config.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiUrl: () => (/* binding */ apiUrl),\n/* harmony export */   controls: () => (/* binding */ controls),\n/* harmony export */   defaultPickColors: () => (/* binding */ defaultPickColors),\n/* harmony export */   elementKeyMap: () => (/* binding */ elementKeyMap),\n/* harmony export */   getUnitArray: () => (/* binding */ getUnitArray),\n/* harmony export */   iconKeyMap: () => (/* binding */ iconKeyMap),\n/* harmony export */   parts: () => (/* binding */ parts),\n/* harmony export */   svgs: () => (/* binding */ svgs),\n/* harmony export */   tabs: () => (/* binding */ tabs)\n/* harmony export */ });\nvar defaultPickColors = ['#000000', '#7F7F7F', '#CCCCCC', '#006BF7', '#F6B51E', '#FF6D1A', '#05AD9D'];\nvar apiUrl = 'https://pd1-dev.proteus-dt.com/api';\n// const apiUrl = '';\nvar controls = [{\n  id: 'shape',\n  name: 'Shape',\n  icon: 'shape'\n},\n// {\n//     id: 'BG',\n//     name: 'BG',\n//     icon: 'bg'\n// },\n{\n  id: 'Image',\n  name: 'Image',\n  icon: 'image'\n}, {\n  id: 'Text',\n  name: 'Text',\n  icon: 'text'\n}, {\n  id: 'Parts',\n  name: 'Parts',\n  icon: 'parts'\n}, {\n  id: 'Icon',\n  name: 'Icon',\n  icon: 'icon'\n}];\nvar tabs = {\n  'shape-container': [{\n    name: 'Fill',\n    children: [{\n      name: 'rectangle',\n      children: [{\n        label: 'Type',\n        type: 'gradient-type'\n      }, {\n        label: '',\n        type: 'gradient-slider'\n      }, {\n        label: 'Color',\n        type: 'color-picker'\n      }, {\n        label: 'Color Opacity',\n        type: 'gradient-opacity'\n      }, {\n        label: 'Color Angel',\n        type: 'gradient-angle'\n      }]\n    }, {\n      name: 'circle',\n      children: [{\n        label: 'Type',\n        type: 'gradient-type'\n      }, {\n        label: '',\n        type: 'gradient-slider'\n      }, {\n        label: 'Color',\n        type: 'color-picker'\n      }, {\n        label: 'Color Opacity',\n        type: 'gradient-opacity'\n      }, {\n        label: 'Color Angel',\n        type: 'gradient-angle'\n      }]\n    }, {\n      name: 'triangle',\n      children: [{\n        label: 'Type',\n        type: 'gradient-type'\n      }, {\n        label: '',\n        type: 'gradient-slider'\n      }, {\n        label: 'Color',\n        type: 'color-picker'\n      }, {\n        label: 'Color Opacity',\n        type: 'gradient-opacity'\n      }, {\n        label: 'Color Angel',\n        type: 'gradient-angle'\n      }]\n    }\n    // {\n    //     name: 'line',\n    //     children: []\n    // }\n    ]\n  },\n  // {\n  //     name: 'Stroke',\n  //     children: [\n  //         {\n  //             name: '',\n  //             children: []\n  //         }\n  //     ]\n  // },\n  {\n    name: 'Others',\n    children: [{\n      name: 'rectangle',\n      children: [{\n        label: '',\n        type: 'bounds-setting'\n      }, {\n        label: 'Opacity',\n        type: 'opacity-slider'\n      }, {\n        label: 'Border Radius',\n        type: 'border-radius-slider'\n      }, {\n        label: 'Angle',\n        type: 'angle-slider'\n      }]\n    }, {\n      name: 'circle',\n      children: [{\n        label: '',\n        type: 'bounds-setting'\n      }, {\n        label: 'Opacity',\n        type: 'opacity-slider'\n      }, {\n        label: 'Angle',\n        type: 'angle-slider'\n      }]\n    }, {\n      name: 'triangle',\n      children: [{\n        label: '',\n        type: 'bounds-setting'\n      }, {\n        label: 'Opacity',\n        type: 'opacity-slider'\n      }, {\n        label: 'Angle',\n        type: 'angle-slider'\n      }]\n    }]\n  }],\n  'text-container': [{\n    name: 'Style',\n    children: [{\n      name: 'General',\n      children: [{\n        label: 'Size',\n        type: 'size-slider'\n      }, {\n        label: 'Color',\n        type: 'color-picker'\n      }, {\n        label: 'Angle',\n        type: 'angle-slider'\n      }]\n    },\n    // {\n    //     name: 'Stroke',\n    //     children: []\n    // },\n    {\n      name: 'Background',\n      children: [{\n        label: 'Color',\n        type: 'color-picker'\n      }, {\n        label: 'Opacity',\n        type: 'opacity-slider'\n      }, {\n        label: 'Border Radius',\n        type: 'border-radius-slider'\n      }]\n    }, {\n      name: 'Alignment',\n      children: [{\n        label: 'Alignment method',\n        type: 'align-selector'\n      }, {\n        label: 'Letter Spacing',\n        type: 'letter-spacing-slider'\n      }, {\n        label: 'Line Height',\n        type: 'line-height-slider'\n      }]\n    },\n    // {\n    //     name: 'Font',\n    //     children: []\n    // },\n    {\n      name: 'Shadow',\n      children: [{\n        label: 'Color',\n        type: 'color-picker'\n      }, {\n        label: 'Opacity',\n        type: 'opacity-slider'\n      }, {\n        label: 'Distance',\n        type: 'distance-slider'\n      }, {\n        label: 'Angle',\n        type: 'angle-slider'\n      }]\n    }]\n  }\n  // {\n  //     name: 'Data',\n  //     children: [\n  //         {\n  //             name: '',\n  //             children: []\n  //         }\n  //     ]\n  // }\n  ],\n  \"icon-container\": [\n  // {\n  //     name: 'Icon',\n  //     children: []\n  // },\n  {\n    name: 'Style',\n    children: [{\n      name: '',\n      children: [{\n        label: 'Color',\n        type: 'color-picker'\n      }, {\n        label: 'Opacity',\n        type: 'opacity-slider'\n      }, {\n        label: 'Angle',\n        type: 'angle-slider'\n      }, {\n        label: '',\n        type: 'bounds-setting'\n      }]\n    }]\n  }],\n  \"image-container\": [{\n    name: 'Image',\n    children: [{\n      name: '',\n      children: [{\n        label: 'Opacity',\n        type: 'opacity-slider'\n      }, {\n        label: 'Angle',\n        type: 'angle-slider'\n      }]\n    }]\n  }\n  // {\n  //     name: 'Crop',\n  //     children: [\n  //\n  //     ]\n  // }\n  ],\n  \"box-container\": [\n  // {\n  //     name: 'Style',\n  //     children: []\n  // },\n  {\n    name: 'Data',\n    children: [{\n      name: '',\n      children: [{\n        label: '',\n        type: 'data-setting'\n      }]\n    }]\n  }]\n};\nvar svgs = [{\n  name: 'Acc Pos',\n  url: 'Acc_Pos.svg'\n}, {\n  name: 'Engine Load',\n  url: 'Engine_Load.svg'\n}, {\n  name: 'Throttle Pos',\n  url: 'Throttle_Pos.svg'\n}, {\n  name: 'Bluetooth',\n  url: 'Bluetooth.svg'\n}, {\n  name: 'Fuel Tank',\n  url: 'Fuel_Tank.svg'\n}, {\n  name: 'Thermometer',\n  url: 'Thermometer.svg'\n}];\nvar parts = [{\n  name: 'Full Template',\n  children: [{\n    url: 't_001.png',\n    tempId: 1,\n    canMoving: false,\n    canEdit: true,\n    list: [{\n      action: 'part',\n      partId: 7,\n      sortId: 1,\n      data: {\n        texts: [{\n          content: \"Data Name One\",\n          x: -75,\n          y: -30,\n          fontSize: 14,\n          fill: \"#99A0AE\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Ambient air temperature\",\n          groupDataType: \"name\"\n        }, {\n          content: \"561\",\n          x: 20,\n          y: 20,\n          fontSize: 32,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Ambient air temperature\",\n          groupDataType: \"value\"\n        }, {\n          content: \"KM\",\n          x: 25,\n          y: 25,\n          fontSize: 18,\n          fill: \"#3288F8\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Ambient air temperature\",\n          groupDataType: \"unit\"\n        }],\n        shapes: [{\n          type: \"rect\",\n          x: 0,\n          y: 0,\n          width: 181,\n          height: 120,\n          color: \"#1c1c1d\",\n          radius: 4\n        }],\n        images: [],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: -294.5,\n        offsetY: 165\n      }\n    }, {\n      action: 'part',\n      partId: 7,\n      sortId: 2,\n      data: {\n        texts: [{\n          content: \"Data Name One\",\n          x: -75,\n          y: -30,\n          fontSize: 14,\n          fill: \"#99A0AE\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine oil temperature\",\n          groupDataType: \"name\"\n        }, {\n          content: \"561\",\n          x: 20,\n          y: 20,\n          fontSize: 32,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine oil temperature\",\n          groupDataType: \"value\"\n        }, {\n          content: \"KM\",\n          x: 25,\n          y: 25,\n          fontSize: 18,\n          fill: \"#3288F8\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine oil temperature\",\n          groupDataType: \"unit\"\n        }],\n        shapes: [{\n          type: \"rect\",\n          x: 0,\n          y: 0,\n          width: 181,\n          height: 120,\n          color: \"#1c1c1d\",\n          radius: 4\n        }],\n        images: [],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: -98.5,\n        offsetY: 165\n      }\n    }, {\n      action: 'part',\n      partId: 7,\n      sortId: 3,\n      data: {\n        texts: [{\n          content: \"Data Name One\",\n          x: -75,\n          y: -30,\n          fontSize: 14,\n          fill: \"#99A0AE\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine Coolant Temperature\",\n          groupDataType: \"name\"\n        }, {\n          content: \"561\",\n          x: 20,\n          y: 20,\n          fontSize: 32,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine Coolant Temperature\",\n          groupDataType: \"value\"\n        }, {\n          content: \"KM\",\n          x: 25,\n          y: 25,\n          fontSize: 18,\n          fill: \"#3288F8\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine Coolant Temperature\",\n          groupDataType: \"unit\"\n        }],\n        shapes: [{\n          type: \"rect\",\n          x: 0,\n          y: 0,\n          width: 181,\n          height: 120,\n          color: \"#1c1c1d\",\n          radius: 4\n        }],\n        images: [],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: 97.5,\n        offsetY: 165\n      }\n    }, {\n      action: 'part',\n      partId: 7,\n      sortId: 4,\n      data: {\n        texts: [{\n          content: \"Data Name One\",\n          x: -75,\n          y: -30,\n          fontSize: 14,\n          fill: \"#99A0AE\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"DEF Tank Temperature\",\n          groupDataType: \"name\"\n        }, {\n          content: \"561\",\n          x: 20,\n          y: 20,\n          fontSize: 32,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"DEF Tank Temperature\",\n          groupDataType: \"value\"\n        }, {\n          content: \"KM\",\n          x: 25,\n          y: 25,\n          fontSize: 18,\n          fill: \"#3288F8\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"DEF Tank Temperature\",\n          groupDataType: \"unit\"\n        }],\n        shapes: [{\n          type: \"rect\",\n          x: 0,\n          y: 0,\n          width: 181,\n          height: 120,\n          color: \"#1c1c1d\",\n          radius: 4\n        }],\n        images: [],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: 293.5,\n        offsetY: 165\n      }\n    }, {\n      action: 'part',\n      partId: 8,\n      data: {\n        texts: [{\n          content: \"6998\",\n          x: -130,\n          y: 70,\n          fontSize: 100,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Vehicle Speed\",\n          groupDataType: \"value\"\n        }, {\n          content: \"km/h\",\n          x: -120,\n          y: 95,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Vehicle Speed\",\n          groupDataType: \"unit\"\n        }, {\n          content: \"1000\",\n          x: 260,\n          y: 95,\n          fontSize: 26,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          },\n          groupDataIndex: 2,\n          groupDataKey: \"Engine RPM\",\n          groupDataType: \"value\"\n        }, {\n          content: \"RPM\",\n          x: 260,\n          y: 95,\n          fontSize: 26,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          },\n          groupDataIndex: 2,\n          groupDataKey: \"Engine RPM\",\n          groupDataType: \"unit\"\n        }, {\n          content: \"1\",\n          x: -315.5,\n          y: -90,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          }\n        }, {\n          content: \"2\",\n          x: -229.5,\n          y: -90,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          }\n        }, {\n          content: \"3\",\n          x: -143.5,\n          y: -90,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          }\n        }, {\n          content: \"4\",\n          x: -57.5,\n          y: -90,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          }\n        }, {\n          content: \"5\",\n          x: 28.5,\n          y: -90,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          }\n        }, {\n          content: \"6\",\n          x: 114.5,\n          y: -90,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          }\n        }, {\n          content: \"7\",\n          x: 200.5,\n          y: -90,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          }\n        }, {\n          content: \"8\",\n          x: 286.5,\n          y: -90,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          }\n        }, {\n          content: \"9\",\n          x: 372.5,\n          y: -90,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          }\n        }],\n        shapes: [{\n          type: \"rect\",\n          x: 0,\n          y: 0,\n          width: 770,\n          height: 260,\n          color: \"#1c1c1d\",\n          radius: 0\n        }, {\n          type: \"rect\",\n          colorType: 'Linear',\n          x: -130,\n          y: 0,\n          width: 510,\n          height: 260,\n          color: \"#3288F8\",\n          radius: 0,\n          gradient: {\n            isLinear: true,\n            colorStops: [{\n              position: 0,\n              color: \"#1b1f23\"\n            }, {\n              position: 100,\n              color: \"#3288f8\"\n            }],\n            gradientParams: {\n              x0: 0,\n              y0: 0,\n              x1: 612,\n              y1: 0,\n              r0: 0,\n              r1: 0\n            }\n          }\n        }, {\n          type: \"rect\",\n          x: -302.5,\n          y: 0,\n          width: 4,\n          height: 260,\n          color: \"#0a0a0a\",\n          radius: 0\n        }, {\n          type: \"rect\",\n          x: -216.5,\n          y: 0,\n          width: 4,\n          height: 260,\n          color: \"#0a0a0a\",\n          radius: 0\n        }, {\n          type: \"rect\",\n          x: -131,\n          y: 0,\n          width: 4,\n          height: 260,\n          color: \"#0a0a0a\",\n          radius: 0\n        }, {\n          type: \"rect\",\n          x: -45.5,\n          y: 0,\n          width: 4,\n          height: 260,\n          color: \"#0a0a0a\",\n          radius: 0\n        }, {\n          type: \"rect\",\n          x: 40,\n          y: 0,\n          width: 4,\n          height: 260,\n          color: \"#0a0a0a\",\n          radius: 0\n        }, {\n          type: \"rect\",\n          x: 125.5,\n          y: 0,\n          width: 4,\n          height: 260,\n          color: \"#0a0a0a\",\n          radius: 0\n        }, {\n          type: \"rect\",\n          x: 211,\n          y: 0,\n          width: 4,\n          height: 260,\n          color: \"#0a0a0a\",\n          radius: 0\n        }, {\n          type: \"rect\",\n          x: 296.5,\n          y: 0,\n          width: 4,\n          height: 260,\n          color: \"#0a0a0a\",\n          radius: 0\n        }],\n        images: [],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: 0,\n        offsetY: -35\n      }\n    }, {\n      action: 'part',\n      partId: 9,\n      data: {\n        texts: [{\n          content: \"60\",\n          x: -140,\n          y: -6,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Fuel Level Input\",\n          groupDataType: \"value\"\n        }, {\n          content: \"%\",\n          x: -120,\n          y: -4,\n          fontSize: 12,\n          fill: \"#6F7788\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Fuel Level Input\",\n          groupDataType: \"unit\"\n        }, {\n          content: \"728\",\n          x: -10,\n          y: -6,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          },\n          groupDataIndex: 2,\n          groupDataKey: \"Vehicle Odometer Reading\",\n          groupDataType: \"value\"\n        }, {\n          content: \"km\",\n          x: 22,\n          y: -4,\n          fontSize: 12,\n          fill: \"#6F7788\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          },\n          groupDataIndex: 2,\n          groupDataKey: \"Vehicle Odometer Reading\",\n          groupDataType: \"unit\"\n        }, {\n          content: \"88\",\n          x: 110,\n          y: -6,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          },\n          groupDataIndex: 3,\n          groupDataKey: \"Engine oil temperature\",\n          groupDataType: \"value\"\n        }, {\n          content: \"°C\",\n          x: 130,\n          y: -4,\n          fontSize: 12,\n          fill: \"#6F7788\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          },\n          groupDataIndex: 3,\n          groupDataKey: \"Engine oil temperature\",\n          groupDataType: \"unit\"\n        }],\n        shapes: [],\n        images: [{\n          url: './images/graph/shape_001.png',\n          x: 0,\n          y: 0,\n          width: 426,\n          height: 50\n        }],\n        icons: [{\n          url: './css/svg/Engine_Load.svg',\n          x: -180,\n          y: -10,\n          width: 24,\n          height: 24,\n          color: '#FFFFFF',\n          groupDataIndex: 1,\n          groupDataKey: \"Fuel Level Input\",\n          groupDataType: \"icon\"\n        }, {\n          url: './css/svg/Fuel_Tank.svg',\n          x: -60,\n          y: -10,\n          width: 24,\n          height: 24,\n          color: '#FFFFFF',\n          groupDataIndex: 2,\n          groupDataKey: \"Vehicle Odometer Reading\",\n          groupDataType: \"icon\"\n        }, {\n          url: './css/svg/Thermometer.svg',\n          x: 70,\n          y: -10,\n          width: 24,\n          height: 24,\n          color: '#FFFFFF',\n          groupDataIndex: 3,\n          groupDataKey: \"Engine oil temperature\",\n          groupDataType: \"icon\"\n        }],\n        alpha: 1,\n        rotation: 0,\n        offsetX: -187,\n        offsetY: -200\n      }\n    }, {\n      action: 'part',\n      partId: 10,\n      data: {\n        texts: [{\n          content: \"10:58\",\n          x: 0,\n          y: -8,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          }\n        }, {\n          content: \"AM\",\n          x: 35,\n          y: -6,\n          fontSize: 12,\n          fill: \"#6F7788\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          shadow: {\n            enable: true,\n            color: '#000000',\n            alpha: 0.7,\n            blur: 1,\n            angle: 20\n          }\n        }],\n        shapes: [],\n        images: [{\n          url: './images/graph/shape_002.png',\n          x: 0,\n          y: 0,\n          width: 220,\n          height: 50\n        }],\n        icons: [{\n          url: './css/svg/Bluetooth.svg',\n          x: 85,\n          y: -10,\n          width: 24,\n          height: 24,\n          color: '#3288F8'\n        }],\n        alpha: 1,\n        rotation: 0,\n        offsetX: 290,\n        offsetY: -200\n      }\n    }, {\n      action: 'part',\n      partId: 11,\n      data: {\n        texts: [{\n          content: \"R\",\n          x: -53,\n          y: 3,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          }\n        }, {\n          content: \"N\",\n          x: 3,\n          y: 3,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          }\n        }, {\n          content: \"D\",\n          x: 59,\n          y: 3,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          }\n        }],\n        shapes: [{\n          type: \"circle\",\n          colorType: 'Radial',\n          x: 0,\n          y: 0,\n          width: 50,\n          height: 50,\n          radius: 50,\n          gradient: {\n            isLinear: false,\n            colorStops: [{\n              position: 0,\n              color: \"#FFFFFF\"\n            }, {\n              position: 50,\n              color: \"#59A1FF\"\n            }, {\n              position: 100,\n              color: \"#59A1FF00\"\n            }],\n            gradientParams: {\n              x0: 50,\n              y0: 50,\n              r0: 0,\n              x1: 50,\n              y1: 50,\n              r1: 50\n            }\n          }\n        }, {\n          type: \"circle\",\n          x: 0,\n          y: 0,\n          width: 40,\n          height: 40,\n          color: \"#000000\",\n          radius: 40\n        }],\n        images: [],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: 105,\n        offsetY: -205\n      }\n    }]\n  }, {\n    url: 't_002.png',\n    tempId: 2,\n    canMoving: false,\n    canEdit: true,\n    list: [{\n      action: 'part',\n      partId: 1,\n      sortId: 1,\n      data: {\n        texts: [{\n          content: \"Data name One\",\n          x: 0,\n          y: -10,\n          fontSize: 14,\n          fill: \"#00FE8C\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: 'Ambient air temperature',\n          groupDataType: \"name\"\n        }, {\n          content: \"562\",\n          x: 0,\n          y: 19,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: 'Ambient air temperature',\n          groupDataType: \"value\"\n        }, {\n          content: \"km/h\",\n          x: 0,\n          y: 21,\n          fontSize: 16,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: 'Ambient air temperature',\n          groupDataType: \"unit\"\n        }],\n        shapes: [{\n          type: \"rect\",\n          colorType: \"Linear\",\n          x: 0,\n          y: 0,\n          width: 150,\n          height: 1,\n          color: \"#01fb8a\",\n          radius: 0,\n          gradient: {\n            isLinear: true,\n            colorStops: [{\n              position: 0,\n              color: \"#01FB8A14\"\n            }, {\n              position: 50,\n              color: \"#01FB8A\"\n            }, {\n              position: 100,\n              color: \"#01FB8A14\"\n            }],\n            gradientParams: {\n              x0: 0,\n              y0: 0,\n              x1: 150,\n              y1: 0,\n              r0: 0,\n              r1: 0\n            }\n          }\n        }],\n        images: [],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: -275,\n        offsetY: 190\n      }\n    }, {\n      action: 'part',\n      partId: 1,\n      sortId: 2,\n      data: {\n        texts: [{\n          content: \"Data name One\",\n          x: 0,\n          y: -10,\n          fontSize: 14,\n          fill: \"#00FE8C\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine oil temperature\",\n          groupDataType: \"name\"\n        }, {\n          content: \"562\",\n          x: 0,\n          y: 19,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine oil temperature\",\n          groupDataType: \"value\"\n        }, {\n          content: \"km/h\",\n          x: 0,\n          y: 21,\n          fontSize: 16,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine oil temperature\",\n          groupDataType: \"unit\"\n        }],\n        shapes: [{\n          type: \"rect\",\n          colorType: \"Linear\",\n          x: 0,\n          y: 0,\n          width: 150,\n          height: 1,\n          color: \"#01fb8a\",\n          radius: 0,\n          gradient: {\n            isLinear: true,\n            colorStops: [{\n              position: 0,\n              color: \"#01FB8A14\"\n            }, {\n              position: 50,\n              color: \"#01FB8A\"\n            }, {\n              position: 100,\n              color: \"#01FB8A14\"\n            }],\n            gradientParams: {\n              x0: 0,\n              y0: 0,\n              x1: 150,\n              y1: 0,\n              r0: 0,\n              r1: 0\n            }\n          }\n        }],\n        images: [],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: -95,\n        offsetY: 190\n      }\n    }, {\n      action: 'part',\n      partId: 1,\n      sortId: 3,\n      data: {\n        texts: [{\n          content: \"Data name One\",\n          x: 0,\n          y: -10,\n          fontSize: 14,\n          fill: \"#00FE8C\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine Coolant Temperature\",\n          groupDataType: \"name\"\n        }, {\n          content: \"562\",\n          x: 0,\n          y: 19,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine Coolant Temperature\",\n          groupDataType: \"value\"\n        }, {\n          content: \"km/h\",\n          x: 0,\n          y: 21,\n          fontSize: 16,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine Coolant Temperature\",\n          groupDataType: \"unit\"\n        }],\n        shapes: [{\n          type: \"rect\",\n          colorType: \"Linear\",\n          x: 0,\n          y: 0,\n          width: 150,\n          height: 1,\n          color: \"#01fb8a\",\n          radius: 0,\n          gradient: {\n            isLinear: true,\n            colorStops: [{\n              position: 0,\n              color: \"#01FB8A14\"\n            }, {\n              position: 50,\n              color: \"#01FB8A\"\n            }, {\n              position: 100,\n              color: \"#01FB8A14\"\n            }],\n            gradientParams: {\n              x0: 0,\n              y0: 0,\n              x1: 150,\n              y1: 0,\n              r0: 0,\n              r1: 0\n            }\n          }\n        }],\n        images: [],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: 95,\n        offsetY: 190\n      }\n    }, {\n      action: 'part',\n      partId: 1,\n      sortId: 4,\n      data: {\n        texts: [{\n          content: \"Data name One\",\n          x: 0,\n          y: -10,\n          fontSize: 14,\n          fill: \"#00FE8C\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"DEF Tank Temperature\",\n          groupDataType: \"name\"\n        }, {\n          content: \"562\",\n          x: 0,\n          y: 19,\n          fontSize: 24,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"DEF Tank Temperature\",\n          groupDataType: \"value\"\n        }, {\n          content: \"km/h\",\n          x: 0,\n          y: 21,\n          fontSize: 16,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"DEF Tank Temperature\",\n          groupDataType: \"unit\"\n        }],\n        shapes: [{\n          type: \"rect\",\n          colorType: \"Linear\",\n          x: 0,\n          y: 0,\n          width: 150,\n          height: 1,\n          color: \"#01fb8a\",\n          radius: 0,\n          gradient: {\n            isLinear: true,\n            colorStops: [{\n              position: 0,\n              color: \"#01FB8A14\"\n            }, {\n              position: 50,\n              color: \"#01FB8A\"\n            }, {\n              position: 100,\n              color: \"#01FB8A14\"\n            }],\n            gradientParams: {\n              x0: 0,\n              y0: 0,\n              x1: 150,\n              y1: 0,\n              r0: 0,\n              r1: 0\n            }\n          }\n        }],\n        images: [],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: 275,\n        offsetY: 190\n      }\n    }, {\n      action: 'part',\n      partId: 2,\n      data: {\n        texts: [{\n          content: \"R\",\n          x: -35,\n          y: 0,\n          fontSize: 20,\n          fill: \"#99A0AE\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          }\n        }, {\n          content: \"N\",\n          x: 5,\n          y: -1,\n          fontSize: 26,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          }\n        }, {\n          content: \"D\",\n          x: 45,\n          y: 0,\n          fontSize: 20,\n          fill: \"#99A0AE\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          }\n        }],\n        shapes: [{\n          type: \"rect\",\n          colorType: \"Solid\",\n          x: 0,\n          y: 0,\n          width: 100,\n          height: 20,\n          color: \"#0B0B0D00\",\n          radius: 0\n        }],\n        images: [],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: -330,\n        offsetY: -210\n      }\n    }, {\n      action: 'part',\n      partId: 3,\n      data: {\n        texts: [{\n          content: \"10:58\",\n          x: 0,\n          y: 1,\n          fontSize: 18,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          }\n        }, {\n          content: \"AM\",\n          x: 3,\n          y: 2,\n          fontSize: 14,\n          fill: \"#99A0AE\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          }\n        }],\n        shapes: [],\n        images: [{\n          url: './images/graph/shape_003.png',\n          x: 0,\n          y: 0,\n          width: 379,\n          height: 50\n        }],\n        icons: [{\n          url: './css/svg/Bluetooth.svg',\n          x: 50,\n          y: -3,\n          width: 20,\n          height: 20,\n          color: '#3288F8'\n        }],\n        alpha: 1,\n        rotation: 0,\n        offsetX: 0,\n        offsetY: -215\n      }\n    }, {\n      action: 'part',\n      partId: 4,\n      data: {\n        texts: [{\n          content: \"2000\",\n          x: 0,\n          y: 0,\n          fontSize: 36,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine RPM\",\n          groupDataType: \"value\"\n        }, {\n          content: \"RPM\",\n          x: 0,\n          y: 30,\n          fontSize: 14,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Engine RPM\",\n          groupDataType: \"name\"\n        }],\n        shapes: [{\n          type: \"ring\",\n          colorType: \"Conic\",\n          x: 0,\n          y: -1,\n          width: 50,\n          height: 50,\n          color: \"#01fb8a\",\n          radius: 0,\n          gradient: {\n            isLinear: false,\n            colorStops: [{\n              position: 0,\n              color: \"#07C053\"\n            }, {\n              position: 60,\n              color: \"#1348B2\"\n            }, {\n              position: 100,\n              color: \"#07C053\"\n            }]\n          },\n          ringOption: {\n            radius: 85,\n            ringThickness: 12,\n            startAngle: 80,\n            endAngle: 350,\n            color: '#FFFFFF'\n          },\n          zIndex: 200\n        }],\n        images: [{\n          url: './images/graph/shape_004.png',\n          x: 0,\n          y: 0,\n          width: 300,\n          height: 300\n        }],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: -250,\n        offsetY: 0\n      }\n    }, {\n      action: 'part',\n      partId: 5,\n      data: {\n        texts: [{\n          content: \"14.4\",\n          x: 30,\n          y: 0,\n          fontSize: 36,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 1,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Control module voltage\",\n          groupDataType: \"value\"\n        }, {\n          content: \"v\",\n          x: 30,\n          y: 5,\n          fontSize: 20,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Control module voltage\",\n          groupDataType: \"unit\"\n        }, {\n          content: \"Voltage\",\n          x: 0,\n          y: 30,\n          fontSize: 14,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Control module voltage\",\n          groupDataType: \"name\"\n        }],\n        shapes: [{\n          type: \"ring\",\n          colorType: \"Conic\",\n          x: 0,\n          y: -1,\n          width: 50,\n          height: 50,\n          color: \"#01fb8a\",\n          radius: 0,\n          gradient: {\n            isLinear: false,\n            colorStops: [{\n              position: 0,\n              color: \"#346BF5\"\n            }, {\n              position: 60,\n              color: \"#74F4FA\"\n            }, {\n              position: 100,\n              color: \"#346BF5\"\n            }]\n          },\n          ringOption: {\n            radius: 85,\n            ringThickness: 12,\n            startAngle: 80,\n            endAngle: 350,\n            color: '#FFFFFF'\n          },\n          zIndex: 200\n        }],\n        images: [{\n          url: './images/graph/shape_004.png',\n          x: 0,\n          y: 0,\n          width: 300,\n          height: 300\n        }],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: 250,\n        offsetY: 0\n      }\n    }, {\n      action: 'part',\n      partId: 6,\n      data: {\n        texts: [{\n          content: \"130\",\n          x: 0,\n          y: -5,\n          fontSize: 60,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Vehicle Speed\",\n          groupDataType: \"value\"\n        }, {\n          content: \"km/h\",\n          x: 0,\n          y: 30,\n          fontSize: 12,\n          fill: \"#FFFFFF\",\n          anchor: {\n            x: 0.5,\n            y: 0.5\n          },\n          groupDataIndex: 1,\n          groupDataKey: \"Vehicle Speed\",\n          groupDataType: \"unit\"\n        }],\n        shapes: [{\n          type: \"circle\",\n          colorType: \"Conic\",\n          x: 0,\n          y: -5,\n          width: 280,\n          height: 280,\n          color: \"#01fb8a\",\n          radius: 280,\n          gradient: {\n            isLinear: false,\n            colorStops: [{\n              position: 0,\n              color: \"#07C05346\"\n            }, {\n              position: 74.9,\n              color: \"#1348B246\"\n            }, {\n              position: 75,\n              color: \"#1348B200\"\n            }, {\n              position: 100,\n              color: \"#1348B200\"\n            }]\n          },\n          centerX: 0,\n          centerY: 0,\n          startAngle: 0\n        }, {\n          type: \"circle\",\n          colorType: \"Solid\",\n          x: 0,\n          y: -5,\n          width: 170,\n          height: 170,\n          color: \"#0B0B0D\",\n          radius: 170\n        }, {\n          type: \"circle\",\n          colorType: \"Solid\",\n          x: 0,\n          y: -5,\n          width: 110,\n          height: 110,\n          color: \"#232325\",\n          radius: 110\n        }, {\n          type: \"circle\",\n          colorType: \"Solid\",\n          x: 0,\n          y: -5,\n          width: 107,\n          height: 107,\n          color: \"#0B0B0D\",\n          radius: 107\n        }, {\n          type: \"triangle\",\n          colorType: \"Solid\",\n          x: 0,\n          y: -112,\n          width: 5,\n          height: 70,\n          color: \"#FFFFFF\",\n          radius: 0\n        }, {\n          type: \"circle\",\n          colorType: \"Solid\",\n          x: 0,\n          y: -76,\n          width: 5,\n          height: 5,\n          color: \"#FFFFFF\",\n          radius: 5\n        }],\n        images: [{\n          url: './images/graph/shape_005.png',\n          x: 0,\n          y: 0,\n          width: 340,\n          height: 340\n        }, {\n          url: './images/graph/shape_006.png',\n          x: 0,\n          y: -5,\n          width: 280,\n          height: 280,\n          zIndex: 200\n        }],\n        icons: [],\n        alpha: 1,\n        rotation: 0,\n        offsetX: 0,\n        offsetY: 0\n      }\n    }]\n  }]\n}, {\n  name: 'Dashboard',\n  children: []\n}, {\n  name: 'Graph',\n  children: []\n}, {\n  name: 'Bar',\n  children: []\n}, {\n  name: 'Others',\n  children: []\n}];\nvar elementKeyMap = {\n  'shape-container': 'shape',\n  'icon-container': 'icon',\n  'text-container': 'text',\n  'image-container': 'image'\n};\nvar iconKeyMap = {\n  '%': 'Engine_Load.svg',\n  'km': 'Fuel_Tank.svg',\n  '°C': 'Thermometer.svg'\n};\nvar unitKeyMap = {\n  pressure: ['kPa', 'Psi', 'Bar'],\n  temperature: ['C', 'F'],\n  speed: ['km/h', 'km/j', 'mph', 'rpm'],\n  time: ['hrs', 'min', 'sec'],\n  airflow: ['g/s'],\n  voltage: ['V'],\n  fuelEconomy: ['km/l'],\n  percentage: ['%']\n};\nvar getUnitArray = function getUnitArray(unit) {\n  if (unitKeyMap.pressure.filter(function (x) {\n    return x === unit;\n  }).length > 0) return unitKeyMap.pressure;else if (unitKeyMap.temperature.filter(function (x) {\n    return x === unit;\n  }).length > 0) return unitKeyMap.temperature;else if (unitKeyMap.speed.filter(function (x) {\n    return x === unit;\n  }).length > 0) return unitKeyMap.speed;else if (unitKeyMap.time.filter(function (x) {\n    return x === unit;\n  }).length > 0) return unitKeyMap.time;else if (unitKeyMap.airflow.filter(function (x) {\n    return x === unit;\n  }).length > 0) return unitKeyMap.airflow;else if (unitKeyMap.voltage.filter(function (x) {\n    return x === unit;\n  }).length > 0) return unitKeyMap.voltage;else if (unitKeyMap.fuelEconomy.filter(function (x) {\n    return x === unit;\n  }).length > 0) return unitKeyMap.fuelEconomy;else if (unitKeyMap.percentage.filter(function (x) {\n    return x === unit;\n  }).length > 0) return unitKeyMap.percentage;else return [unit];\n};\n\n\n//# sourceURL=webpack://screen-edit/./js/config.js?\n}");

/***/ }),

/***/ "./js/utils.js":
/*!*********************!*\
  !*** ./js/utils.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   debounce: () => (/* binding */ debounce),\n/* harmony export */   throttle: () => (/* binding */ throttle)\n/* harmony export */ });\nvar _debounceTimeout = null,\n  _throttleRunning = false;\nvar debounce = function debounce(fn) {\n  var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 500;\n  clearTimeout(_debounceTimeout);\n  _debounceTimeout = setTimeout(function () {\n    fn();\n  }, delay);\n};\nvar throttle = function throttle(fn) {\n  var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 500;\n  if (_throttleRunning) {\n    return;\n  }\n  _throttleRunning = true;\n  fn();\n  setTimeout(function () {\n    _throttleRunning = false;\n  }, delay);\n};\n\n\n//# sourceURL=webpack://screen-edit/./js/utils.js?\n}");

/***/ }),

/***/ "./main.js":
/*!*****************!*\
  !*** ./main.js ***!
  \*****************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _js_Editor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/Editor.js */ \"./js/Editor.js\");\n\nwindow.onload = function () {\n  var editor = new _js_Editor_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n};\n\n//# sourceURL=webpack://screen-edit/./main.js?\n}");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./main.js");
/******/ 	
/******/ })()
;